System.register("chunks:///_virtual/Adaptor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UImanager.ts","./ScreenHelper.ts","./logger.ts","./KernelEvent.ts","./EventCenter.ts","./config_ui.ts"],(function(e){var t,i,n,o,s,h,r,a,c,d,g,l,u,f,w;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e.sys,o=e.screen,s=e.Widget,h=e.view,r=e.ResolutionPolicy},function(e){a=e.default},function(e){c=e.default},function(e){d=e.default},function(e){g=e.default},function(e){l=e.default},function(e){u=e.DESIGN_SIZE,f=e.SHOT_SCREEN,w=e.LONG_SCREEN}],execute:function(){i._RF.push({},"602fdU/Q9RNTrMB3zQjrxHq","Adaptor",void 0),e("default",function(){function e(){}return e.listenScreen=function(){console.log("操作系统: ",n.os),o.on("window-resize",(function(){d.log("...... window-resize"),e.adaptScreen(),l.getInstance().fire(g.e_screen_size)})),window.addEventListener("resize",(function(){d.log("...... resize"),c.hideCocosToolbar(),c.onWindowResize(),e.adaptScreen(),l.getInstance().fire(g.e_screen_size)})),c.hideCocosToolbar()},e.onOrientation=function(t){e.swapDesiginDefine(t),c.onWindowResize(),e.adaptScreen(),e.deepUpdateAlignment(a.getUIRoot()),l.getInstance().fire(g.e_screen_size)},e.swapDesiginDefine=function(e){var t=Math.max(u.width,u.height),i=Math.min(u.width,u.height);e?(u.width=t,u.height=i):(u.width=i,u.height=t)},e.deepUpdateAlignment=function(i){if(i){var n=i.getComponent(s);n&&n.updateAlignment();for(var o,h=t(i.children);!(o=h()).done;){var r=o.value;e.deepUpdateAlignment(r)}}},e.adaptScreen=function(){h.setDesignResolutionSize(u.width,u.height,r.FIXED_WIDTH)},e.adaptScreen0=function(){var e=h.getFrameSize(),t=e.width/e.height,i=f.width/f.height,n=w.width/w.height;d.log("adapt screen ...",e.width,e.height,n,t,i),t>=n&&t<=i?(console.log("FIXED_WIDTH"),h.setDesignResolutionSize(u.width,u.height*(e.height/e.width),r.FIXED_WIDTH)):(console.log("SHOW_ALL"),this.adaptScreen2())},e.adaptScreen1=function(){var e=h.getFrameSize(),t=u.width/u.height,i=e.width/e.height;t===i?(console.log("SHOW_ALL"),h.setDesignResolutionSize(u.width,u.height,r.SHOW_ALL)):t>i?(console.log("FIXED_WIDTH"),h.setDesignResolutionSize(u.width,u.height*(e.height/e.width),r.FIXED_WIDTH)):(console.log("FIXED_HEIGHT"),h.setDesignResolutionSize(u.width*i,u.height,r.FIXED_HEIGHT))},e.adaptScreen2=function(){var e=h.getFrameSize(),t=e.width/u.width,i=e.height/u.height,n=Math.min(t,i),o=Math.floor(e.width/n),s=Math.floor(e.height/n);h.setDesignResolutionSize(o,s,r.SHOW_ALL)},e}()).s_is_full_screen=!1,i._RF.pop()}}}));

System.register("chunks:///_virtual/AGrid.ts",["cc","./DiagonalMovement.ts","./ANode.ts"],(function(t){var e,i,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"2256bHPnSRK3pCITU97Y6GI","AGrid",void 0);t("default",function(){function t(t,e,i){var s;void 0===i&&(i=null),this.width=void 0,this.height=void 0,this.nodes=void 0,"object"!=typeof t?s=t:(e=t.length,s=t[0].length,i=t),this.width=s,this.height=e,this.nodes=this._buildNodes(s,e,i)}var e=t.prototype;return e._buildNodes=function(t,e,i){var n,r,o=new Array(e);for(n=0;n<e;++n)for(o[n]=new Array(t),r=0;r<t;++r)o[n][r]=new s(r,n);if(void 0===i)return o;if(i.length!==e||i[0].length!==t)throw new Error("Matrix size does not fit");for(n=0;n<e;++n)for(r=0;r<t;++r)i[n][r]&&(o[n][r].walkable=!1);return o},e.getNodeAt=function(t,e){return this.nodes[e][t]},e.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},e.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},e.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},e.getNeighbors=function(t,e){var s=t.x,n=t.y,r=[],o=!1,h=!1,a=!1,l=!1,u=!1,d=!1,f=!1,c=!1,b=this.nodes;if(this.isWalkableAt(s,n-1)&&(r.push(b[n-1][s]),o=!0),this.isWalkableAt(s+1,n)&&(r.push(b[n][s+1]),a=!0),this.isWalkableAt(s,n+1)&&(r.push(b[n+1][s]),u=!0),this.isWalkableAt(s-1,n)&&(r.push(b[n][s-1]),f=!0),e===i.Never)return r;if(e===i.OnlyWhenNoObstacles)h=f&&o,l=o&&a,d=a&&u,c=u&&f;else if(e===i.IfAtMostOneObstacle)h=f||o,l=o||a,d=a||u,c=u||f;else{if(e!==i.Always)throw new Error("Incorrect value of diagonalMovement");h=!0,l=!0,d=!0,c=!0}return h&&this.isWalkableAt(s-1,n-1)&&r.push(b[n-1][s-1]),l&&this.isWalkableAt(s+1,n-1)&&r.push(b[n-1][s+1]),d&&this.isWalkableAt(s+1,n+1)&&r.push(b[n+1][s+1]),c&&this.isWalkableAt(s-1,n+1)&&r.push(b[n+1][s-1]),r},e.clone=function(){var e,i,n=this.width,r=this.height,o=this.nodes,h=new t(n,r),a=new Array(r);for(e=0;e<r;++e)for(a[e]=new Array(n),i=0;i<n;++i)a[e][i]=new s(i,e,o[e][i].walkable);return h.nodes=a,h},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ANode.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"b62f6sfd/hB+r3UnXUL5B/g","ANode",void 0);t("default",(function(t,i,e){void 0===e&&(e=!0),this.x=void 0,this.y=void 0,this.walkable=void 0,this.x=t,this.y=i,this.walkable=void 0===e||e}));i._RF.pop()}}}));

System.register("chunks:///_virtual/AStarFinder.ts",["cc","./Heuristic.ts","./DiagonalMovement.ts","./Util.ts","./heap.ts"],(function(t){var e,i,n,o,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.default},function(t){o=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"10551Z/ipRDHqcLWX7PpgKz","AStarFinder",void 0);t("default",function(){function t(t){this.allowDiagonal=void 0,this.dontCrossCorners=void 0,this.heuristic=void 0,this.weight=void 0,this.diagonalMovement=void 0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}return t.prototype.findPath=function(t,e,i,n,a){var h,r,l,u,d,c,g,f,v=new s((function(t,e){return t.f-e.f})),p=a.getNodeAt(t,e),m=a.getNodeAt(i,n),M=this.heuristic,w=this.diagonalMovement,C=this.weight,y=Math.abs,D=Math.SQRT2;for(p.g=0,p.f=0,v.push(p),p.opened=!0;!v.empty();){if((h=v.pop()).closed=!0,h===m)return o.backtrace(m);for(u=0,d=(r=a.getNeighbors(h,w)).length;u<d;++u)(l=r[u]).closed||(c=l.x,g=l.y,f=h.g+(c-h.x==0||g-h.y==0?1:D),(!l.opened||f<l.g)&&(l.g=f,l.h=l.h||C*M(y(c-i),y(g-n)),l.f=l.g+l.h,l.parent=h,l.opened?v.updateItem(l):(v.push(l),l.opened=!0)))}return[]},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioCore.ts",["cc","./PlatformUtil.ts","./LiveAudioH5.ts"],(function(t){var n,e,u,r;return{setters:[function(t){n=t.cclegacy,e=t.sys},function(t){u=t.default},function(t){r=t.default}],execute:function(){n._RF.push({},"32b3eL5w01NvJ20WyehDRwb","AudioCore",void 0),t("default",function(){function t(){}return t.setEnabled=function(n){t.enabled=n},t.isSupport=function(){return!!e.isNative||r.isSupport()},t.startRecording=function(){t.enabled&&t.isSupport()&&u.startRecording()},t.stopRecording=function(){return u.stopRecording()},t.playArrayBuffer=function(t){u.playAudioArrayBuffer(t)},t}()).enabled=!0,n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadHelper.ts","./ResInfo.ts"],(function(e){var t,i,s,u,o,n,c,f;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,s=e.Node,u=e.director,o=e.AudioSource,n=e.AudioClip},function(e){c=e.default},function(e){f=e.genResKey}],execute:function(){i._RF.push({},"97346uTAP9G9qf4JhWRXFFE","AudioManager",void 0),e("AudioManager",function(){function e(){this._bgmSource=void 0,this._musicSource=void 0,this._effetSource=void 0,this._bgmEnable=!0,this._musicEnable=!0,this._effectEnable=!0,this._bgmVolume=.2,this._musicVolume=.2,this._effectVolume=1,this._playingEffs={},this.setBgmVolume(this._bgmVolume),this.setMusicVolume(this._musicVolume),this.setEffetVolume(this._effectVolume)}var i=e.prototype;return i.createSource=function(e){var t=new s;return t.name=e,u.getScene().addChild(t),t.addComponent(o)},i.setBgmVolume=function(e){this._bgmVolume=e},i.setMusicVolume=function(e){this._musicVolume=e},i.setEffetVolume=function(e){this._effectVolume=e},i.setBgmEnable=function(e){this._bgmEnable=e,e?this.resumeBGM():this.stopBGM()},i.setMusicEnable=function(e){this._musicEnable=e,e?this.resumeMusic():this.stopMusic()},i.setEffetEnable=function(e){this._effectEnable=e,e?this.resumeEffet():this.stopEffet()},i.setAllEnabled=function(e){this.setBgmEnable(e),this.setMusicEnable(e),this.setEffetEnable(e)},i.playBGM=function(e){var t=this;this._bgmEnable&&c.loadRes(e,n,(function(e,i){e?console.log(e):t.playBGMex(i)}))},i.playBGMex=function(e){if(this._bgmEnable)if(this._bgmSource&&e==this._bgmSource.clip)console.log("same");else{this._bgmSource&&(this._bgmSource.destroy(),this._bgmSource=null);var t=this.bgmSource;(t=this.bgmSource).volume=this._bgmVolume,t.loop=!0,t.clip=e,t.play()}},i.playMusic=function(e,t){var i=this;void 0===t&&(t=!1),null!=e&&this._musicEnable&&c.loadRes(e,n,(function(e,s){e?console.log(e):i.playMusicEx(s,t)}))},i.playMusicEx=function(e,t){if(void 0===t&&(t=!1),this._musicEnable){var i=this.musicSource;i.volume=this._musicVolume,i.loop=t,i.clip=e,i.play()}},i.playEffet=function(t,i){var s=this;if(null!=t&&this._effectEnable){var u=f(t);this._playingEffs[u]||(this._playingEffs[u]=!0,setTimeout((function(){e.inst._playingEffs[u]=!1}),50),c.loadRes(t,n,(function(e,t){e?console.log(e):s.playEffetEx(t,i)})))}},i.playEffetEx=function(e,t){this._effectEnable&&(this.effetSource.loop=!1,this.effetSource.playOneShot(e,t))},i.stopBGM=function(){this.bgmSource.stop()},i.pauseBGM=function(){this.bgmSource.pause()},i.resumeBGM=function(){this._bgmEnable&&this.bgmSource.play()},i.stopMusic=function(){this._musicSource&&(this._musicSource.destroy(),this._musicSource=null)},i.pauseMusic=function(){this.musicSource.pause()},i.resumeMusic=function(){this._musicEnable&&this.musicSource.play()},i.stopEffet=function(){this.effetSource.stop()},i.pauseEffet=function(){this.effetSource.pause()},i.resumeEffet=function(){this._effectEnable&&this.effetSource.play()},t(e,[{key:"bgmSource",get:function(){return this._bgmSource=this._bgmSource||this.createSource("bgmNode__"),this._bgmSource}},{key:"musicSource",get:function(){return this._musicSource=this._musicSource||this.createSource("musicNode__"),this._musicSource}},{key:"effetSource",get:function(){return this._effetSource=this._effetSource||this.createSource("effetNode__"),this._effetSource}},{key:"bgmEnable",get:function(){return this._bgmEnable}},{key:"musicEnable",get:function(){return this._musicEnable}},{key:"effectEnable",get:function(){return this._effectEnable}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}())._inst=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Base64Util.ts",["cc","./Globals.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.isNil}],execute:function(){n._RF.push({},"211e23jU5NCK46zZXDO/9Z8","Base64Util",void 0);t("default",function(){function t(){}return t.arrayBufferToBase64=function(t){for(var n="",e=new Uint8Array(t),r=e.byteLength,i=0;i<r;i++)n+=String.fromCharCode(e[i]);return window.btoa(n)},t.isValidBase64Image=function(t){return!e(t)&&("string"==typeof t&&"data:image"==t.substring(0,10))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimerManager.ts","./UImanager.ts","./EventCenter.ts","./CocosUtil.ts","./CommUtil.ts","./CHandler.ts"],(function(t){var e,s,n,i,o,r,l,a,c,d,u,h;return{setters:[function(t){e=t.inheritsLoose,s=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.sys,r=t.Component},function(t){l=t.default},function(t){a=t.default},function(t){c=t.default},function(t){d=t.default},function(t){u=t.default},function(t){h=t.default}],execute:function(){var _;n._RF.push({},"bbb34GQXwZDh49H4AusVYLi","BaseComp",void 0);var f=i.ccclass;i.property,t("BaseComp",f("BaseComp")(_=function(t){function n(){for(var e,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._nodesMapFlag=!1,e.m_ui={},e.m_dtor_listeners=null,e}e(n,t);var i=n.prototype;return i.listenDestory=function(t,e){if(t){this.m_dtor_listeners||(this.m_dtor_listeners=[]);for(var n,i=s(this.m_dtor_listeners);!(n=i()).done;){var o=n.value;if(o.callback===t&&o.target===e)return}this.m_dtor_listeners.push({callback:t,target:e})}},i.unlistenDestroy=function(t){for(var e=this.m_dtor_listeners.length-1;e>=0;e--)this.m_dtor_listeners[e].target===t&&this.m_dtor_listeners.splice(e,1)},i.onDestroy=function(){if(c.untarget(this),l.removeByTarget(this),this.On_Destroy(),this.m_dtor_listeners){for(var t=0,e=this.m_dtor_listeners.length;t<e;t++)this.m_dtor_listeners[t].callback.call(this.m_dtor_listeners[t].target);this.m_dtor_listeners.length=0,this.m_dtor_listeners=null}a.onViewClose(this.node)},i.On_Destroy=function(){},i.genNodesMap=function(t){void 0===t&&(t=!1),this._nodesMapFlag&&!t||(this._nodesMapFlag=!0,d.traverseNodes(this.node,this.m_ui))},i.setModal=function(t){void 0===t&&(t=!0),d.setModal(this.node,t)},i.AddClickEvent=function(t){var e=this["on_click_"+t.name];e&&d.addClickEvent(t,e,this)},i.RegCloseClick=function(){var t=this,e=d.findNode(this.node,"btn_close");if(e=e||d.findNode(this.node,"btnClose")){var s=this.on_click_btn_close;s?d.addClickEvent(e,s,this):d.addClickEvent(e,(function(){a.playCloseAni(t.node)}),this)}},i.RegClickEvents=function(){for(var t in this.RegCloseClick(),this.m_ui)this.AddClickEvent(this.m_ui[t])},i.leakCheck=function(){"Windows"==o.os&&l.loopSecond(.5,-1,new h(this,(function(){d.isInValid(this.node)&&console.error("该组件未正确调用onDestroy: super.onDestory()",u.getClsName(this))})))},n}(r))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseProcessor.ts",["cc","./NetDefine.ts","./Globals.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./DateUtil.ts","./StringUtil.ts"],(function(t){var n,e,s,i,r,c,h,u;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ConnState},function(t){s=t.GlobalData},function(t){i=t.default},function(t){r=t.default},function(t){c=t.default},function(t){h=t.default},function(t){u=t.default}],execute:function(){n._RF.push({},"3a9b2rphmBHUorWuw+wZIYL","BaseProcessor",void 0);t("default",function(){function t(t,n){this._name="",this._dispatcher=null,this._channel=null,this._paused=!1,this._send_list=[],this._fire_list=[],this._cmds={},this._recvCmds=null,this._nerverPushs={},this._debuging=!0,this._hideDbgCmds={},this._little_endian=!0,this._backgrdConnMs=3e5,this._heatBeatFunc=null,this._sendHooker=null,this._heart_cmd=-1,this._name=t,this._little_endian=n,r.getInstance().listen(i.EnterBackground,this.onEnterBackground,this),r.getInstance().listen(i.EnterForground,this.onEnterForground,this),r.getInstance().listen(i.test_reconnect,this.testReconnect,this)}var n=t.prototype;return n.isLittleEndian=function(){return this._little_endian},n.testReconnect=function(t){c.log("测试断线重连"),this._channel.force_reconnect()},n.onEnterBackground=function(){this.setPaused(!0)},n.onEnterForground=function(t){if(this.setPaused(!1),this._channel)if(t>=this._backgrdConnMs)this._channel.force_reconnect();else{var n=this._channel.getState();n!==e.connectfail&&n!==e.reconnectfail||this._channel.notifyState()}},n.setKeepConnOnBackground=function(t){this._backgrdConnMs=1e3*t},n.setHeartCmd=function(t){this._heart_cmd=t},n.backgroundChecker=function(){return!!(s.isInBackgroud&&(c.purple("length of this._fire_list: ",this._fire_list.length),h.getSysTime()-s.timeOfEnterBackground>=this._backgrdConnMs))&&(c.purple("后台保持连接开关已关闭，断开网络连接"),this._channel.disconnect(),!0)},n.nerverPushCmds=function(t){for(var n in t)this._nerverPushs[t[n]]=!0},n.setDebuging=function(t){this._debuging=t},n.hidePrint=function(t){if(t)for(var n in t)this._hideDbgCmds[t[n]]=!0},n.isPrintCmd=function(t){return this._debuging&&!this._hideDbgCmds[t]},n.setDispatcher=function(t){this._dispatcher=t},n.getDispatcher=function(){return this._dispatcher},n.registCmds=function(t){if(null!=t)for(var n in t)this._cmds[n]=t[n]},n.unregistCmds=function(t){if(null!=t)for(var n in t)this._cmds[n]=null,delete this._cmds[n]},n.registRecvCmds=function(t){if(null!=t)for(var n in this._recvCmds=this._recvCmds||{},t)this._recvCmds[n]=t[n]},n.unregistRecvCmds=function(t){if(null!=t)for(var n in this._recvCmds=this._recvCmds||{},t)this._recvCmds[n]=null,delete this._recvCmds[n]},n.unregistAllCmds=function(){c.log(this._name,"---unregist all cmds---"),this._cmds={}},n.setChannel=function(t){this._channel=t},n.clearSendlist=function(){this._send_list.length=0,this._send_list=[]},n.clearRecvlist=function(){this._fire_list.length=0,this._fire_list=[]},n.lenSendList=function(){return this._send_list.length},n.lenRecvList=function(){return this._fire_list.length},n.setPaused=function(t){this._paused=t,this.flushRecvlist(),this.flushSendlist()},n.isNetHolded=function(t){var n=this._channel.getState();return n==e.connecting||n==e.reconnecting||t!==this._heart_cmd&&this._paused},n.flushRecvlist=function(){if(!(this._paused||this._fire_list.length<=0)){var t=this._fire_list[0];if(this._fire_list.splice(0,1),t){var n=this._cmds[t.cmd].debugName();this._recvCmds[t.cmd]&&(n=this._recvCmds[t.cmd].debugName()),c.blue(u.formatStr("%s [flush recv] %s(%d) remains:%d",this._name,n,t.cmd,this._fire_list.length)),this._dispatcher.fire(t.cmd,t.data)}this.flushRecvlist()}},n.flushSendlist=function(){if(!(this._paused||this._send_list.length<=0)){for(var t=0;t<this._send_list.length;t++){var n=this._send_list[t];c.green(u.formatStr("%s [flush send] %s(%d) bytes:%d",this._name,this._cmds[n.cmd].debugName(),n.cmd,n.buf.length)),this._channel.sendBuff(n.buf)}this._send_list.length=0,this._send_list=[]}},n.addSendHook=function(t){this._sendHooker=t},n.sendMessage=function(t,n){return c.error("子类须重载该方法"),!1},n.onrecvBuff=function(t){c.error("子类须重载该方法")},n.setHeartbeatFunc=function(t,n){this._heatBeatFunc=t},n.sendHeartBeat=function(){this._heatBeatFunc&&this._heatBeatFunc()},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseTimer.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"b456c4bHh5EfaBvFrmT4K3R","BaseTimer",void 0);var s=i("TimerType",function(i){return i[i.frame=1]="frame",i[i.second=2]="second",i}({}));i("BaseTimer",function(){function i(){this._id=void 0,this._interval=void 0,this._callback=void 0,this._remainTimes=void 0,this._totalTimes=void 0,this._type=void 0,this._isLimit=void 0,this._useFix=!1,this._passedTime=0,this._stoped=!1,this._paused=!1}var t=i.prototype;return t.isSame=function(i){return!!this._callback&&this._callback==i},t.reset=function(i,t,s,e,a,n,h){void 0===n&&(n=!1),void 0===h&&(h=!1),this._type=i,this._id=t,this._interval=s,this._callback=a,this._remainTimes=e,this._totalTimes=e,this._passedTime=0,this._stoped=!1,this._paused=!1,this._isLimit=e>0,this._useFix=h,n&&this._callback.invoke()},t.isUseFix=function(){return this._useFix},t.stop=function(){this._stoped=!0,this._callback&&(this._callback.clear(),this._callback=null)},t.pause=function(i){this._paused=i},t.tick=function(i){return!!this._stoped||!this._paused&&(this._type===s.frame?this._passedTime++:this._passedTime+=i,!!(this._passedTime>=this._interval&&(this._passedTime=this._passedTime-this._interval,this._isLimit&&this._remainTimes--,this._callback.invoke(),this._isLimit&&this._remainTimes<=0))&&(this.stop(),!0))},t.getId=function(){return this._id},t.getTarget=function(){return this._callback?this._callback.getTarget():null},t.isStoped=function(){return this._stoped},t.getRemainTimes=function(){return this._remainTimes},t.getTotalTimes=function(){return this._totalTimes},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BestFirstFinder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AStarFinder.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.default}],execute:function(){n._RF.push({},"dce07A3SfhBOp5noDjvwah9","BestFirstFinder",void 0);t("default",function(t){function n(e){var n,i=(n=t.call(this,e)||this).heuristic;return n.heuristic=function(t,e){return 1e6*i(t,e)},n}return e(n,t),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/BiAStarFinder.ts",["cc","./Heuristic.ts","./DiagonalMovement.ts","./Util.ts","./heap.ts"],(function(t){var e,i,n,o,s;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.default},function(t){o=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"2074cJSx5JBPL8KB/4BaShj","BiAStarFinder",void 0);t("default",function(){function t(t){this.allowDiagonal=void 0,this.dontCrossCorners=void 0,this.heuristic=void 0,this.weight=void 0,this.diagonalMovement=void 0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=t.heuristic||i.manhattan:this.heuristic=t.heuristic||i.octile}return t.prototype.findPath=function(t,e,i,n,a){var h,r,d,u,l,c,g,f,p=function(t,e){return t.f-e.f},v=new s(p),m=new s(p),M=a.getNodeAt(t,e),w=a.getNodeAt(i,n),y=this.heuristic,C=this.diagonalMovement,b=this.weight,B=Math.abs,N=Math.SQRT2;for(M.g=0,M.f=0,v.push(M),M.opened=1,w.g=0,w.f=0,m.push(w),w.opened=2;!v.empty()&&!m.empty();){for((h=v.pop()).closed=!0,u=0,l=(r=a.getNeighbors(h,C)).length;u<l;++u)if(!(d=r[u]).closed){if(2===d.opened)return o.biBacktrace(h,d);c=d.x,g=d.y,f=h.g+(c-h.x==0||g-h.y==0?1:N),(!d.opened||f<d.g)&&(d.g=f,d.h=d.h||b*y(B(c-i),B(g-n)),d.f=d.g+d.h,d.parent=h,d.opened?v.updateItem(d):(v.push(d),d.opened=1))}for((h=m.pop()).closed=!0,u=0,l=(r=a.getNeighbors(h,C)).length;u<l;++u)if(!(d=r[u]).closed){if(1===d.opened)return o.biBacktrace(d,h);c=d.x,g=d.y,f=h.g+(c-h.x==0||g-h.y==0?1:N),(!d.opened||f<d.g)&&(d.g=f,d.h=d.h||b*y(B(c-t),B(g-e)),d.f=d.g+d.h,d.parent=h,d.opened?m.updateItem(d):(m.push(d),d.opened=2))}}return[]},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/BiBestFirstFinder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BiAStarFinder.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.default}],execute:function(){i._RF.push({},"9a7a16ojhhCT6paKQT2bYfh","BiBestFirstFinder",void 0);t("default",function(t){function i(e){var i,n=(i=t.call(this,e)||this).heuristic;return i.heuristic=function(t,e){return 1e6*n(t,e)},i}return e(i,t),i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/BiBreadthFirstFinder.ts",["cc","./DiagonalMovement.ts","./Util.ts"],(function(e){var t,o,n;return{setters:[function(e){t=e.cclegacy},function(e){o=e.default},function(e){n=e.default}],execute:function(){t._RF.push({},"ac997WLsqZA04BUf++dY2e8","BiBreadthFirstFinder",void 0);e("default",function(){function e(e){this.allowDiagonal=void 0,this.dontCrossCorners=void 0,this.diagonalMovement=void 0,e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}return e.prototype.findPath=function(e,t,o,i,s){var a,r,l,d,h,c=s.getNodeAt(e,t),f=s.getNodeAt(o,i),g=[],u=[],p=this.diagonalMovement;for(g.push(c),c.opened=!0,c.by=0,u.push(f),f.opened=!0,f.by=1;g.length&&u.length;){for((l=g.shift()).closed=!0,d=0,h=(a=s.getNeighbors(l,p)).length;d<h;++d)if(!(r=a[d]).closed)if(r.opened){if(1===r.by)return n.biBacktrace(l,r)}else g.push(r),r.parent=l,r.opened=!0,r.by=0;for((l=u.shift()).closed=!0,d=0,h=(a=s.getNeighbors(l,p)).length;d<h;++d)if(!(r=a[d]).closed)if(r.opened){if(0===r.by)return n.biBacktrace(r,l)}else u.push(r),r.parent=l,r.opened=!0,r.by=1}return[]},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BiDijkstraFinder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BiAStarFinder.ts"],(function(t){var i,n,e;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"5981dj3BEVLLKq+tglFLthb","BiDijkstraFinder",void 0);t("default",function(t){function n(i){var n;return(n=t.call(this,i)||this).heuristic=function(t,i){return 0},n}return i(n,t),n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UImanager.ts"],(function(o){var t,n,e,i,s,h;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,i=o.Node,s=o.Component},function(o){h=o.default}],execute:function(){var c;n._RF.push({},"f83c4qBygxC57PyfdUpHB/b","BlockComp",void 0);var E=e.ccclass;e.property,o("BlockComp",E("BlockComp")(c=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(t=o.call.apply(o,[this].concat(e))||this).closeWhenClick=!0,t}t(n,o);var e=n.prototype;return e.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_END,this.doBlock,this),this.node.on(i.EventType.TOUCH_MOVE,this.doBlock,this),this.node.on(i.EventType.MOUSE_DOWN,this.doBlock,this),this.node.on(i.EventType.MOUSE_MOVE,this.doBlock,this),this.node.on(i.EventType.MOUSE_UP,this.doBlock,this),this.node.on(i.EventType.MOUSE_ENTER,this.doBlock,this),this.node.on(i.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.on(i.EventType.MOUSE_WHEEL,this.doBlock,this)},e.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(i.EventType.TOUCH_END,this.doBlock,this),this.node.off(i.EventType.TOUCH_MOVE,this.doBlock,this),this.node.off(i.EventType.MOUSE_DOWN,this.doBlock,this),this.node.off(i.EventType.MOUSE_MOVE,this.doBlock,this),this.node.off(i.EventType.MOUSE_UP,this.doBlock,this),this.node.off(i.EventType.MOUSE_ENTER,this.doBlock,this),this.node.off(i.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.off(i.EventType.MOUSE_WHEEL,this.doBlock,this)},e.onTouchStart=function(o){o.propagationStopped=!0,this.closeWhenClick&&h.playCloseAni(this.node)},e.doBlock=function(o){o.propagationStopped=!0},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BreadthFirstFinder.ts",["cc","./DiagonalMovement.ts","./Util.ts"],(function(t){var e,o,n;return{setters:[function(t){e=t.cclegacy},function(t){o=t.default},function(t){n=t.default}],execute:function(){e._RF.push({},"e3be49SKyxBdYHPke4RYCoL","BreadthFirstFinder",void 0);t("default",function(){function t(t){this.allowDiagonal=void 0,this.dontCrossCorners=void 0,this.diagonalMovement=void 0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}return t.prototype.findPath=function(t,e,o,i,s){var a,r,l,d,h,c=[],g=this.diagonalMovement,u=s.getNodeAt(t,e),f=s.getNodeAt(o,i);for(c.push(u),u.opened=!0;c.length;){if((l=c.shift()).closed=!0,l===f)return n.backtrace(f);for(d=0,h=(a=s.getNeighbors(l,g)).length;d<h;++d)(r=a[d]).closed||r.opened||(c.push(r),r.opened=!0,r.parent=l)}return[]},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CHandler.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"2fbd8FPI6JBwK+nHvscKc7M","CHandler",void 0);t("default",function(){function t(t,i){this._fn=void 0,this._thisObj=void 0,this._args=void 0,this._autoClean=!1,this._neverFirst=!1,this._fn=i,this._thisObj=t;for(var s=arguments.length,h=new Array(s>2?s-2:0),n=2;n<s;n++)h[n-2]=arguments[n];this._args=h}var i=t.prototype;return i.neverFirst=function(){return this._neverFirst=!0,this},i.invoke=function(){var t;return t=this._args&&this._args.length>0?this._fn.apply(this._thisObj,this._args):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},i.invodeWithFirst=function(t){return this._neverFirst?this.invoke():(i=this._args&&this._args.length>0?this._fn.apply(this._thisObj,[t].concat(this._args)):this._fn.call(this._thisObj,t),this._autoClean&&this.clear(),i);var i},i.invokeWithExtra=function(){for(var t,i=arguments.length,s=new Array(i),h=0;h<i;h++)s[h]=arguments[h];return t=this._args&&this._args.length>0?s?this._fn.apply(this._thisObj,this._args.concat(s)):this._fn.apply(this._thisObj,this._args):s?this._fn.apply(this._thisObj,s):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},i.clear=function(){this._fn=null,this._thisObj=null,this._args&&(this._args.length=0),this._args=null},i.setAutoClean=function(t){this._autoClean=t},i.getTarget=function(){return this._thisObj},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ChannelMgr.ts",["cc","./WsChannel.ts","./TcpChannel.ts","./NetDefine.ts"],(function(n){var e,t,s,c;return{setters:[function(n){e=n.cclegacy},function(n){t=n.default},function(n){s=n.default},function(n){c=n.ChannelType}],execute:function(){e._RF.push({},"be979YlmHJEXon57P6yZ8b0","ChannelMgr",void 0),n("default",function(){function n(){this._channels={}}n.getInstance=function(){return n._instance||(n._instance=new n),n._instance};var e=n.prototype;return e.getChannel=function(n){return this._channels[n]},e.delChannel=function(n){this._channels[n]&&(this._channels[n].destroy(),this._channels[n]=null)},e.createChannel=function(n,e,a){return this._channels[n]||(e===c.Ws?this._channels[n]=new t(n):e===c.Tcp&&(this._channels[n]=new s(n)),this._channels[n].setProcessor(a),a.setChannel(this._channels[n])),this._channels[n]},e.closeChannel=function(n){var e=this.getChannel(n);e&&e.close()},n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/CocosPool.ts",["cc","./CocosUtil.ts"],(function(t){var o,e,n,c;return{setters:[function(t){o=t.cclegacy,e=t.Tween,n=t.NodePool},function(t){c=t.default}],execute:function(){o._RF.push({},"626e9Fn4ApPKZMv4xxkSIWu","CocosPool",void 0);t("default",function(){function t(t){this._pool=void 0,this._createFunc=void 0,this._createFunc=t,this._pool=new n}var o=t.prototype;return o.newObject=function(){if(this._pool.size()<=0)return this._createFunc();var t=this._pool.get();return e.stopAllByTarget(t),t},o.delObject=function(t){c.isValid(t)&&(e.stopAllByTarget(t),this._pool.put(t))},o.clear=function(){this._pool.clear()},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/CocosUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Globals.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./TimerManager.ts","./AudioManager.ts","./config_ui.ts","./BlockComp.ts","./CpnList.ts","./CpnGridEx.ts","./DateUtil.ts","./CpnGridCell.ts","./CpnListCell.ts"],(function(n){var t,e,o,i,r,a,c,l,s,u,f,d,C,p,g,m,v,h,_,k,y,E,N,S,T,b,z,L,I,U,A;return{setters:[function(n){t=n.createForOfIteratorHelperLoose},function(n){e=n.cclegacy,o=n.game,i=n.isValid,r=n.Node,a=n.UITransform,c=n.Layers,l=n.Label,s=n.BlockInputEvents,u=n.Button,f=n.instantiate,d=n.size,C=n.Prefab,p=n.v3,g=n.Sprite,m=n.color,v=n.UIOpacity},function(n){h=n.isNil,_=n.isEmpty},function(n){k=n.default},function(n){y=n.default},function(n){E=n.default},function(n){N=n.default},function(n){S=n.AudioManager},function(n){T=n.KernelUI},function(n){b=n.BlockComp},function(n){z=n.CpnList},function(n){L=n.CpnGridEx},function(n){I=n.default},function(n){U=n.CpnGridCell},function(n){A=n.CpnListCell}],execute:function(){e._RF.push({},"808cem3ZXREoY4mNdRkrCph","CocosUtil",void 0),n("default",function(){function n(){}return n.initComponent=function(n,t){return n.getComponent(t)?n.getComponent(t):n.addComponent(t)},n.restartGame=function(){y.getInstance().fire(k.Restart),N.removeByTarget(n),o.restart()},n.isValid=function(n){return n&&i(n)},n.isInValid=function(n){return!(n&&i(n))},n.createUInode=function(){var n=new r;return n.getComponent(a)||n.addComponent(a),n.layer=c.Enum.UI_2D,n},n.traverseNodes=function(t,e){if(t&&t.children)for(var o=t.children,i=0;i<o.length;i++)e[o[i].name]=o[i],n.traverseNodes(o[i],e)},n.traverseLabels=function(n,t){if(n){var e=n.getComponentsInChildren(l);for(var o in e)t[e[o].node.name]=e[o]}},n.findNode=function(t,e){if(!t)return null;if(t.name==e)return t;for(var o=t.children,i=o.length-1;i>=0;i--){var r=n.findNode(o[i],e);if(r)return r}return null},n.setModal=function(t,e){t.getComponent(s)||(n.initComponent(t,b).closeWhenClick=e)},n.isPinfanClick=function(){var t=I.getSysTime();return t-n.lastClickTime<100?(E.log("频繁点击"),!0):(n.lastClickTime=t,!1)},n.addClickEvent=function(t,e,o,i,a){if(void 0===a&&(a=1.02),h(t))E.warn("fail addClickEvent as target is nil");else{if(t.getComponent(u)){var c=t.getComponent(u);c.transition==u.Transition.SCALE&&(c.zoomScale=a,c.duration=.06)}else{var l=t.addComponent(u);l.transition=u.Transition.SCALE,l.duration=.06,l.zoomScale=a}var s=function(){n.isPinfanClick()||(null!=i?e.call(o,i):e.call(o),S.inst.playEffet(T.btn_click_audio))};t._click_cb_&&t.off(r.EventType.TOUCH_END,t._click_cb_,o),t._click_cb_=s,t.on(r.EventType.TOUCH_END,s,o)}},n.delClickEvent=function(n,t,e){n._click_cb_&&(n.off(r.EventType.TOUCH_END,n._click_cb_,e),n._click_cb_=null)},n.setBtnEnable=function(n,t){var e=n&&n.getComponent(u);e&&(e.interactable=t)},n.initList=function(t,e,o,i,r,c){var l=n.getTemplateSize(o);c&&(l.width*=c,l.height*=c);var s=t.content.addComponent(z);return s.config(e,t.node),s.setCreateFunc((function(){var t=f(o);if(_(i)){n.initComponent(t,A).setDelegate(r)}else{var e=t.getComponent(i);e||(e=t.addComponent(i))}return c&&t.getComponent(a).setContentSize(l),t}),l),s},n.initGrid=function(t,e,o,i,r,c,l,s){var u=n.getTemplateSize(r);s&&(u.width*=s,u.height*=s);var d=t.content.addComponent(L);return d.config(e,o,i,t.node),d.setCreateFunc((function(){var t=f(r);if(_(c)){n.initComponent(t,U).setDelegate(l)}else{var e=t.getComponent(c);e||(e=t.addComponent(c))}return s&&t.getComponent(a).setContentSize(u),t}),u),d},n.getRichWidth=function(n){if(!n)return 0;var t=n._linesWidth,e=0;if(t)for(var o=0,i=t.length;o<i;o++)t[o]>e&&(e=t[o]);return e},n.getTemplateSize=function(n){if(!n)return null;var t=d(0,0);if(n instanceof C&&n.data)t.width=n.data.getComponent(a).width,t.height=n.data.getComponent(a).height;else{var e=f(n);t.width=e.getComponent(a).contentSize.width,t.height=e.getComponent(a).contentSize.height,e.destroy()}return t},n.convertSpaceAR=function(n,t,e,o){void 0===e&&(e=0),void 0===o&&(o=0);var i=n.getComponent(a).convertToWorldSpaceAR(p(e,o));return t.getComponent(a).convertToNodeSpaceAR(i)},n.setNodePosition=function(n,t,e,o){var i=n.position;h(t)&&(t=i.x),h(e)&&(e=i.y),h(o)&&(o=i.z),n.setPosition(p(t,e,o))},n.addNodePosition=function(n,t,e,o){var i=n.position,r=t&&i.x+t||i.x,a=e&&i.y+e||i.y;n.setPosition(r,a,i.z)},n.setNodeScale=function(n,t){n.setScale(p(t,t,t))},n.setNodeSize=function(n,t,e){n.getComponent(a).setContentSize(d(t,e))},n.setNodeColor=function(n,t,e,o,i){if(n){var r=n.getComponent(g)||n.getComponent(l);if(r){var a=r.color;t=h(t)?a.r:t,e=h(e)?a.g:e,o=h(o)?a.b:o,i=h(i)?a.a:i,r.color=m(t,e,o,i)}}},n.setNodeOpacity=function(t,e){t&&(n.initComponent(t,v).opacity=e)},n.setNodeAlpha=function(n,e){if(n){var o=n.getComponent(g);o&&(o.color=m(o.color.r,o.color.g,o.color.b,e));var i=n.getComponent(l);i&&(i.color=m(i.color.r,i.color.g,i.color.b,e));for(var r,a=t(n.children);!(r=a()).done;){var c=r.value;this.setNodeAlpha(c,e)}}},n.getNodeOpacity=function(n){if(!n)return 0;var t=n.getComponent(g);if(t)return t.color.a;var e=n.getComponent(l);return e?e.color.a:void 0},n.grayNode=function(n,t){if(n)for(var e=n.getComponentsInChildren(g),o=0;o<e.length;++o){var i=e[o];i.grayscale=!!t}},n}()).lastClickTime=0,e._RF.pop()}}}));

System.register("chunks:///_virtual/Collide.ts",["cc","./PhyMath.ts","./PolygonUtil.ts"],(function(t){var i,e,o;return{setters:[function(t){i=t.cclegacy},function(t){e=t.default},function(t){o=t.PolygonUtil}],execute:function(){i._RF.push({},"9b89el/nhZGC51KOvmDcx6U","Collide",void 0);t("default",function(){function t(){this.polygon=void 0,this.pgRotate=void 0,this.size=void 0,this.radius=void 0,this.sat_data={vertices:[],edges:[]}}return t.prototype.genPolygon=function(){for(var t=this.pgRotate,i=0,e=t.length;i<e;i++)this.sat_data.vertices[i]=this.sat_data.vertices[i]||{x:t[i].x,y:t[i].y},this.sat_data.vertices[i].x=t[i].x,this.sat_data.vertices[i].y=t[i].y;return o.polygon(this.sat_data)},t.createBy=function(i){var o,s,a,n,r=new t;for(var c in r.polygon=i,r.pgRotate=e.rotatePoints(0,r.polygon,0,0,!1),i){var h=i[c];(!o||o>h[0])&&(o=h[0]),(!s||s<h[0])&&(s=h[0]),(!a||a>h[1])&&(a=h[1]),(!n||n<h[1])&&(n=h[1])}var u=s&&o&&s-o||0,d=n&&a&&n-a||0;return r.size={width:u,height:d},r.radius=Math.sqrt(u*u+d*d)+20,r},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CommUtil.ts",["cc","./Globals.ts","./MathUtil.ts"],(function(r){var n,e,t;return{setters:[function(r){n=r.cclegacy},function(r){e=r.isNil},function(r){t=r.default}],execute:function(){n._RF.push({},"ae9fea7guNMf4s4qqqqlHgH","CommUtil",void 0),ArrayBuffer.transfer||(ArrayBuffer.transfer=function(r,n){r=Object(r);var e=new ArrayBuffer(n);if(!(r instanceof ArrayBuffer&&e instanceof ArrayBuffer))throw new TypeError("ArrayBuffer.transfer, error: Source and destination must be ArrayBuffer instances");if(!(e.byteLength>=r.byteLength))throw new RangeError("ArrayBuffer.transfer, error: destination has not enough space");return new Uint8Array(e).set(new Uint8Array(r),0),e});r("default",function(){function r(){}return r.safeDelete=function(r){return null==r?null:r.delInstance?(r.delInstance(),null):r.do_dtor?(r.do_dtor(),null):r.node?(r.node.destroy(),null):(r.destroy(),null)},r.getClsName=function(r){return r&&r.constructor?r.constructor.name:""},r.getUUID=function(){if("object"==typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();var r=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random();return r>0?(t=(r+t)%16|0,r=Math.floor(r/16)):(t=(n+t)%16|0,n=Math.floor(n/16)),("x"===e?t:3&t|8).toString(16)}))},r.num00=function(r){return r<10?"0"+r:r.toString()},r.simpleCopy=function(r,n,e){if(null!=n&&null!=r)for(var t in n)n.hasOwnProperty(t)&&(e&&e[t]||(r[t]=n[t]))},r.deepClone=function(r){if(null==r||typeof{}!=typeof r||typeof[]!=typeof r)return r;var n,e=!1;r.length?(n=[],e=!0):(n={},e=!1);for(var t=0,f=Object.keys(r);t<f.length;t++){var o=f[t];if(null==r[o])e?n.push(null):n[o]=null;else{var u="object"==typeof r[o]?this.deepClone(r[o]):r[o];e?n.push(u):n[o]=u}}return n},r.isEqual=function(r,n){if(r===n)return!0;if(typeof r!=typeof n)return!1;if(this.isArray(r))return this.isSameArray(n,r);for(var e in r)if(!this.isEqual(r[e],n[e]))return!1;return!1},r.randomInArr=function(r){return r[t.getRandomInt(0,r.length-1)]},r.addArray=function(r,n){var e=[];if(r)for(var t in r)e.push(r[t]);if(n)for(var t in n)e.push(n[t]);return e},r.appendArray=function(r,n){if(n)for(var e in n)r.push(n[e])},r.minusArray=function(r,n){if(r&&!(r.length<=0)&&n&&!(n.length<=0))for(var e=0;e<n.length;e++){var t=r.indexOf(n[e]);t>=0&&r.splice(t,1)}},r.addArrayItem=function(r,n,e){if(e&&0!=e)if(e>0)for(var t=0;t<e;t++)r.push(n);else for(var f=r.length;f>=0&&!(r[f]==n&&(r.splice(f,1),++e>=0));f--);},r.isSameArray=function(r,n){if(typeof r!=typeof n)return!1;if(r.length!=n.length)return!1;for(var e in r)if(n.indexOf(r[e])<0)return!1;for(var e in n)if(r.indexOf(n[e])<0)return!1;return!0},r.cloneArray=function(r){var n=[];if(e(r))return n;for(var t in r)n.push(r[t]);return n},r.isArray=function(r){return!e(r.length)},r.Uint8Arr2NumArr=function(r){var n=[];if(r)for(var e in r)n.push(r[e]);return n},r.NumArr2Uint8Arr=function(r){if(e(r)||r.length<=0)return null;for(var n=new ArrayBuffer(r.length),t=new DataView(n),f=0;f<r.length;f++)t.setUint8(f,r[f]);return new Uint8Array(t.buffer)},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CompCircle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,l,s,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,l=e.Node,s=e.v3,r=e.UITransform,o=e.Component}],execute:function(){var c;n._RF.push({},"11c4e82ac5FwZSwOOrl7Y2t","CompCircle",void 0);var u=i.ccclass,h=(i.property,Math.PI),a=Math.cos,_=Math.sin;e("CompCircle",u("CompCircle")(c=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this)._selected_index=-1,t._rx=500,t._ry=160,t._cell_list=[],t._node_creator=null,t._selectCb=null,t}t(n,e);var i=n.prototype;return i.addCellItem=function(){var e=this,t=this._node_creator();this.node.addChild(t),this._cell_list.push(t);var n=this.getCellCount()-1;return t.on(l.EventType.TOUCH_END,(function(){e.selectIndex(n,!0)}),this),t},i.setNodeCreator=function(e){this._node_creator=e},i.setSelectCallback=function(e){this._selectCb=e},i.setCircleSize=function(e,t){this._rx=e,this._ry=t},i.selectIndex=function(e,t){if(!(e<0||e>=this.getCellCount())){var n=this._selected_index;this._selected_index=e,t?this.runCircleAni():this.reLayout(),this._selectCb&&this._selectCb(this._selected_index,n)}},i.reLayout=function(){this.unscheduleAllCallbacks();for(var e=this.getCellCount()-1;e>=0;e--){var t=this.getIndexFinalAngle(e),n=this._cell_list[e];n.position=this.getIndexFinalPos(e);var i=this.getScaleByAngle(t);n.setScale(s(i,i,1)),n.getComponent(r).priority=-Math.floor(n.position.y),n._cur_angle=t}},i.getCellCount=function(){return this._cell_list.length},i.getNodeByIndex=function(e){return this._cell_list[e]},i.getSelectedNode=function(){return this._cell_list[this._selected_index]},i.getSelectedIndex=function(){return this._selected_index},i.getPosByAngle=function(e){var t=e*h/180,n=this._rx*a(t),i=this._ry*_(t);return s(n,i)},i.getDistanseByAngle=function(e){var t=this.roundAngle(e),n=270-t;return t>270&&t<=360&&(n=t-270),t>=0&&t<=90&&(n=90+t),n},i.getScaleByAngle=function(e){return 1-this.getDistanseByAngle(e)/640},i.getAlphaByAngle=function(e){return(180-this.getDistanseByAngle(e)/16)/180*255},i.getIndexFinalPos=function(e){var t=this.getIndexFinalAngle(e);return this.getPosByAngle(t)},i.getIndexFinalAngle=function(e){var t=270+360/this.getCellCount()*(e-this._selected_index);return this.roundAngle(t)},i.roundAngle=function(e){return(e%360+360)%360},i.twirl=function(e){for(var t=this.getCellCount()-1;t>=0;t--){var n=this._cell_list[t]._cur_angle+e,i=this._cell_list[t];i.position=this.getPosByAngle(n);var l=this.getScaleByAngle(n);i.setScale(s(l,l,1)),i.getComponent(r).priority=-Math.floor(i.position.y),i._cur_angle=n}},i.getCurHighAngle=function(){return this.roundAngle(this._cell_list[this._selected_index]._cur_angle||0)},i.isLeftSide=function(){var e=this.getCurHighAngle();return e>=90&&e<=270},i.runCircleAni=function(){var e=this;this.unscheduleAllCallbacks(),this.isLeftSide()?this.schedule((function(t){e.isLeftSide()?(e.twirl(12),e.isLeftSide()||e.reLayout()):e.reLayout()}),0):this.schedule((function(t){e.isLeftSide()?e.reLayout():(e.twirl(-12),e.isLeftSide()&&e.reLayout())}),0)},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/CompCircleCD.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,r,e,s;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,r=n._decorator,e=n.ProgressBar,s=n.Component}],execute:function(){var o;i._RF.push({},"cd7938h3GJLbrIluWF07aLk","CompCircleCD",void 0);var a=r.ccclass;r.property,n("CompCircleCD",a("CompCircleCD")(o=function(n){function i(){for(var t,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];return(t=n.call.apply(n,[this].concat(r))||this)._running=!1,t._remainCD=0,t._totalCD=1,t._cdBar=null,t}t(i,n);var r=i.prototype;return r.hideCD=function(){this._running=!1,this.node.active=!1},r.setRemainCD=function(n,t){this._remainCD=t,this._totalCD=n,this._cdBar=this.getComponent(e),this._cdBar.progress=this._remainCD/this._totalCD,this._running=this._remainCD>0,this.node.active=this._running},r.setRunning=function(n){this._running=n},r.update=function(n){this._running&&this._remainCD>0&&(this._remainCD-=n,this._remainCD<0&&(this._remainCD=0),this._cdBar.progress=this._remainCD/this._totalCD)},i}(s))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/CompClickEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResInfo.ts","./LoadHelper.ts"],(function(n){var e,o,t,i,c,s,a,p,l,h;return{setters:[function(n){e=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator,i=n.Node,c=n.UITransform,s=n.v3,a=n.sp,p=n.Component},function(n){l=n.createResInfo},function(n){h=n.default}],execute:function(){var r;o._RF.push({},"d8617TGsQ1FopP+hmV43Rlo","CompClickEffect",void 0);var u=t.ccclass;t.property,n("CompClickEffect",u("CompClickEffect")(r=function(n){function o(){return n.apply(this,arguments)||this}e(o,n);var t=o.prototype;return t.onLoad=function(){this.initSpineClick()},t.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.onTouchBegin=function(n){n.propagationStopped=!1,n.preventSwallow=!0;var e=this.initSpineClick();if(e){e.active=!0;var o=n.getUILocation(),t=this.node.getComponent(c).contentSize;e.setPosition(s(o.x-t.width/2,o.y-t.height/2,0)),e.getComponent(a.Skeleton).setAnimation(0,"animation",!1)}},t.onTouchMove=function(n){n.propagationStopped=!1,n.preventSwallow=!0},t.onTouchEnd=function(n){n.propagationStopped=!1,n.preventSwallow=!0},t.onTouchCancel=function(n){n.propagationStopped=!1,n.preventSwallow=!0},t.initSpineClick=function(){var n=this.node,e="_mouse_click_eff_";if(n.getChildByName(e))return n.getChildByName(e);var o=new i(e);return o.addComponent(a.Skeleton),n.addChild(o),o.active=!0,o.name=e,o.setScale(s(.5,.5,1)),h.loadRes(l("spines/click/dianji",null),a.SkeletonData,(function(n,e){if(n)console.log(n);else if(e){var t=o.getComponent(a.Skeleton);t.skeletonData=e,t.premultipliedAlpha=!1,t.setCompleteListener((function(n){t.node.active=!1})),t.setAnimation(0,"animation",!1)}else console.log("nil res")})),o},o}(p))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/CompColorBlur.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CHandler.ts","./CocosUtil.ts","./TimerManager.ts","./BaseComp.ts"],(function(o){var t,e,r,n,i,l,s;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,r=o._decorator},function(o){n=o.default},function(o){i=o.default},function(o){l=o.default},function(o){s=o.BaseComp}],execute:function(){var a;e._RF.push({},"2895aiDASJGc5YdUB+DltWx","CompColorBlur",void 0);var u=r.ccclass;r.property,o("CompColorBlur",u("CompColorBlur")(a=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var r=e.prototype;return r.blurAlpha=function(o,t,e){(o=Math.floor(o))<1&&(o=1),null==t&&(t=i.getNodeOpacity(this.node));var r=t;i.setNodeAlpha(this.node,r);var s=Math.abs(e-t)/o;e<t&&(s=-s),l.removeByTarget(this),l.loopFrame(1,-1,new n(this,(function(){if(r+=s,s>0&&r>=e||s<0&&r<=e)return r=e,i.setNodeAlpha(this.node,r),void l.removeByTarget(this);i.setNodeAlpha(this.node,r)})))},r.blurColor=function(o,t){},r.onDisable=function(){l.removeByTarget(this)},e}(s))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/CompFrameAni.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosUtil.ts","./ResInfo.ts","./SpriteHelper.ts","./CommUtil.ts"],(function(e){var t,i,r,o,n,a,s,l,c,u,p,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.CCInteger,l=e.Sprite,c=e.Component},function(e){u=e.default},function(e){p=e.createResInfo},function(e){m=e.default},function(e){h=e.default}],execute:function(){var f,d,_,F,v,y,C;n._RF.push({},"38d60/piIBIQrV0tI8tU55q","CompFrameAni",void 0);var b=a.ccclass,g=a.property;e("CompFrameAni",(f=b("CompFrameAni"),d=g(s),_=g(s),f((y=t((v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"loopTimes",y,o(t)),r(t,"finishOp",C,o(t)),t._curFrame=0,t._maxFrame=0,t._respath=void 0,t._bundleName=void 0,t._looped=0,t}i(t,e);var n=t.prototype;return n.setRespath=function(e,t,i){return this._respath=e,this._bundleName=t,this._curFrame=0,this._maxFrame=i,u.initComponent(this.node,l),this},n.play=function(e,t,i){void 0===i&&(i=.03),this.node.active=!0,this._curFrame=0,this.loopTimes=e,this.doPlay(t,i)},n.doPlay=function(e,t){var i=this;void 0===t&&(t=.03);var r=u.initComponent(this.node,l);this.unscheduleAllCallbacks(),this.schedule((function(t){i._curFrame<=i._maxFrame&&(m.setSprite(r,p(i._respath+i._curFrame,i._bundleName)),i._curFrame++),i._curFrame>=i._maxFrame&&(i._looped++,i.loopTimes<=0||i.loopTimes>0&&i._looped<i.loopTimes?i._curFrame=0:(i.unscheduleAllCallbacks(),e&&e.invoke(),1==i.finishOp?i.node.active=!1:h.safeDelete(i)))}),t)},t}(c)).prototype,"loopTimes",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),C=t(v.prototype,"finishOp",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=v))||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/CompJoystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KernelEvent.ts","./EventCenter.ts","./PhyMath.ts","./CocosUtil.ts"],(function(o){var t,i,e,n,s,c,h,d,r,a,p;return{setters:[function(o){t=o.inheritsLoose},function(o){i=o.cclegacy,e=o._decorator,n=o.v3,s=o.UITransform,c=o.Node,h=o.Component},function(o){d=o.default},function(o){r=o.default},function(o){a=o.default},function(o){p=o.default}],execute:function(){var l;i._RF.push({},"72e99XtapxNfo7Omde6xm9u","CompJoystick",void 0);var u=e.ccclass;e.property,o("CompJoystick",u("CompJoystick")(l=function(o){function i(){for(var t,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return(t=o.call.apply(o,[this].concat(e))||this).dotNode=void 0,t.circleNode=void 0,t._originPos=void 0,t._dis=100,t}t(i,o);var e=i.prototype;return e.onLoad=function(){this.dotNode=this.node.getChildByName("dot"),this.circleNode=this.node.getChildByName("circle"),this._originPos=n(this.dotNode.position),this._dis=this.circleNode.getComponent(s).width/2+this.dotNode.getComponent(s).width},e.onEnable=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.onDisable=function(){r.getInstance().fire(d.joystick_stop),this.node.off(c.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.onTouchBegin=function(o){o.propagationStopped=!1,o.preventSwallow=!0;var t=o.getUILocation();this.circleNode.setPosition(t.x,t.y),this.dotNode.setPosition(t.x,t.y)},e.onTouchMove=function(o){o.propagationStopped=!1,o.preventSwallow=!0;var t=this._dis,i=o.getDeltaX(),e=o.getDeltaY();p.addNodePosition(this.dotNode,i,e);var n=this.dotNode.position.x-this.circleNode.position.x,s=this.dotNode.position.y-this.circleNode.position.y,c=a.vec2radian(n,s);if(n*n+s*s>t*t){var h=a.vec2radian(-n,-s),l=this.dotNode.position;this.circleNode.setPosition(l.x+t*Math.cos(h),l.y+t*Math.sin(h))}r.getInstance().fire(d.joystick_move,c)},e.onTouchEnd=function(o){o.propagationStopped=!1,o.preventSwallow=!0,this.dotNode.setPosition(this._originPos),this.circleNode.setPosition(this._originPos),r.getInstance().fire(d.joystick_stop)},e.onTouchCancel=function(o){o.propagationStopped=!1,o.preventSwallow=!0,this.dotNode.setPosition(this._originPos),this.circleNode.setPosition(this._originPos),r.getInstance().fire(d.joystick_stop)},i}(h))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/CompLightRot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,e,s,o,h;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,s=t.UITransform,o=t.v3,h=t.Component}],execute:function(){var a;n._RF.push({},"09831wOVghB3J2pfwlr4h/Z","CompLightRot",void 0);var l=e.ccclass,r=(e.property,200),g=Math.PI/180;t("CompLightRot",l("CompLightRot")(a=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).finalAngle=0,i.isStart=!1,i.speedTime=r,i._direction=!0,i}i(n,t);var e=n.prototype;return e.onLoad=function(){this.setAngle(0)},e.setOpening=function(t){this.node.active=t},e.lightObject=function(t,i){void 0===i&&(i=!0);var n=t.getComponent(s).convertToWorldSpaceAR(o(0,0,0)),e=this.node.getComponent(s).convertToWorldSpaceAR(o(0,0)),h=90+180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI;h=this.roundIn360(h),this.startRotation(h,i)},e.startRotation=function(t,i){void 0===i&&(i=!0),t=this.roundIn360(t),i?t!=this.finalAngle&&(this.speedTime=r,this.isStart?(this.isStart=!1,this.finalAngle=t,this.setAngle(t)):(t<this.node.angle?(this.isStart=!0,this._direction?this.finalAngle=t-360:this.finalAngle=t):t<=this.node.angle+5&&t>=this.node.angle-5?this.toFinish():(this.isStart=!0,this._direction?this.finalAngle=t:this.finalAngle=t-360),this.speedTime=Math.abs(this.node.angle-this.finalAngle)+r)):this.toFinish()},e.update=function(t){this.isStart&&(this._direction?this.node.angle+=t*this.speedTime:this.node.angle-=t*this.speedTime,this.setAngle(this.node.angle),this._direction?this.node.angle>=this.finalAngle&&this.toFinish():this.node.angle<=this.finalAngle&&this.toFinish())},e.toFinish=function(){this.isStart=!1,this.finalAngle=this.roundIn360(this.finalAngle),this.setAngle(this.finalAngle),this.onRotateFinish()},e.onRotateFinish=function(){},e.setAngle=function(t){this.node.angle=t;var i=this.angle2radios(t),n=410*Math.cos(i),e=320*Math.sin(i);this.node.getComponent(s).height=Math.ceil(Math.sqrt(n*n+e*e))},e.angle2radios=function(t){return t*g},e.roundIn360=function(t){return 360==t?360:(t+360)%360},n}(h))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/CompPicNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteHelper.ts","./CocosUtil.ts"],(function(t){var e,i,o,n,r,a,s,c,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,n=t.Layout,r=t.Sprite,a=t.UITransform,s=t.Component},function(t){c=t.default},function(t){u=t.default}],execute:function(){var d;i._RF.push({},"21d79G9lMtNU6KWb67yyUaT","CompPicNumber",void 0);var p=o.ccclass;o.property,t("CompPicNumber",p("CompPicNumber")(d=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._valueNum="",e._picPath="",e._picBundle="",e._firstLay=!0,e}e(i,t);var o=i.prototype;return o.onLoad=function(){this.initLayout()},o.initLayout=function(){if(!this.node.getComponent(n)){var t=this.node.addComponent(n);t.type=n.Type.HORIZONTAL,t.resizeMode=n.ResizeMode.CONTAINER}},o.setStyle=function(t,e){this._picPath=t,this._picBundle=e},o.setString=function(t){this._valueNum=t;var e=t,i=e.length;this.initLayout();for(var o=0;o<i;o++){var s=this.node.children[o];if(!s){var d=(s=u.createUInode()).addComponent(r);d.sizeMode=r.SizeMode.RAW,d.sizeMode=r.SizeMode.TRIMMED,d.type=r.Type.SIMPLE,s.getComponent(a).anchorY=0,this.node.addChild(s)}s.active=!0;var p=void 0;p="."==e[o]?this._picPath+"dot":","==e[o]?this._picPath+"comma":this._picPath+e[o],c.setNodeSprite(s,{respath:p,bundleName:this._picBundle})}for(var h=this.node.children.length-1;h>=i;h--)this.node.children[h].active=!1;if(this._firstLay){var l=this.node.addComponent(n);l&&(this._firstLay=!1,l.updateLayout())}},o.getString=function(){return this._valueNum},i}(s))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/CompRedDot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedDotMgr.ts","./EventCenter.ts"],(function(t){var e,o,n,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component},function(t){c=t.default},function(t){i=t.default}],execute:function(){var s;o._RF.push({},"c1a73FFwuJLB5+PUlZ3tmTU","CompRedDot",void 0);var u=n.ccclass;n.property,t("CompRedDot",u("CompRedDot")(s=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._redId="",e}e(o,t);var n=o.prototype;return n.onDestroy=function(){i.untarget(this)},n.setRedId=function(t){this._redId=t,c.getInstance().registRed(t,this.checkShow,this)},n.checkShow=function(t){this.node.active=t},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/CompRootView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config_ui.ts","./ResInfo.ts","./CommUtil.ts","./ViewDefine.ts","./LoadHelper.ts","./ToastHelper.ts","./logger.ts","./TweenUtil.ts","./CocosUtil.ts","./CompClickEffect.ts"],(function(e){var t,i,n,a,o,l,s,r,c,p,f,u,h,g,d,v,_,w,y,m,C,V,D,k;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,l=e._decorator,s=e.Widget,r=e.Node,c=e.isValid,p=e.UIOpacity,f=e.v3,u=e.tween,h=e.instantiate,g=e.Component},function(e){d=e.KernelUI},function(e){v=e.genResKey},function(e){_=e.default},function(e){w=e.EUILayer},function(e){y=e.default},function(e){m=e.default},function(e){C=e.default},function(e){V=e.default},function(e){D=e.default},function(e){k=e.CompClickEffect}],execute:function(){var S;o._RF.push({},"f96b6sraRlEcbCNGHlXTFKt","CompRootView",void 0);var L=l.ccclass;l.property,e("CompRootView",L("CompRootView")(S=function(e){function o(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._viewsMap=new Map,t._allDialog={},t._uiLayers=[],t._panelStack=[],t._popupStack=[],t._cb=void 0,t}t(o,e);var l=o.prototype;return l.initWidget=function(e){var t=e.getComponent(s)||e.addComponent(s);t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignTop=!0,t.isAlignBottom=!0,t.left=0,t.right=0,t.top=0,t.bottom=0},l.onLoad=function(){this.initWidget(this.node);for(var e=0;e<=w.Loading;e++){var t=new r;this.initWidget(t),this.node.addChild(t),this._uiLayers[e]=t}this._uiLayers[w.Tip].addComponent(k)},l.onDestroy=function(){m.clear(),this._cb&&this._cb()},l.pushPanel=function(e){if(!(this._panelStack.indexOf(e)>=0)){for(var t=this._panelStack.length-1;t>=0;t--){var i=this.getView(this._panelStack[t]);this._panelStack[t]!==e&&(c(i)?i.active=!1:this._panelStack.splice(t,1))}this._panelStack.push(e),console.log("push panel",e," ; ",JSON.stringify(this._panelStack))}},l.popPanel=function(e){var t=this._panelStack.indexOf(e);t>=0&&this._panelStack.splice(t,1);for(var i=this._panelStack.length-1;i>=0;i--){var n=this.getView(this._panelStack[i]);if(c(n)){n.active=!0;break}this._panelStack.splice(i,1)}t>=0&&console.log("pop panel",e," ; ",JSON.stringify(this._panelStack))},l.listenClean=function(e){this._cb=e},l.getLayer=function(e){return this._uiLayers[e]},l.callInitData=function(e,t){var i=e._components;if(i)for(var n in i)i[n].initData&&i[n].initData.apply(i[n],t)},l.showView=function(){var e=n(a().mark((function e(t,i){var n,o,l,s,r=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,o=new Array(n>2?n-2:0),l=2;l<n;l++)o[l-2]=c[l];null==i&&(i=w.Panel),s=v(t),y.loadPrefab(t,(function(e,t){if(!e){var n=r.getView(s);if(!n){n=h(t),C.orange(">>>> showView: ",s,t.name);try{var a=t.name;n.getComponent(a)||n.addComponent(a)}catch(e){console.log(e)}n.parent=r.getLayer(i)}r._viewsMap.set(s,n),i===w.Panel&&r.pushPanel(s),n.active=!0,r.callInitData(n,o),r.playOpenAni(n,i)}}));case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),l.closeView=function(e){var t=v(e),i=this.getView(t);i&&(C.orange(">>>> closeView: ",t,i.name),this._viewsMap.delete(t),this.playCloseAni(i),this.popPanel(t))},l.getWindow=function(e){var t=v(e);return this.getView(t)},l.getView=function(e){var t=this._viewsMap.get(e);return t&&c(t)?t:null},l.onViewClose=function(e){for(var t,n=i(this._viewsMap.entries());!(t=n()).done;){var a=t.value,o=a[0],l=a[1];if(e===l){C.orange(">>>> onViewClose: ",o,l.name),this._viewsMap.delete(o),this.popPanel(o);break}}},l.playOpenAni=function(e,t){if(t==w.Popup){var i=e.getChildByName("bg");D.isValid(i)&&i.getComponent(s)||(D.initComponent(e,p),V.FadeInOpacity(e,.24).start(),D.isValid(i)&&(i.setScale(f(.6,.6,1)),u(i).to(.2,{scale:f(1.06,1.06,1)}).to(.06,{scale:f(1,1,1)}).start()))}},l.playCloseAni=function(e){if(!D.isInValid(e))if(e.parent==this.getLayer(w.Popup)){var t=e.getChildByName("bg");D.isValid(t)&&t.getComponent(s)?_.safeDelete(e):(D.initComponent(e,p),V.FadeOutOpacity(e,.24,null,(function(){_.safeDelete(e)})).start(),D.isValid(t)&&u(t).to(.2,{scale:f(.1,.1,1)}).start())}else _.safeDelete(e)},l.openPanel=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.showView.apply(this,[e,w.Panel].concat(i))},l.openPopup=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.showView.apply(this,[e,w.Popup].concat(i))},l.closeDialog=function(e){_.safeDelete(this._allDialog[e]),this._allDialog[e]=null,delete this._allDialog[e]},l.openDialog=function(e){var t=this,i=e.dlgName;c(this._allDialog[i])?console.log("allready exist: ",i):y.loadPrefab(d.confirm_dialog_path,(function(n,a){if(n)console.log("载入预制资源失败:"+n);else if(c(t)){var o=t._allDialog[i];if(!o||!c(o)){if(!(o=h(a)))return void console.log("实例化预制体失败");t._allDialog[i]=o,t.getLayer(w.Dialog).addChild(o)}t._allDialog[i]=o;var l=o.getComponent("BaseComp");l&&l.initData(e)}}))},o}(g))||S);o._RF.pop()}}}));

System.register("chunks:///_virtual/CompSeqAni.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadHelper.ts","./ResInfo.ts","./CocosUtil.ts","./CommUtil.ts"],(function(e){var t,i,r,s,o,a,n,l,p,u,c,m,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,n=e.SpriteAtlas,l=e.CCInteger,p=e.Sprite,u=e.Component},function(e){c=e.default},function(e){m=e.createResInfo},function(e){h=e.default},function(e){f=e.default}],execute:function(){var _,d,F,y,v,b,g,A,C;o._RF.push({},"19743SNMl9J4Iikr1QBQ+yz","CompSeqAni",void 0);var S=a.ccclass,T=a.property;e("CompSeqAni",(_=S("CompSeqAni"),d=T(n),F=T(l),y=T(l),_((g=t((b=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"sprAtlas",g,s(t)),r(t,"loopTimes",A,s(t)),r(t,"finishOp",C,s(t)),t._curFrame=0,t._totalFrames=0,t._sprFrames=[],t._respath=void 0,t._bundleName=void 0,t._looped=0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.sprAtlas&&(this._sprFrames=this.sprAtlas.getSpriteFrames(),this._totalFrames=this._sprFrames.length,this.play(-1))},o.setRespath=function(e,t){return this._respath=e,this._bundleName=t,this},o.play=function(e,t,i){if(void 0===i&&(i=.03),this._curFrame=0,this.loopTimes=e,this._respath){var r=this;c.loadRes(m(this._respath,this._bundleName),n,(function(e,s){!e&&h.isValid(r)&&(r._sprFrames=s.getSpriteFrames(),r._totalFrames=r._sprFrames.length,r.doPlay(t,i))}))}else this.doPlay(t,i)},o.doPlay=function(e,t){var i=this;void 0===t&&(t=.03);var r=h.initComponent(this.node,p);this.unscheduleAllCallbacks(),this.schedule((function(t){i._curFrame<i._totalFrames&&(r.spriteFrame=i._sprFrames[i._curFrame],i._curFrame++),i._curFrame>=i._totalFrames&&(i._looped++,i.loopTimes<=0||i.loopTimes>0&&i._looped>=i.loopTimes?i._curFrame=0:(i.unscheduleAllCallbacks(),e&&e.invoke(),1==i.finishOp?i.node.active=!1:f.safeDelete(i)))}),t)},t}(u)).prototype,"sprAtlas",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(b.prototype,"loopTimes",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),C=t(b.prototype,"finishOp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/CompTickLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CompPicNumber.ts"],(function(n){var e,t,u,a,i,l,r,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,u=n._decorator,a=n.Label,i=n.RichText,l=n.macro,r=n.Component},function(n){s=n.CompPicNumber}],execute:function(){var c;t._RF.push({},"40123NUQpxAdaQlVwgO6xz4","CompTickLabel",void 0);var o=u.ccclass;u.property,n("CompTickLabel",o("CompTickLabel")(c=function(n){function t(){for(var e,t=arguments.length,u=new Array(t),a=0;a<t;a++)u[a]=arguments[a];return(e=n.call.apply(n,[this].concat(u))||this)._finalValue=0,e._curValue=0,e._running=!1,e._cbValueChange=null,e._formatFunc=void 0,e}e(t,n);var u=t.prototype;return u.setString=function(n){var e=this.node.getComponent(a);if(e)e.string=n;else{var t=this.node.getComponent(i);if(t)t.string=n;else{var u=this.node.getComponent(s);u&&u.setString(n)}}},u.setCallback=function(n){this._cbValueChange=n},u.setFormatFunc=function(n){this._formatFunc=n},u.getCurValue=function(){return this._curValue},u.getFinalValue=function(){return this._finalValue},u.formatCurValue=function(){return this._formatFunc?this._formatFunc(this._curValue)+"":this._curValue+""},u.onValueChange=function(){this.setString(this.formatCurValue()),this._cbValueChange&&this._cbValueChange.invokeWithExtra(this._curValue,this._running)},u.resetValue=function(n){this.unscheduleAllCallbacks(),this._finalValue=n,this._curValue=n,this._running=!1,this.onValueChange()},u.chgValue=function(n,e){var t=this;if(n!==this._finalValue||!this._running)if(0!=n||n!==this._finalValue||n!==this._curValue||this._running){this._running=!0,this._finalValue=n;var u=n-this._curValue,a=e/.02,i=Math.max(.01,Math.abs(Math.round(100*u/a)/100));u<0&&(i=-i),this.unscheduleAllCallbacks(),0!==u?this.schedule((function(){t._curValue=t._curValue+i,u>=0?t._curValue>=t._finalValue&&(t.unscheduleAllCallbacks(),t._curValue=t._finalValue,t._running=!1):t._curValue<=t._finalValue&&(t.unscheduleAllCallbacks(),t._curValue=t._finalValue,t._running=!1),t.onValueChange()}),.02,l.REPEAT_FOREVER,.01):this.resetValue(n)}else this.setString(this.formatCurValue())},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/config_bundles.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var a;e("publicBundles",(function(e){return t[e]||[]})),n._RF.push({},"15b13Q00FpMa7DB+wpAfM+U","config_bundles",void 0);var c=e("BDNames",{general:"general",chat:"chat",hall:"hall",game:"game"}),t=((a={})[c.game]=[c.general],a);n._RF.pop()}}}));

System.register("chunks:///_virtual/config_db.ts",["cc"],(function(i){var n;return{setters:[function(i){n=i.cclegacy}],execute:function(){n._RF.push({},"6842dF56jNJYoHGiM8/R532","config_db",void 0);var c=i("default",(function(){}));c.db_pub="pub",c.orientation="orientation",c.music="music",c.sound="sound",c.shipin="shipin",c.yinpin="yinpin",c.acc_user="acc_user",n._RF.pop()}}}));

System.register("chunks:///_virtual/config_server.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"965fdtrRUxDJYvwKrn8dBX0","config_server",void 0);var r="https://www.baidu.com",a=(e("ServerConfig",{publish:{mainHttpUrl:"https://v1admin.zmmeta.net/",chatServer:"wss://111.229.221.86:9660",loginServer:"wss://121.37.211.227:9950",app_url:r},develop:{mainHttpUrl:"https://testapp.xfx.hk/",chatServer:"ws://192.168.25.73:9660",loginServer:"ws://121.37.211.227:9950",app_url:r},localhost:{mainHttpUrl:"https://testapp.xfx.hk/",chatServer:"ws://localhost:9660",loginServer:"ws://localhost:9760",app_url:r}}.develop),e("ChannelDefine",(function(){})));a.login="login",a.chat="chat",a.game="game",a.leaf="leaf",t._RF.pop()}}}));

System.register("chunks:///_virtual/config_ui.ts",["cc","./ResInfo.ts","./config_bundles.ts"],(function(e){var a,t,i;return{setters:[function(e){a=e.cclegacy},function(e){t=e.createResInfo},function(e){i=e.BDNames}],execute:function(){a._RF.push({},"439aelasUFDnrvcAonJHPp5","config_ui",void 0);e("LaunchOrientation",!1),e("DESIGN_SIZE",{width:500,height:1e3}),e("SHOT_SCREEN",{width:1080,height:1920}),e("LONG_SCREEN",{width:1080,height:2440}),e("SceneConfigs",{Loading:{name:"mainscene",bundleName:""},HallScene:{name:"HallScene",bundleName:""},Game2dScene:{name:"Game2dScene",bundleName:""}});var r=e("KernelUI",(function(){}));r.toast_mid=t("prefabs/ToastMid",null),r.toast_bottom=t("prefabs/ToastBottom",null),r.confirm_dialog_path=t("prefabs/ConfirmDialog",null),r.btn_click_audio=null;e("g_uiConfig",{LoadinView:t("prefabs/LoadingView",null),UIChatMain:t("prefabs/UIChatMain",i.chat),UIChatSub:t("prefabs/UIChatSub",i.chat),CommsPlayer1:t("prefabs/CommsPlayer1",i.general),item_cd_1:t("prefabs/item_cd_1",i.general),item_cd_2:t("prefabs/item_cd_2",i.general),UILogin:t("prefabs/main/UILogin",i.game),UIMainPanel:t("prefabs/main/UIMainPanel",i.game),UIRank:t("prefabs/features/UIRank",i.game),UIFriend:t("prefabs/features/UIFriend",i.game),UIHeros:t("prefabs/features/UIHeros",i.game),UIRule:t("prefabs/features/UIRule",i.game),UIZhaomu:t("prefabs/features/UIZhaomu",i.game),UIBag:t("prefabs/features/UIBag",i.game),UIShop:t("prefabs/features/UIShop",i.game),UIMeng:t("prefabs/features/UIMeng",i.game),UIHeroSelect:t("prefabs/features/UIHeroSelect",i.game),UITzStage:t("prefabs/fight/UITzStage",i.game),UIMatch:t("prefabs/fight/UIMatch",i.game),UIBuzhen:t("prefabs/fight/UIBuzhen",i.game),UITiaozhan:t("prefabs/fight/UITiaozhan",i.game),UIFight:t("prefabs/fight/UIFight",i.game),UIFightResult:t("prefabs/fight/UIFightResult",i.game),cpn_top_area:t("prefabs/compui/cpn_top_area",i.game),cpn_item:t("prefabs/compui/cpn_item",i.game),cpn_hero:t("prefabs/compui/cpn_hero",i.game),cpn_hero_star:t("prefabs/compui/cpn_hero_star",i.game),fight_grid1:t("prefabs/compui/fight_grid1",i.game),fight_grid2:t("prefabs/compui/fight_grid2",i.game),cpn_fight_cell:t("prefabs/compui/cpn_fight_cell",i.game),bullet_atk_1:t("prefabs/compui/bullet_atk_1",i.game),bullet_atk_2:t("prefabs/compui/bullet_atk_2",i.game),bullet_atk_3:t("prefabs/compui/bullet_atk_3",i.game),crush_eff_1:t("prefabs/compui/crush_eff_1",i.game),crush_collect_1:t("prefabs/compui/crush_collect_1",i.game),hero_highlight:t("prefabs/compui/hero_highlight",i.game),hero_hit:t("prefabs/compui/hero_hit",i.game),hp_add:t("prefabs/compui/hp_add",i.game),hp_sub:t("prefabs/compui/hp_sub",i.game),list_shop:t("prefabs/compui/list_shop",i.game),list_rank:t("prefabs/compui/list_rank",i.game)});a._RF.pop()}}}));

System.register("chunks:///_virtual/ConfirmDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CommUtil.ts","./CocosUtil.ts","./BaseComp.ts","./ViewDefine.ts"],(function(t){var i,n,o,e,s,l,a,c,h,r,u;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.v3,s=t.tween,l=t.Label},function(t){a=t.default},function(t){c=t.default},function(t){h=t.BaseComp},function(t){r=t.EDialogMenuId,u=t.EDialogType}],execute:function(){var _;n._RF.push({},"f18f3to4YRKw4p9CjFPNcU0","ConfirmDialog",void 0);var b=o.ccclass;o.property,t("ConfirmDialog",b("ConfirmDialog")(_=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this)._callback=null,i._thisObj=null,i}i(n,t);var o=n.prototype;return o.onLoad=function(){c.traverseNodes(this.node,this.m_ui),c.addClickEvent(this.m_ui.btn_ok,this.onBtnOk,this),c.addClickEvent(this.m_ui.btn_no,this.onBtnNo,this);var t=this.node.getChildByName("bg");t.scale=e(1,1,1),s(t).delay(.1).to(.1,{scale:e(1.08,1.08,1)}).to(.08,{scale:e(1,1,1)}).start()},o.onBtnOk=function(){this._callback&&(this._thisObj?this._callback.call(this._thisObj,r.ok):this._callback(r.ok)),a.safeDelete(this)},o.onBtnNo=function(){this._callback&&(this._thisObj?this._callback.call(this._thisObj,r.cancel):this._callback(r.cancel)),a.safeDelete(this)},o.initData=function(t){if(this._callback=t.callback,this._thisObj=t.thisObj,c.traverseNodes(this.node,this.m_ui),this.m_ui.lb_cont.getComponent(l).string=t.content,t.title&&this.m_ui.lb_title&&(this.m_ui.lb_title.getComponent(l).string=t.title),t.okTxt&&(this.m_ui.lb_ok.getComponent(l).string=t.okTxt),t.cancelTxt&&(this.m_ui.lb_no.getComponent(l).string=t.cancelTxt),t.dlgType==u.ok){this.m_ui.btn_no.active=!1;var i=this.m_ui.btn_ok.position;this.m_ui.btn_ok.setPosition(e(0,i.y,i.z))}},n}(h))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/CpnGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,h,s,o,c,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,h=t.Layout,s=t.ScrollView,o=t.UITransform,c=t.v3,a=t.Component}],execute:function(){var r;e._RF.push({},"4c097QlSyRJEZ5S8SBuyLxN","CpnGrid",void 0);var _=Math.floor,l=Math.ceil,d=t("StableTypeEnum",function(t){return t[t.wid=0]="wid",t[t.hei=1]="hei",t}({})),m=function(t){return t[t.h=0]="h",t[t.v=1]="v",t}(m||{}),p=n.ccclass;n.property,t("CpnGrid",p("CpnGrid")(r=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),h=0;h<e;h++)n[h]=arguments[h];return(i=t.call.apply(t,[this].concat(n))||this).direction=m.v,i._inited=!1,i._stableType=d.wid,i._r=1,i._c=1,i._spaceX=0,i._spaceY=0,i._content=null,i._cellSize=null,i._scrollNode=null,i._minParentY=0,i._maxParentY=0,i._minParentX=0,i._maxParentX=0,i._minSeeableR=-1,i._maxSeeableR=-1,i._minSeeableC=-1,i._maxSeeableC=-1,i._maxRowCount=1,i._maxColCount=1,i}i(e,t);var n=e.prototype;return n.onLoad=function(){this.node.getComponent(h)&&(this.node.removeComponent(h),this.scheduleOnce(function(t){this.doLayout()}.bind(this),0))},n.config=function(t,i,e,n){var o=d.hei;n.getComponent(s).vertical?(o=d.wid,this.direction=m.v):(o=d.hei,this.direction=m.h),this._content=this.node,this._stableType=o,this._r=t,this._c=i,this._spaceX=e,this._spaceY=e,this._scrollNode=n,o==d.wid?(this._c=Math.max(1,i),this._minSeeableC=0,this._maxSeeableC=this._c-1):(this._r=Math.max(1,t),this._minSeeableR=0,this._maxSeeableR=this._r-1),this._content.getComponent(h)&&this._content.removeComponent(h),n&&(this._inited||(this._inited=!0,n.off("scrolling",this.onPosChanged,this),n.on("scrolling",this.onPosChanged,this))),this.doLayout()},n.onPosChanged=function(){if(this._scrollNode&&(this._cellSize||(this.doLayout(),this._cellSize)))if(this._stableType==d.wid){var t=_((this._content.position.y-this._minParentY)/(this._cellSize.height+this._spaceY)),i=t+this._maxRowCount;if(t<0&&(t=0),i>=this._r&&(i=this._r-1),this._minSeeableR!=t||this._maxSeeableR!=i){this._minSeeableR=t,this._maxSeeableR=i;for(var e=0,n=this._content.children.length;e<n;e++){var h=_(e/this._c);this._content.children[e].active=h>=t&&h<=i}}}else{var s=_((this._maxParentX-this._content.position.x)/(this._cellSize.width+this._spaceX)),o=s+this._maxColCount;if(s<0&&(s=0),o>=this._c&&(o=this._c-1),this._minSeeableC!=s||this._maxSeeableC!=o){this._minSeeableC=s,this._maxSeeableC=o;for(e=0,n=this._content.children.length;e<n;e++){var c=_(e/this._r);this._content.children[e].active=c>=s&&c<=o}}}},n.doLayout=function(){if(this._content.children[0]){this._cellSize=this._content.children[0].getComponent(o).contentSize;var t=this._content.getComponent(o),i=this._content.parent.getComponent(o);if(this._stableType==d.wid){var e=this.index2rc(this._content.children.length-1).r;this._r=e+1,t.setContentSize(t.width,this._cellSize.height*(e+1)+this._spaceY*e)}else{var n=this.index2rc(this._content.children.length-1).c;this._c=n+1,t.setContentSize(this._cellSize.width*(n+1)+this._spaceX*n,t.height)}for(var h=0;h<this._content.children.length;h++)this._content.children[h].position=this.index2pos(h);this._minParentY=i.height*i.anchorY-t.height*(1-t.anchorY),this._maxParentY=this._minParentY+t.height-i.height,this._maxParentX=t.width*t.anchorX-i.width*i.anchorX,this._minParentX=i.width*(1-i.anchorX)-t.width*(1-t.anchorX),this._minParentX>this._maxParentX&&(this._minParentX=this._maxParentX),this._stableType==d.wid?(this._maxRowCount=l(i.height/(this._cellSize.height+this._spaceY))+1,this._maxColCount=this._c):(this._maxRowCount=this._r,this._maxColCount=l(i.width/(this._cellSize.width+this._spaceX))+1),this.onPosChanged()}},n.index2pos=function(t){var i=this.index2rc(t),e=c(0,0,0),n=this._content.getComponent(o);return this._stableType==d.wid?(e.x=n.width/this._c*(i.c+.5)-n.width*n.anchorX,e.y=n.height*(1-n.anchorY)-this._cellSize.height*(1-this._content.children[t].getComponent(o).anchorY)-i.r*this._cellSize.height-this._spaceY*i.r):(e.y=n.height*(1-n.anchorY)-n.height/this._r*(i.r+.5),e.x=-n.width*n.anchorX+this._cellSize.width*this._content.children[t].getComponent(o).anchorX+i.c*this._cellSize.width+this._spaceX*i.c),e},n.index2rc=function(t){return this._stableType==d.wid?{r:_(t/this._c),c:t%this._c}:{r:t%this._r,c:_(t/this._r)}},n.rc2index=function(t,i){return this._stableType==d.wid?t*this._c+i:i*this._r+t},e}(a))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/CpnGridCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Component}],execute:function(){var a;n._RF.push({},"e88b0JmzepAg7rSdhh70F7k","CpnGridCell",void 0);var r=i.ccclass;i.property,t("CpnGridCell",r("CpnGridCell")(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._index=0,e._data=null,e._delegate=void 0,e}e(n,t);var i=n.prototype;return i.setIndex=function(t){this._index=t},i.getIndex=function(){return this._index},i.setData=function(t){this._data=t},i.getData=function(){return this._data},i.doInit=function(t){this._delegate&&this._delegate.doInit(this,t)},i.doUpdate=function(t,e,n){this._delegate&&this._delegate.doUpdate(this,t,e,n)},i.onSelect=function(t,e){this._delegate&&this._delegate.onSelect(this,t,e)},i.setDelegate=function(t){this._delegate=t},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/CpnGridEx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CpnGridCell.ts","./CHandler.ts","./Globals.ts","./logger.ts"],(function(t){var e,i,s,n,h,o,a,c,r,_,l,d,m;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,n=t.Layout,h=t.ScrollView,o=t.UITransform,a=t.size,c=t.v3,r=t.Component},function(t){_=t.CpnGridCell},function(t){l=t.default},function(t){d=t.isNil},function(t){m=t.default}],execute:function(){var u;i._RF.push({},"f98c7i27J5P3pUOnFfAojw2","CpnGridEx",void 0);var g=Math.floor,f=Math.ceil,p=function(t){return t[t.h=0]="h",t[t.v=1]="v",t}(p||{}),x=s.ccclass;s.property,t("CpnGridEx",x("CpnGridEx")(u=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._inited=!1,e._direction=p.v,e._r=1,e._c=1,e._spaceX=0,e._spaceY=0,e._cellSize=null,e._content=null,e._scrollNode=null,e._minParentY=0,e._maxParentY=0,e._minParentX=0,e._maxParentX=0,e._minSeeableR=-1,e._maxSeeableR=-1,e._minSeeableC=-1,e._maxSeeableC=-1,e._maxRowCount=1,e._maxColCount=1,e._unseeables=[],e._items=[],e._dataList=null,e._createFunc=null,e._idGettor=null,e._selectedIndex=-1,e._selectListener=null,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this.node.getComponent(n)&&(this.node.removeComponent(n),this.scheduleOnce(function(t){this.doLayout()}.bind(this),0))},s.getScrollView=function(){return this._scrollNode.getComponent(h)},s.config=function(t,e,i,s){s.getComponent(h).vertical?this._direction=p.v:this._direction=p.h,this._content=this.node,this._r=t,this._c=e,this._spaceX=i,this._spaceY=i,this._scrollNode=s,this._direction==p.v?(this.node.getComponent(o).anchorY=1,this._c=Math.max(1,e),this._minSeeableC=0,this._maxSeeableC=this._c-1):(this.node.getComponent(o).anchorX=0,this._r=Math.max(1,t),this._minSeeableR=0,this._maxSeeableR=this._r-1),this._content.getComponent(n)&&this._content.removeComponent(n),this._inited||(this._inited=!0,s.off("scrolling",this.onPosChanged,this),s.on("scrolling",this.onPosChanged,this)),this.doLayout()},s.setCreateFunc=function(t,e){return this._createFunc=t,this._cellSize=a(e.width,e.height),this},s.setSelectListener=function(t,e){return this._selectListener=new l(e,t),this},s.setIdGettor=function(t){return this._idGettor=t,this},s.getDataId=function(t){return this._idGettor?this._idGettor(t):null},s.setData=function(t){var e=this._dataList&&this._dataList.length||0;this._dataList=t;for(var i=this._dataList&&this._dataList.length||0,s=this._minSeeableR;s<=this._maxSeeableR;s++)for(var n=this._minSeeableC;n<=this._maxSeeableC;n++){var o=this.rc2index(s,n);this.onUnseeable(this._items[o],o)}this._direction==p.v?(this._minSeeableR=-1,this._maxSeeableR=-1):(this._minSeeableC=-1,this._maxSeeableC=-1),i<e&&(this._scrollNode.getComponent(h).stopAutoScroll(),this._direction==p.v?this._scrollNode.getComponent(h).scrollToTop():this._scrollNode.getComponent(h).scrollToLeft()),this.doLayout(),i<e&&(this._scrollNode.getComponent(h).stopAutoScroll(),this._direction==p.v?this._scrollNode.getComponent(h).scrollToTop():this._scrollNode.getComponent(h).scrollToLeft()),this.onPosChanged()},s.addData=function(t){d(this._dataList)&&(this._dataList=[]),this._dataList[this._dataList.length]=t,this.doLayout(),this.onPosChanged()},s.updateData=function(t,e){d(this._dataList)&&(this._dataList=[]),this._dataList[t]=e,this.updateItem(t)},s.delData=function(t,e){m.warn("未实现")},s.setSelectedIndex=function(t){this._selectedIndex>=0&&(this.updateItem(this._selectedIndex),this.onSelect(this._items[this._selectedIndex],!1,this._dataList[this._selectedIndex])),this._selectedIndex=t,this._selectedIndex>=0&&(this.updateItem(this._selectedIndex),this.onSelect(this._items[this._selectedIndex],!0,this._dataList[this._selectedIndex]))},s.setSelectedId=function(t){this.setSelectedIndex(this.getDataIndexById(t))},s.getSelectedId=function(){return this._selectedIndex<0?null:this.getDataId(this._dataList[this._selectedIndex])},s.getDataIndexById=function(t){for(var e=this._dataList.length-1;e>=0;e--)if(this.getDataId(this._dataList[e])===t)return e;return-1},s.scrollToSelected=function(){m.warn("未实现")},s.getItemLocgic=function(t){return t.getComponent(_)},s.onSelect=function(t,e,i){t&&(this.getItemLocgic(t).onSelect(this,e),this._selectListener&&this._selectListener.invokeWithExtra(this.getItemLocgic(t),this,e))},s.updateItem=function(t){if(this._items[t]){var e=this._items[t],i=this.getItemLocgic(e);i.setIndex(t),i.setData(this._dataList[t]),i.doUpdate(this,this._dataList[t],t),this.onSelect(e,t==this._selectedIndex,this._dataList[t])}},s.createItem=function(t){if(t<0||d(this._dataList)||t>=this._dataList.length)return!1;var e=!1;return this._items[t]||(e=!0,this._unseeables.length>0?this._items[t]=this._unseeables.splice(this._unseeables.length-1,1)[0]:(this._items[t]=this._createFunc(),this.node.addChild(this._items[t]),this.getItemLocgic(this._items[t]).doInit(this)),this._cellSize&&0!==this._cellSize.width||(this._cellSize=this._cellSize||a(0,0),this._cellSize.width=this._items[t].getComponent(o).width,this._cellSize.height=this._items[t].getComponent(o).height,this.doLayout())),this._items[t].active=!0,this._items[t].position=this.index2pos(t),e},s.onUnseeable=function(t,e){d(t)||(this._unseeables.push(t),t.active=!1),e>=0&&(this._items[e]=null)},s.hideRow=function(t){for(var e=0;e<this._c;e++){var i=this.rc2index(t,e);this.onUnseeable(this._items[i],i)}},s.hideCol=function(t){for(var e=0;e<this._r;e++){var i=this.rc2index(e,t);this.onUnseeable(this._items[i],i)}},s.onPosChanged=function(){if(this._scrollNode&&this._cellSize)if(this._direction==p.v){var t=g((this._content.position.y-this._minParentY)/(this._cellSize.height+this._spaceY));t<0&&(t=0);var e=t+this._maxRowCount;if(e>=this._r&&(e=this._r-1),this._minSeeableR!=t||this._maxSeeableR!=e){for(var i=this._minSeeableR;i<t;i++)this.hideRow(i);for(var s=e+1;s<=this._maxSeeableR;s++)this.hideRow(s);this._minSeeableR=t,this._maxSeeableR=e;for(var n=t;n<=e;n++)for(var h=0;h<this._c;h++){var o=this.rc2index(n,h);this.createItem(o)&&this.updateItem(o)}}}else{var a=g((this._maxParentX-this._content.position.x)/(this._cellSize.width+this._spaceX));a<0&&(a=0);var c=a+this._maxColCount;if(c>=this._c&&(c=this._c-1),this._minSeeableC!=a||this._maxSeeableC!=c){for(var r=this._minSeeableC;r<a;r++)this.hideCol(r);for(var _=c+1;_<=this._maxSeeableC;_++)this.hideCol(_);this._minSeeableC=a,this._maxSeeableC=c;for(n=0;n<this._r;n++)for(h=a;h<=c;h++){var l=this.rc2index(n,h);this.createItem(l)&&this.updateItem(l)}}}},s.doLayout=function(){if(this._cellSize){var t=this._dataList&&this._dataList.length||0,e=this._content.getComponent(o),i=this._content.parent.getComponent(o);if(this._direction==p.v){var s=this.index2rc(t-1).r;this._r=s+1,e.setContentSize(e.width,this._cellSize.height*(s+1)+this._spaceY*s)}else{var n=this.index2rc(t-1).c;this._c=n+1,e.setContentSize(this._cellSize.width*(n+1)+this._spaceX*n,e.height)}for(var h=0;h<t;h++)this._items[h]&&(this._items[h].position=this.index2pos(h));this._minParentY=i.height*(1-i.anchorY)-e.height*(1-e.anchorY),this._maxParentY=this._minParentY+e.height-i.height,this._maxParentX=e.width*e.anchorX-i.width*i.anchorX,this._minParentX=i.width*(1-i.anchorX)-e.width*(1-e.anchorX),this._minParentX>this._maxParentX&&(this._minParentX=this._maxParentX),this._direction==p.v?(this._maxRowCount=f(i.height/(this._cellSize.height+this._spaceY))+1,this._maxColCount=this._c):(this._maxRowCount=this._r,this._maxColCount=f(i.width/(this._cellSize.width+this._spaceX))+1),this.onPosChanged()}},s.index2pos=function(t){var e=this.index2rc(t),i=c(0,0,0),s=this._content.getComponent(o);return this._direction==p.v?(i.x=s.width/this._c*(e.c+.5)-s.width*s.anchorX,i.y=s.height*(1-s.anchorY)-this._cellSize.height*(1-this._items[t].getComponent(o).anchorY)-e.r*this._cellSize.height-this._spaceY*e.r):(i.y=s.height*(1-s.anchorY)-s.height/this._r*(e.r+.5),i.x=-s.width*s.anchorX+this._cellSize.width*this._items[t].getComponent(o).anchorX+e.c*this._cellSize.width+this._spaceX*e.c),i},s.rc2index=function(t,e){return this._direction==p.v?t*this._c+e:e*this._r+t},s.index2rc=function(t){return this._direction==p.v?{r:g(t/this._c),c:t%this._c}:{r:t%this._r,c:g(t/this._r)}},i}(r))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/CpnInnerScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Node,s=t.Component}],execute:function(){var h;o._RF.push({},"b63aetG9fZGzpDPRV/VtGBT","CpnInnerScroll",void 0);var c=e.ccclass;e.property,t("CpnInnerScroll",c("CpnInnerScroll")(h=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchEvt,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchEvt,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEvt,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEvt,this)},e.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchEvt,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchEvt,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEvt,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchEvt,this)},e.onTouchEvt=function(t){t.propagationStopped=!1,t.preventSwallow=!1},o}(s))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/CpnList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CHandler.ts","./Globals.ts","./logger.ts","./CpnListCell.ts"],(function(t){var e,i,s,n,o,h,a,c,d,l,r,_,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,n=t.Layout,o=t.ScrollView,h=t.UITransform,a=t.v3,c=t.v2,d=t.Component},function(t){l=t.default},function(t){r=t.isNil},function(t){_=t.default},function(t){u=t.CpnListCell}],execute:function(){var p;i._RF.push({},"95b7fxo8sRNK6vBEd/k+I70","CpnList",void 0);var m=Math.floor,f=Math.ceil,g=function(t){return t[t.h=0]="h",t[t.v=1]="v",t}(g||{}),L=s.ccclass;s.property,t("CpnList",L("CpnList")(p=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._direction=g.v,e._itemW=0,e._itemH=0,e._spaceX=0,e._spaceY=0,e._selectedIndex=-1,e._selectListener=null,e._preTop=-1,e._preBottom=-1,e._unseeables=[],e._items=[],e._dataList=null,e._createFunc=null,e._idGettor=null,e._scrollNode=null,e._selectChecker=null,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this.node.getComponent(n)&&this.node.removeComponent(n)},s.getScrollView=function(){return this._scrollNode.getComponent(o)},s.config=function(t,e){return this._spaceX=t,this._spaceY=t,this._scrollNode=e,this.node.getComponent(n)&&(this.node.removeComponent(n),this.scheduleOnce(function(t){this.fixSize(),this.onPosChanged()}.bind(this),0)),this._scrollNode.getComponent(o).vertical?(this._direction=g.v,this.node.getComponent(h).anchorY=1,this.node.parent.getComponent(h).anchorY=1,this._scrollNode.getComponent(o).stopAutoScroll()):(this._direction=g.h,this.node.getComponent(h).anchorX=0,this.node.parent.getComponent(h).anchorX=0,this._scrollNode.getComponent(o).stopAutoScroll()),e.off("scrolling",this.onPosChanged,this),e.on("scrolling",this.onPosChanged,this),this},s.setCreateFunc=function(t,e){return this._createFunc=t,e&&(this._itemW=e.width,this._itemH=e.height),this},s.setSelectListener=function(t,e){return this._selectListener=new l(e,t),this},s.setIdGettor=function(t){return this._idGettor=t,this},s.getDataId=function(t){return this._idGettor?this._idGettor(t):null},s.dataLen=function(){return this._dataList&&this._dataList.length||0},s.setData=function(t){var e=this._dataList&&this._dataList.length||0;this._dataList=t;for(var i=this._dataList&&this._dataList.length||0,s=this._preTop;s<=this._preBottom;s++)this.onUnseeable(this._items[s],s);if(this._preTop=-1,this._preBottom=-1,i<e)if(this._scrollNode.getComponent(o).stopAutoScroll(),this._direction==g.v){var n=this.node.position;this.node.setPosition(a(n.x,0))}else{var h=this.node.position;this.node.setPosition(a(0,h.y))}if(this.fixSize(),i<e)if(this._scrollNode.getComponent(o).stopAutoScroll(),this._direction==g.v){var c=this.node.position;this.node.setPosition(a(c.x,0))}else{var d=this.node.position;this.node.setPosition(a(0,d.y))}this.onPosChanged()},s.addData=function(t){r(this._dataList)&&(this._dataList=[]),this._dataList[this._dataList.length]=t,this.fixSize(),this.onPosChanged()},s.updateData=function(t,e){r(this._dataList)&&(this._dataList=[]),this._dataList[t]=e,this.updateItem(t)},s.delData=function(t,e){void 0===e&&(e=-1);for(var i=!1,s=this._dataList.length-1;s>=0&&(!t(this._dataList[s])||(i=!0,this._dataList.splice(s,1),this._items[s]&&this.onUnseeable(this._items[s],s),this._selectedIndex==s&&(this._selectedIndex++,this._selectedIndex>=this._dataList.length&&(this._selectedIndex=this._dataList.length-1)),0!==--e));s--);i&&this.setData(this._dataList)},s.setSelectChecker=function(t){this._selectChecker=t},s.canSelect=function(t){return t<0||!(this._selectChecker&&!this._selectChecker(this._dataList[t]))},s.setSelectedIndex=function(t){this.canSelect(t)&&(this._selectedIndex>=0&&this.onSelect(this._items[this._selectedIndex],!1,this._dataList[this._selectedIndex]),this._selectedIndex=t,this._selectedIndex>=0&&this.onSelect(this._items[this._selectedIndex],!0,this._dataList[this._selectedIndex]))},s.setSelectedId=function(t){this.setSelectedIndex(this.getDataIndexById(t))},s.getSelectedId=function(){return this._selectedIndex<0?null:this.getDataId(this._dataList[this._selectedIndex])},s.getSelectedIndex=function(){return this._selectedIndex},s.getDataIndexById=function(t){for(var e=this._dataList.length-1;e>=0;e--)if(this.getDataId(this._dataList[e])===t)return e;return-1},s.scrollToSelected=function(){var t=this;this._direction==g.v?this.scheduleOnce((function(){if(!(t._selectedIndex<0)){t._scrollNode.getComponent(o).stopAutoScroll();var e=-t.calItemPos(t._selectedIndex)-t._itemH/2;t._scrollNode.getComponent(o).scrollToOffset(c(0,e)),t.setData(t._dataList)}}),.03):this.scheduleOnce((function(){if(!(t._selectedIndex<0)){t._scrollNode.getComponent(o).stopAutoScroll();var e=-t.calItemPos(t._selectedIndex)+t._itemH/2;t._scrollNode.getComponent(o).scrollToOffset(c(e,0)),t.setData(t._dataList)}}),.03)},s.getItemLocgic=function(t){return t.getComponent(u)},s.onSelect=function(t,e,i){t&&(this.getItemLocgic(t).onSelect(this,e),this._selectListener&&this._selectListener.invokeWithExtra(this.getItemLocgic(t),this,e))},s.updateItem=function(t){if(this._items[t]){var e=this._items[t],i=this.getItemLocgic(e);i.setIndex(t),i.setData(this._dataList[t]),i.doUpdate(this,this._dataList[t],t),this.onSelect(e,t==this._selectedIndex&&this.canSelect(t),this._dataList[t])}},s.createItem=function(t){if(t<0||r(this._dataList)||t>=this._dataList.length)return _.log("createItem fial:",t,this._dataList&&this._dataList.length),!1;var e=!1;if(this._items[t]||(e=!0,this._unseeables.length>0?this._items[t]=this._unseeables.splice(this._unseeables.length-1,1)[0]:(this._items[t]=this._createFunc(),this.node.addChild(this._items[t]),this.getItemLocgic(this._items[t]).doInit(this)),0===this._itemH&&(this._itemW=this._items[t].getComponent(h).width,this._itemH=this._items[t].getComponent(h).height,this.fixSize())),this._items[t].active=!0,this._direction==g.v){var i=this._items[t].position;this._items[t].setPosition(a(i.x,this.calItemPos(t)))}else{var s=this._items[t].position;this._items[t].setPosition(a(this.calItemPos(t),s.y))}return e},s.onUnseeable=function(t,e){r(t)||(this._unseeables.push(t),t.active=!1),e>=0&&(this._items[e]=null)},s.onPosChanged=function(){var t=this.getMinIndex(),e=t+this.getSeeableCount(),i=this._dataList&&this._dataList.length||0;if(e>=i&&(e=i-1),this._preTop!=t||this._preBottom!=e){for(var s=this._preTop;s<t;s++)this.onUnseeable(this._items[s],s);for(var n=e+1;n<=this._preBottom;n++)this.onUnseeable(this._items[n],n);this._preTop=t,this._preBottom=e;for(var o=t;o<=e;o++)this.createItem(o)&&this.updateItem(o)}},s.calItemPos=function(t){return this._direction==g.v?-this._itemH/2-t*(this._itemH+this._spaceY):this._itemW/2+t*(this._itemW+this._spaceX)},s.getMinIndex=function(){var t;return this._direction==g.v?((t=this.node.position.y/(this._itemH+this._spaceY))<0&&(t=0),m(t)):((t=-this.node.position.x/(this._itemW+this._spaceX))<0&&(t=0),m(t))},s.getSeeableCount=function(){return this._direction==g.v?f(this.node.parent.getComponent(h).height/(this._itemH+this._spaceY))+1:f(this.node.parent.getComponent(h).width/(this._itemW+this._spaceX))+1},s.fixSize=function(){var t=this._dataList&&this._dataList.length||0;if(this._direction==g.v){var e=this._itemH*t+(t-1)*this._spaceY;this.node.getComponent(h).height=Math.max(e,0)}else{var i=this._itemW*t+(t-1)*this._spaceX;this.node.getComponent(h).width=Math.max(i,0)}},i}(d))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/CpnListCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Component}],execute:function(){var a;n._RF.push({},"a66b1b6pupDmYnvBi3NwYGL","CpnListCell",void 0);var s=i.ccclass;i.property,t("CpnListCell",s("CpnListCell")(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._index=0,e._data=null,e._delegate=void 0,e}e(n,t);var i=n.prototype;return i.setIndex=function(t){this._index=t},i.getIndex=function(){return this._index},i.setData=function(t){this._data=t},i.getData=function(){return this._data},i.doInit=function(t){this._delegate&&this._delegate.doInit(this,t)},i.doUpdate=function(t,e,n){this._delegate&&this._delegate.doUpdate(this,t,e,n)},i.onSelect=function(t,e){this._delegate&&this._delegate.onSelect(this,t,e)},i.setDelegate=function(t){this._delegate=t},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/CpnMap2d.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KernelEvent.ts","./EventCenter.ts","./CommUtil.ts","./CocosUtil.ts","./LoadHelper.ts","./ResInfo.ts","./SpriteHelper.ts","./CocosPool.ts","./CpnMapLabel.ts","./BaseComp.ts","./SceneManager.ts"],(function(t){var e,i,n,o,a,s,h,r,l,c,d,_,u,p,f,C,m,b,y,g,L,M;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.UITransform,a=t.Sprite,s=t.macro,h=t.v3,r=t.js,l=t.JsonAsset,c=t.size,d=t.Component},function(t){_=t.default},function(t){u=t.default},function(t){p=t.default},function(t){f=t.default},function(t){C=t.default},function(t){m=t.createResInfo},function(t){b=t.default},function(t){y=t.default},function(t){g=t.CpnMapLabel},function(t){L=t.BaseComp},function(t){M=t.default}],execute:function(){var v;i._RF.push({},"492e8XsQQRI/7D1FD4xZfYj","CpnMap2d",void 0);for(var I=n.ccclass,P=(n.property,[]),x=0;x<32;x++){P[x]=[];for(var j=0;j<32;j++)P[x][j]=x+"_"+j}var B=function(){this.tile_width=void 0,this.tile_height=void 0,this.row_count=void 0,this.col_count=void 0,this.map_width=void 0,this.map_height=void 0};t("CpnMap2d",I("CpnMap2d")(v=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._mapId=0,e._bundle="",e._r0=-1,e._c0=-1,e._r1=-1,e._c1=-1,e._xCenter=.01,e._yCenter=.01,e._seeable={x0:0,y0:0,x1:0,y1:0},e._iMinCameraX=0,e._iMinCameraY=0,e._iMaxCameraX=0,e._iMaxCameraY=0,e._bCameraLocked=!1,e._visibleFlag=!1,e._ddFlag=.01,e.tMapInfo=void 0,e.tMapBlockCache={},e.tCurBlocks={},e._map_index_2_path={},e.tileLayer=void 0,e.objLayer=void 0,e.labelLayer=void 0,e.tilePool=void 0,e._focusNode=void 0,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this.node.getComponent(o).anchorX=0,this.node.getComponent(o).anchorY=0,this.initLayers(),this.onScreenSize(),u.getInstance().listen(_.e_screen_size,this.onScreenSize,this),u.getInstance().listen(_.e_map_addobject,this.onAddObject,this),u.getInstance().listen(_.e_map_delobject,this.onDelObject,this)},n.onDestroy=function(){this.focusNode(null),u.untarget(this),this.tilePool&&this.tilePool.clear(),console.log("=============> on map destroy")},n.initLayers=function(){this.tilePool||(this.tilePool=new y((function(){var t=f.createUInode();return t.getComponent(o).anchorX=0,t.getComponent(o).anchorY=0,t.addComponent(a),t}))),this.tileLayer||(this.tileLayer=f.createUInode(),this.node.addChild(this.tileLayer),this.tileLayer.getComponent(o).anchorX=0,this.tileLayer.getComponent(o).anchorY=0),this.objLayer||(this.objLayer=f.createUInode(),this.node.addChild(this.objLayer),this.objLayer.getComponent(o).anchorX=0,this.objLayer.getComponent(o).anchorY=0),this.labelLayer||(this.labelLayer=f.createUInode(),this.node.addChild(this.labelLayer),this.labelLayer.getComponent(o).anchorX=0,this.labelLayer.getComponent(o).anchorY=0)},n.fix2LabelLayer=function(t){t.getComponent(g)&&t.getComponent(g).setLabelLayer(this.labelLayer)},n.onAddObject=function(t,e){t.parent=this.objLayer,this.fix2LabelLayer(t),e&&e.pos&&t.setPosition(e.pos)},n.onDelObject=function(t){p.safeDelete(t)},n.getObjLayer=function(){return this.objLayer},n.getMapId=function(){return this._mapId},n.getBundle=function(){return this._bundle},n.getSeeableArea=function(){return this._seeable},n.addObject=function(t){f.isInValid(t)||this.objLayer.addChild(t)},n.focusNode=function(t){var e=this;t?(this._focusNode=t,f.initComponent(t,L).listenDestory((function(){e._focusNode=null}),this),this.schedule((function(){var t=f.convertSpaceAR(e._focusNode,e.objLayer);e.setCameraPos(t.x,t.y)}),.016,s.REPEAT_FOREVER,.02)):(this.unscheduleAllCallbacks(),this._focusNode&&t.getComponent(L).unlistenDestroy(this),this._focusNode=null)},n.setCameraPos=function(t,e){var i=this;this.tMapInfo?(this.initLayers(),this.calSeeableArea(t,e)&&(this.tileLayer.setPosition(h(-this._seeable.x0,-this._seeable.y0,0)),this.objLayer.setPosition(h(-this._seeable.x0,-this._seeable.y0,0)),this.updateCurBlocks(),u.getInstance().fire(_.e_map_seeable,this._seeable))):this.scheduleOnce((function(){i.setCameraPos(t,e)}),.05)},n.moveCamera=function(t,e){this.setCameraPos(this._xCenter-t,this._yCenter-e)},n.setMapInfo=function(t,e){var i=this;this._mapId=t,this._bundle=e,this.initLayers(),this._map_index_2_path={};for(var n=0;n<32;n++)for(var o=0;o<32;o++){var a=P[n][o],s=m(r.formatStr("maps/image/%d/%s",this._mapId,a),this._bundle);this._map_index_2_path[a]=s}this.scheduleOnce((function(){i.startLoad()}),.03)},n.startLoad=function(){var t=this;C.loadRes({respath:"maps/header/"+this._mapId,bundleName:this._bundle},l,(function(e,i){if(!f.isInValid(t))if(e)console.error(e);else{for(var n in t.tMapInfo=new B,i.json)t.tMapInfo[n]=i.json[n];t.onLoadFinish()}}))},n.onLoadFinish=function(){var t=c(this.tMapInfo.map_width,this.tMapInfo.map_height);this.objLayer.getComponent(o).setContentSize(t),this.tileLayer.getComponent(o).setContentSize(t),this.limitCameraPos(),this.loadPathFinder(),u.getInstance().fire(_.e_map_ready)},n.limitCameraPos=function(){var t=this.node;this._iMinCameraX=t.getComponent(o).width/2,this._iMinCameraY=t.getComponent(o).height/2,this.tMapInfo&&(this._iMaxCameraX=this.tMapInfo.map_width-t.getComponent(o).width/2-1,this._iMaxCameraY=this.tMapInfo.map_height-t.getComponent(o).height/2-1)},n.onScreenSize=function(){var t=this;this.scheduleOnce((function(){t._ddFlag=-t._ddFlag,t.limitCameraPos(),t.setCameraPos(t._xCenter+t._ddFlag,t._yCenter+t._ddFlag)}),.03)},n.loadPathFinder=function(){},n.LoadBlockSync=function(t,e){var i=P[t][e];if(!this.tMapBlockCache[i]){this.tMapBlockCache[i]=this.tilePool.newObject(),b.setNodeSprite(this.tMapBlockCache[i],this.getMapBlockPath(t,e)),this.tileLayer.addChild(this.tMapBlockCache[i]);var n=this.Tile_2_WorldPos(t,e);this.tMapBlockCache[i].setPosition(n[0],n[1])}},n.UnloadBlockSync=function(t){this.tMapBlockCache[t]&&(this.tilePool.delObject(this.tMapBlockCache[t]),this.tMapBlockCache[t]=null)},n.calSeeableArea=function(t,e){return(t!=this._xCenter||e!=this._yCenter)&&(t=this.limitNum(t,this._iMinCameraX,this._iMaxCameraX),e=this.limitNum(e,this._iMinCameraY,this._iMaxCameraY),this._xCenter=t,this._yCenter=e,this._seeable.x0=t-this.node.getComponent(o).width/2,this._seeable.y0=e-this.node.getComponent(o).height/2,this._seeable.x1=this._seeable.x0+this.node.getComponent(o).width,this._seeable.y1=this._seeable.y0+this.node.getComponent(o).height,!0)},n.updateCurBlocks=function(){var t=this.WorldPos_2_Tile(this._seeable.x0,this._seeable.y0),e=this.WorldPos_2_Tile(this._seeable.x1,this._seeable.y1),i=t[0],n=t[1],o=e[0],a=e[1];if(this._r0>i||this._r1<o||this._c0>n||this._c1<a){if((i-=1)<0&&(i=0),(n-=1)<0&&(n=0),(o+=1)>this.tMapInfo.row_count-1&&(o=this.tMapInfo.row_count-1),(a+=1)>this.tMapInfo.col_count-1&&(a=this.tMapInfo.col_count-1),this._r0=i,this._r1=o,this._c0=n,this._c1=a,M.isSwitching())return;this._visibleFlag=!this._visibleFlag;for(var s=this._visibleFlag,h=this.tCurBlocks,r=i;r<=o;r++)for(var l=n;l<=a;l++)this.LoadBlockSync(r,l),h[P[r][l]]=s;for(var c in h)h[c]!==s&&(h[c]=null,this.UnloadBlockSync(c))}},n.limitNum=function(t,e,i){return t>i&&(t=i),t<e&&(t=e),t},n.getMapBlockPath=function(t,e){return this._map_index_2_path[P[t][e]]},n.WorldPos_2_Tile=function(t,e){return[Math.floor(e/this.tMapInfo.tile_height),Math.floor(t/this.tMapInfo.tile_width)]},n.Tile_2_WorldPos=function(t,e){return[e*this.tMapInfo.tile_width,t*this.tMapInfo.tile_height]},i}(d))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/CpnMapLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosUtil.ts"],(function(e){var t,o,n,a,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,a=e.Label,c=e.Component},function(e){r=e.default}],execute:function(){var i;o._RF.push({},"50da9uhFFNL7Id4BuGIwGcR","CpnMapLabel",void 0);var l=n.ccclass;n.property,e("CpnMapLabel",l("CpnMapLabel")(i=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this)._labNode=void 0,t}t(o,e);var n=o.prototype;return n.setLabelNode=function(e){e&&e.getComponent(a)&&(e.getComponent(a).cacheMode!=a.CacheMode.BITMAP&&(this._labNode=e))},n.setLabelLayer=function(e){var t=this;this._labNode&&e&&(this._labNode.parent=e,this.schedule((function(){if(t._labNode.active){var o=r.convertSpaceAR(t.node,e);t._labNode.setPosition(o.x,o.y)}}),.05))},o}(c))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/CpnMapTouch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CpnMap2d.ts"],(function(o){var n,e,t,i,p,h;return{setters:[function(o){n=o.inheritsLoose},function(o){e=o.cclegacy,t=o._decorator,i=o.Node,p=o.Component},function(o){h=o.CpnMap2d}],execute:function(){var c;e._RF.push({},"9d492ULI5NAyaiQVqqKlcHi","CpnMapTouch",void 0);var s=t.ccclass;t.property,o("CpnMapTouch",s("CpnMapTouch")(c=function(o){function e(){for(var n,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(n=o.call.apply(o,[this].concat(t))||this)._moveAble=!0,n}n(e,o);var t=e.prototype;return t.setMoveAble=function(o){this._moveAble=o},t.isMoveAble=function(){return this._moveAble},t.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.onTouchBegin=function(o){o.propagationStopped=!1,o.preventSwallow=!0},t.onTouchMove=function(o){(o.propagationStopped=!1,o.preventSwallow=!0,this._moveAble)&&this.node.getComponent(h).moveCamera(o.getDeltaX(),o.getDeltaY())},t.onTouchEnd=function(o){o.propagationStopped=!1,o.preventSwallow=!0},t.onTouchCancel=function(o){o.propagationStopped=!1,o.preventSwallow=!0},e}(p))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/CpnRemoteSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteHelper.ts","./EventCenter.ts","./KernelEvent.ts"],(function(e){var t,n,i,o,r,s,h,a,p,l,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.UITransform,r=e.size,s=e.SpriteFrame,h=e.Sprite,a=e.Component},function(e){p=e.default},function(e){l=e.default},function(e){c=e.default}],execute:function(){var u;n._RF.push({},"c1208UipghIepM9LwNG72rd","CpnRemoteSprite",void 0);var f=i.ccclass;i.property,e("default",f("CpnRemoteSprite")(u=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._remoteUrl="",t._fitStyle=0,t._originWid=0,t._originHei=0,t}t(n,e);var i=n.prototype;return i.onLoad=function(){this._originWid=this.node.getComponent(o).contentSize.width,this._originHei=this.node.getComponent(o).contentSize.height,l.getInstance().listen(c.remote_tex_loaded,this.onTextureLoaded,this)},i.onDestroy=function(){l.getInstance().removeByTarget(this)},i.set2Default=function(){p.setNodeSprite(this.node,null),this.node.getComponent(o).setContentSize(r(this._originWid,this._originHei))},i.setRemoteSprite=function(e,t){var n=this._remoteUrl!=e;return this._remoteUrl=e,this._fitStyle=t,n&&this.set2Default(),n},i.onTextureLoaded=function(e,t){if(e==this._remoteUrl)if(t){var n=new s;n.texture=t,this.node.getComponent(h).spriteFrame=n;var i=this._fitStyle,a=this.node,p=this._originWid,l=this._originHei;if(0==i)a.getComponent(o).setContentSize(r(p,l));else if(1==i){var c=t.width/t.height;if(a.getComponent(o).setContentSize(r(l*c,l)),a.getComponent(o).contentSize.width>p){var u=p/a.getComponent(o).contentSize.width;a.getComponent(o).setContentSize(r(p,l*u))}}else if(2==i){var f=t.width/t.height;a.getComponent(o).setContentSize(r(l*f,l))}else if(3==i){var d=t.height/t.width;a.getComponent(o).setContentSize(r(p,p*d))}}else this.set2Default()},n}(a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CpnSpine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosUtil.ts","./LoadHelper.ts","./ResInfo.ts","./EventCenter.ts","./logger.ts"],(function(t){var e,n,i,s,o,a,r,l,h,p,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.tween,o=t.sp,a=t.Component},function(t){r=t.default},function(t){l=t.default},function(t){h=t.genResKey},function(t){p=t.default},function(t){c=t.default}],execute:function(){var u;n._RF.push({},"5c976HWdrNNUrwBOcyQCN7j","CpnSpine",void 0);var _=i.ccclass;i.property,t("default",_(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._playing=!1,e._respath=void 0,e._trackIndex=0,e._aniName="",e._loopTimes=-1,e._onPlayFinish=null,e}e(n,t);var i=n.prototype;return i.onDestroy=function(){p.resInstance().removeByTarget(this),this._onPlayFinish=null},i.onDisable=function(){p.resInstance().removeByTarget(this),this._onPlayFinish=null},i.loadSkeletonData=function(t){if(this._respath=t,s(this.node).hide().start(),null!=t&&""!==t.respath){var e=h(t);p.resInstance().remove(e,this.onResLoaded,this),p.resInstance().listen(e,this.onResLoaded,this),l.loadRes(t,o.SkeletonData,(function(n,i){n?c.log("载入spine失败:"+n):i?p.resInstance().fire(e,i):c.log("资源为空",t)}))}else c.error("respath is empty")},i.setAnimation=function(t,e,n,i,s){void 0!==this._respath&&null!==this._respath&&""!==this._respath.respath||c.error("respath not set"),i&&this._playing&&this._trackIndex==t&&e==this._aniName&&n==this._loopTimes||(this._trackIndex=t,this._aniName=e,this._loopTimes=n,this._onPlayFinish=s,this.loadSkeletonData(this._respath))},i.getSkeleton=function(){return r.initComponent(this.node,o.Skeleton)},i.onResLoaded=function(t){if(null!==this._aniName&&void 0!==this._aniName&&""!==this._aniName){s(this.node).show().start(),this._playing=!0;var e=this.getSkeleton();e.skeletonData=t,e.premultipliedAlpha=!1;var n=this._loopTimes;1==n?e.setAnimation(this._trackIndex,this._aniName,!1):e.setAnimation(this._trackIndex,this._aniName,!0),n>0?e.setCompleteListener(this.onComplete.bind(this)):e.setCompleteListener(null)}},i.onComplete=function(t){this._loopTimes>0&&(Math.floor(t.trackTime/t.animationEnd)>=this._loopTimes&&(this._playing=!1,this._onPlayFinish&&this._onPlayFinish(this.getSkeleton())))},n}(a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CpnSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts"],(function(t){var e,n,r,o,i,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.isValid,i=t.Sprite,s=t.Component},function(t){c=t.default}],execute:function(){var p;n._RF.push({},"1ba40mxZU9F5KL0/+FN0e47","CpnSprite",void 0);var u=r.ccclass;r.property,t("default",u("CpnSprite")(p=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.onDestroy=function(){c.resInstance().removeByTarget(this)},r.onResLoaded=function(t){if(o(this)&&o(this.node)){var e=this.node.getComponent(i);e&&o(e)&&(e.spriteFrame=t)}},n}(s))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/DateUtil.ts",["cc","./Globals.ts","./CommUtil.ts","./StringUtil.ts"],(function(t){var e,n,u,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.isNil},function(t){u=t.default},function(t){r=t.default}],execute:function(){e._RF.push({},"6e3c5sfnltBmoetUQElgIao","DateUtil",void 0);t("default",function(){function t(){}return t.getSysTime=function(){return(new Date).getTime()},t.second2hms=function(t){var e=t,n=0,a=0;return e>60&&(n=Math.floor(e/60),e%=60,n>60&&(a=Math.floor(n/60),n%=60)),a>0?r.formatStr("%s:%s:%s",u.num00(a),u.num00(n),u.num00(e)):n>0?r.formatStr("%s:%s",u.num00(n),u.num00(e)):r.formatStr("00:%s",u.num00(e))},t.formatTime=function(t,e){if(void 0===e&&(e=1),n(t))return"";var r=new Date(1e3*parseInt(t)),a=r.getFullYear(),o=u.num00(r.getMonth()+1),i=u.num00(r.getDate()),m=u.num00(r.getHours()),s=u.num00(r.getMinutes()),f=u.num00(r.getSeconds());return e>1?a+"-"+o+"-"+i+"\n"+m+":"+s+":"+f:a+"-"+o+"-"+i+" "+m+":"+s+":"+f},t.formatDay=function(t,e){var n=new Date(t);return n.getFullYear()+e+(n.getMonth()+1)+e+n.getDate()},t.getMonthDays=function(t,e){return new Date(t,e,0).getDate()},t.getTimestamp=function(t,e,n,r,a,o){var i=t+"-"+u.num00(e)+"-"+u.num00(n)+" "+r+":"+a+":"+o;return new Date(i).getTime()},t.getZeroTimestamp=function(t,e,n){return new Date(t,e,n).getTime()},t.getTodayZeroTimestamp=function(){var t=new Date;return this.getZeroTimestamp(t.getFullYear(),t.getMonth(),t.getDate())},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DiagonalMovement.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"fb62c1+9oNBd4kNif7HmQTA","DiagonalMovement",void 0);e("default",{Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4});t._RF.pop()}}}));

System.register("chunks:///_virtual/DijkstraFinder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AStarFinder.ts"],(function(t){var n,r,e;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy},function(t){e=t.default}],execute:function(){r._RF.push({},"6faf0qjLk5Hj4r1JZgFicQT","DijkstraFinder",void 0);t("default",function(t){function r(n){var r;return(r=t.call(this,n)||this).heuristic=function(t,n){return 0},r}return n(r,t),r}(e));r._RF.pop()}}}));

System.register("chunks:///_virtual/DoubleList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logger.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.default}],execute:function(){n._RF.push({},"4aff56mAPZL64vtJyMgN/7i","DoubleList",void 0);var r=function(){function t(t){this._name=void 0,this._value=void 0,this._prev=void 0,this._next=void 0,this._name=t+"",this._value=t,this._prev=null,this._next=null}return e(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"prev",get:function(){return this._prev},set:function(t){this._prev=t}},{key:"next",get:function(){return this._next},set:function(t){this._next=t}}]),t}();t("default",function(){function t(){this._count=0,this._header=void 0,this._tail=void 0,this._header=new r(null),this._header.name="header",this._tail=new r(null),this._tail.name="tail",this._header.prev=this._header.next=this._tail,this._tail.next=this._tail.prev=this._header}var e=t.prototype;return e.add=function(t){var e=new r(t);e.prev=this._tail.prev,e.next=this._tail,this._tail.prev=e,e.prev.next=e,this._count++},e.insert=function(t,e){if(!this.empty())for(var n=this._header.next;n!==this._tail;){if(n.value==t){var i=new r(e);i.prev=n,i.next=n.next,n.next.prev=i,n.next=i,this._count++;break}n=n.next}},e.remove=function(t){if(!this.empty())for(var e=this._header.next;e!==this._tail;){if(e.value==t){e.prev.next=e.next,e.next.prev=e.prev,e.next=null,e.prev=null;var n=e.value;return e.value=null,e=null,this._count--,n}e=e.next}},e.header=function(){return this._header.next.value},e.tail=function(){return this._tail.prev.value},e.find=function(t){if(!this.empty()){for(var e=this._header.next;e!==this._tail;){if(e.value==t)return e.value;e=e.next}return null}},e.reverse_find=function(t){if(!this.empty()){for(var e=this._tail.prev;e!==this._header;){if(e.value==t)return e.value;e=e.prev}return null}},e.size=function(){return this._count},e.empty=function(){return 0===this._count},e.clear=function(){for(var t=this._header.next;t!==this._tail;)t.prev=null,t.value=null,(t=t.next).prev.next=null;this._header.next=this._tail,this._tail.prev=this._header,this._count=0},e.print=function(){for(var t=this._header.next;t!==this._tail;)i.log(t),t=t.next},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EngineDefine.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"0cf50c4YapNso8jgCNx40SF","EngineDefine",void 0);n("EngineLaya",1);var i=n("EngineCocos",2);n("EngineEgret",3),n("UseingEngine",i);e._RF.pop()}}}));

System.register("chunks:///_virtual/EventCenter.ts",["cc","./logger.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default}],execute:function(){e._RF.push({},"431e76e6d1IBIM5XKL0hg6G","EventCenter",void 0);var r=t("default",function(){function t(){this._hooks={},this._events={},this._fireings={}}t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.resInstance=function(){return t._resInstance||(t._resInstance=new t),t._resInstance},t.otherInstance=function(e){return t._otherInstances[e]||(t._otherInstances[e]=new t),t._otherInstances[e]},t.untarget=function(e){for(var n in t.getInstance().removeByTarget(e),t.resInstance().removeByTarget(e),t._otherInstances)t._otherInstances[n].removeByTarget(e)};var e=t.prototype;return e.getHook=function(t,e,n){var r=this._hooks[t];return!!r&&(r.callBack===e&&r.target===n)},e.getEvent=function(t,e,n){var r=this._events[t];if(!r)return-1;for(var a=r.length-1;a>=0;a--){var s=r[a];if(s.callBack===e&&s.target===n)return a}return-1},e.canAdd=function(t,e,r){return null!=t&&e?this.getEvent(t,e,r)>=0?(n.warn("already registed this event: ",t),!1):!this.getHook(t,e,r)||(n.warn("already hooked this event: ",t),!1):(n.error("hook error! event name or callback is null!",t,typeof t,typeof e),!1)},e.hook=function(t,e,n){this.canAdd(t,e,n)&&(this._hooks[t]={callBack:e,target:n})},e.listen=function(t,e,n){if(this.canAdd(t,e,n)){var r=this._events[t];r||(r=[],this._events[t]=r),r.push({callBack:e,target:n})}},e.remove=function(t,e,r){var a=this._events[t];if(a)for(var s=a.length-1;s>=0;s--){var i=a[s];if(i.callBack===e&&i.target===r){this._fireings[t]?(i.callBack=null,i.target=null,n.log("==== delay del as fireing: ",t,s)):a.splice(s,1);break}}var o=this._hooks[t];o&&o.callBack===e&&o.target===r&&(this._hooks[t]=null,delete this._hooks[t])},e.removeByTarget=function(t){for(var e in this._events){var r=this._events[e];if(r)for(var a=r.length-1;a>=0;a--){var s=r[a];s.target===t&&(this._fireings[e]?(s.callBack=null,s.target=null,n.log("==== delay del as fireing: ",e,a)):r.splice(a,1))}}for(var i in this._hooks){var o=this._hooks[i];o&&o.target===t&&(this._hooks[i]=null)}},e.fire=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n&&n.length>0?this.onHasArgs(t,n):this.onNoArgs(t)},e.trigerOnce=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.fire(t,n),this._hooks[t]&&(this._hooks[t]=null,delete this._hooks[t]),this._events[t]&&(this._events[t].length=0)},e.onNoArgs=function(t){var e=this._hooks[t];if(e)try{e.callBack.call(e.target)}catch(t){n.error(t)}var r=this._events[t];if(r&&r.length>0){this._fireings[t]=!0;for(var a=0;a<r.length;a++)try{var s=r[a];s.callBack?s.callBack.call(s.target):(r.splice(a,1),a--)}catch(t){n.error(t)}this._fireings[t]=!1}},e.onHasArgs=function(t,e){var r=this._hooks[t];if(r)try{r.callBack.apply(r.target,e)}catch(t){n.error(t)}var a=this._events[t];if(a&&a.length>0){this._fireings[t]=!0;for(var s=0;s<a.length;s++)try{var i=a[s];i.callBack?i.callBack.apply(i.target,e):(a.splice(s,1),s--)}catch(t){n.error(t)}this._fireings[t]=!1}},t}());r._instance=null,r._resInstance=null,r._otherInstances={},e._RF.pop()}}}));

System.register("chunks:///_virtual/Globals.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){n({isEmpty:function(n){return null==n||0===n||""===n},isNil:function(n){return null==n}}),t._RF.push({},"aea9bKr0s5HP67mE/1sMoEO","Globals",void 0);var u=n("GlobalData",(function(){}));u.isInBackgroud=!1,u.timeOfEnterBackground=0,u.LoginId="",t._RF.pop()}}}));

System.register("chunks:///_virtual/heap.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var e,i,r,s,o,u,h,c,p,l;n._RF.push({},"4009bptZBZI/7tsi1Ngqizv","heap",void 0),i=Math.floor,Math.min,e=function(t,n){return t<n?-1:t>n?1:0},o=function(t,n,i){return null==i&&(i=e),t.push(n),p(t,0,t.length-1,i)},s=function(t,n){var i,r;return null==n&&(n=e),i=t.pop(),t.length?(r=t[0],t[0]=i,l(t,0,n)):r=i,r},h=function(t,n,i){var r;return null==i&&(i=e),r=t[0],t[0]=n,l(t,0,i),r},u=function(t,n,i){var r;return null==i&&(i=e),t.length&&i(t[0],n)<0&&(n=(r=[t[0],n])[0],t[0]=r[1],l(t,0,i)),n},r=function(t,n){var r,s,o,u,h,c;for(null==n&&(n=e),h=[],s=0,o=(u=function(){c=[];for(var n=0,e=i(t.length/2);0<=e?n<e:n>e;0<=e?n++:n--)c.push(n);return c}.apply(this).reverse()).length;s<o;s++)r=u[s],h.push(l(t,r,n));return h},c=function(t,n,i){var r;if(null==i&&(i=e),-1!==(r=t.indexOf(n)))return p(t,0,r,i),l(t,r,i)},p=function(t,n,i,r){var s,o,u;for(null==r&&(r=e),s=t[i];i>n&&r(s,o=t[u=i-1>>1])<0;)t[i]=o,i=u;return t[i]=s},l=function(t,n,i){var r,s,o,u,h;for(null==i&&(i=e),s=t.length,h=n,o=t[n],r=2*n+1;r<s;)(u=r+1)<s&&!(i(t[r],t[u])<0)&&(r=u),t[n]=t[r],r=2*(n=r)+1;return t[n]=o,p(t,h,n,i)};t("default",(function t(n){this.cmp=void 0,this.nodes=void 0,this.push=function(t){return o(this.nodes,t,this.cmp)},this.pop=function(){return s(this.nodes,this.cmp)},this.peek=function(){return this.nodes[0]},this.contains=function(t){return-1!==this.nodes.indexOf(t)},this.replace=function(t){return h(this.nodes,t,this.cmp)},this.pushpop=function(t){return u(this.nodes,t,this.cmp)},this.heapify=function(){return r(this.nodes,this.cmp)},this.updateItem=function(t){return c(this.nodes,t,this.cmp)},this.clear=function(){return this.nodes=[]},this.empty=function(){return 0===this.nodes.length},this.size=function(){return this.nodes.length},this.clone=function(){var n;return(n=new t(null)).nodes=this.nodes.slice(0),n},this.toArray=function(){return this.nodes.slice(0)},this.insert=t.prototype.push,this.top=t.prototype.peek,this.front=t.prototype.peek,this.has=t.prototype.contains,this.copy=t.prototype.clone,this.cmp=null!=n?n:e,this.nodes=[]}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Heuristic.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f5d97eMFvxIwrSTgt85zly8","Heuristic",void 0);t("default",{manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}});e._RF.pop()}}}));

System.register("chunks:///_virtual/HotDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"aa704mzTwhOF6byzFCMYW6p","HotDefine",void 0);e("EVENT_HOT_CHECKFINISH","EVENT_HOT_CHECKFINISH"),e("EVENT_HOT_PROGRESS","EVENT_HOT_PROGRESS");t._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["cc","./HotDefine.ts"],(function(t){var e,s,a,i,n,h,o,r;return{setters:[function(t){e=t.cclegacy,s=t._decorator,a=t.sys,i=t.director,n=t.game,h=t.assetManager},function(t){o=t.EVENT_HOT_CHECKFINISH,r=t.EVENT_HOT_PROGRESS}],execute:function(){e._RF.push({},"1c8a3bFf45DeqmVNYtc8fb+","HotUpdate",void 0);s.ccclass,s.property;var l=window.jsb;t("HotUpdate",function(){function t(){this.manifestUrl=null,this.bundleName="",this._updating=!1,this._canRetry=!1,this._failCount=0,this._storagePath="",this._am=null,this._checkListener=null,this._updateListener=null,this._updateProgress=0,this.versionCompareHandle=null}var e=t.prototype;return e.hotAble=function(){return!(!l||!a.isNative)},e.Init=function(t,e,s){this.hotAble()&&(this._storagePath=(l.fileUtils?l.fileUtils.getWritablePath():"/")+e,console.log("Storage path for remote asset : "+this._storagePath),this.manifestUrl=s,this.bundleName=t,this.versionCompareHandle=function(t,e){console.log("version A is "+t+", version B is "+e);for(var s=t.split("."),a=e.split("."),i=0;i<s.length;++i){var n=parseInt(s[i]),h=parseInt(a[i]||"0");if(n!==h)return n-h}return a.length>s.length?-1:0},this._am=new l.AssetsManager(this.manifestUrl.nativeUrl,this._storagePath,this.versionCompareHandle),this._am.setVerifyCallback((function(t,e){return!0})))},e.Destroy=function(){this._am&&(this._am.setEventCallback(null),this._am=null),this._checkListener=null,this._updateListener=null},e.retry=function(){!this._updating&&this._canRetry&&(this._updating=!0,this._canRetry=!1,this._am.downloadFailedAssets())},e.showLog=function(t){console.log(t)},e.postEvent=function(t,e){i.emit(o,e)},e.onCheckFinish=function(t,e){void 0===e&&(e=0),console.log("检测更新完毕。是否有更新：",t,e);try{this._checkListener&&(this._checkListener(t,e),this._checkListener=null);var s={bundleName:this.bundleName,hasNewVersion:t,totalBytes:e};this.postEvent(o,s)}catch(t){console.log(t)}},e.checkCb=function(t){switch(console.log("Code: "+t.getEventCode()),t.getEventCode()){case l.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.showLog("没有发现本地manifest文件, 跳过热更新."),this.onCheckFinish(!0);break;case l.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case l.EventAssetsManager.ERROR_PARSE_MANIFEST:this.showLog("下载manifest文件失败, 跳过热更新."),this.onCheckFinish(!1);break;case l.EventAssetsManager.ALREADY_UP_TO_DATE:this.showLog("已是最新版本"),this.onCheckFinish(!1);break;case l.EventAssetsManager.NEW_VERSION_FOUND:var e=Math.ceil(this._am.getTotalBytes()/1024);this.showLog("检测到新版本: "+e+"kb"),this.onCheckFinish(!0,this._am.getTotalBytes());break;default:return}this._am.setEventCallback(null),this._checkListener=null,this._updating=!1},e.checkUpdate=function(t){if(this.hotAble()||this.onCheckFinish(!1),this._updating)console.log("检测更新中...");else if(this._am){if(this._checkListener=t,this._am.getState()===l.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}if(!this._am.getLocalManifest()||!this._am.getLocalManifest().isLoaded())return this.showLog("加载manifest文件失败"),void this.onCheckFinish(!1);this._updating=!0,this._am.setEventCallback(this.checkCb.bind(this)),this._am.checkUpdate()}else console.log("am未初始化...")},e.notifyUpdateProgress=function(t,e){t>1&&(t=1),t<0&&(t=0),this._updateProgress=t;var s={bundleName:this.bundleName,percent:t,isFinish:e};try{this._updateListener&&(this._updateListener(t,e),this._updateListener=null),this.postEvent(r,s)}catch(t){console.log(t)}},e.updateCb=function(e){var s=!1,a=!1;switch(e.getEventCode()){case l.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.showLog("没有发现本地manifest文件, 跳过热更新."),a=!0;break;case l.EventAssetsManager.UPDATE_PROGRESSION:var i=e.getPercent();if(isNaN(i))return;var h=e.getMessage();h?this.showLog("updateCb 更新Item失败: "+i+", msg: "+h):this.showLog("updateCb 更新进度: "+i+", msg: "+h),this.notifyUpdateProgress(i,!1);break;case l.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case l.EventAssetsManager.ERROR_PARSE_MANIFEST:this.showLog("下载manifest文件失败, 跳过热更新."),a=!0;break;case l.EventAssetsManager.ALREADY_UP_TO_DATE:this.showLog("已是最新."),a=!0;break;case l.EventAssetsManager.UPDATE_FINISHED:this.showLog("更新结束."+e.getMessage()),s=!0;break;case l.EventAssetsManager.UPDATE_FAILED:this.showLog("更新错误."+e.getMessage()),this._updating=!1,this._canRetry=!0,this._failCount++,this.retry();break;case l.EventAssetsManager.ERROR_UPDATING:this.showLog("更新过程中错误: "+e.getAssetId()+", "+e.getMessage());break;case l.EventAssetsManager.ERROR_DECOMPRESS:this.showLog("解压错误")}a&&(this._am.setEventCallback(null),this.notifyUpdateProgress(1,!0),this._updateListener=null,this._updating=!1),s&&(this._am.setEventCallback(null),this.ajustSearchPath(),this.notifyUpdateProgress(1,!0),this._updateListener=null,void 0===this.bundleName||null===this.bundleName||""==this.bundleName||"resources"==this.bundleName?setTimeout((function(){n.restart()}),1e3):t.releaseBungle(this.bundleName))},e.hotUpdate=function(t){if(this.hotAble())if(this._updating)console.warn("更新中...");else if(this._am){if(this._updateListener=t,this.notifyUpdateProgress(0,!1),this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===l.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;this._am.loadLocalManifest(e)}this._failCount=0,this._updating=!0,this._am.update()}else console.error("am未初始化...");else t&&t(1,!0)},t.releaseBungle=function(t){if(null!=t&&""!=t&&"resources"!==t){var e=h.getBundle(t);e&&(e.releaseAll(),h.removeBundle(e),console.log("======> release bundle: ",t))}},e.ajustSearchPath=function(){var t=l.fileUtils.getSearchPaths()||[],e=this._am.getLocalManifest().getSearchPaths()||[];console.log(JSON.stringify(e));for(var s={},a=0;a<e.length;a++)s[e[a]]=!0;for(var i=t.length-1;i>=0;i--)s[t[i]]&&t.splice(i,1);Array.prototype.unshift.apply(t,e),this.addHotdirToSearchPath(),l.fileUtils.setSearchPaths(t),localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t))},e.addHotdirToSearchPath=function(){for(var t=this._storagePath,e=l.fileUtils.getSearchPaths()||[],s=e.length-1;s>=0;s--)e[s]==t&&e.splice(s,1);Array.prototype.unshift.apply(e,[t])},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/HttpChanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts","./logger.ts","./HttpUtil.ts","./NetDefine.ts"],(function(t){var e,n,i,r,o,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){i=t.default},function(t){r=t.default},function(t){o=t.default},function(t){s=t.EHttpResult}],execute:function(){n._RF.push({},"261f9ZSCl5NJ6vz4RuIqLWW","HttpChanel",void 0);t("default",function(){function t(t,e){this._domain="",this._coder=null,this._hidePrints={},this._domain=t,this._coder=e}var n=t.prototype;return n.setDomain=function(t){null!=t&&""!=t&&(t.lastIndexOf("/")==t.length-1&&(t=t.substring(0,t.length-1)),this._domain=t)},n.hidePrint=function(t){for(var n,i=e(t);!(n=i()).done;){var r=n.value;this._hidePrints[r]=!0}},n.Post=function(t,e,n){var u=this;this._hidePrints[t]||r.blue("[POST]: ",t," ",JSON.stringify(e)),o.callPost(this._domain+"/"+t,this._coder.encode(e),(function(e,o){if(e!==s.Succ)n&&n(!1,null),r.red("[ERROR_TABLE]",t,e);else{var l=u._coder.decode(o);u._hidePrints[t]||(r.blue("[RESP]",t),r.blue("[RESP]",JSON.stringify(l,null,2)));var c=l.error_code;null!=c&&0!==c?(r.red("[ERROR_CODE]",t,c),r.red(l.error_msg),n&&n(!1,l)):(n&&n(!0,l),i.getInstance().fire(t,l))}}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/HttpUtil.ts",["cc","./logger.ts","./Globals.ts","./NetDefine.ts"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default},function(e){o=e.isEmpty},function(e){r=e.EHttpResult}],execute:function(){t._RF.push({},"9e985+PXwhOSJOz9E4DNIpP","HttpUtil",void 0);var s=e("default",function(){function e(){}return e.createXHR=function(){return new XMLHttpRequest},e.commonHead=function(e){if(e.setRequestHeader("Content-Type","application/json;charset=utf-8"),this._heads)for(var t in this._heads)e.setRequestHeader(t,this._heads[t])},e.setHeads=function(e){for(var t in this._heads||(this._heads={}),e)this._heads[t]=e[t]},e.clearHeads=function(){this._heads=null},e.callGet=function(e,t,o,s){var a=e;t&&""!=t&&(a=a+"?"+t);var i=this.createXHR();if(i.onabort=function(){n.orange("[onabort]",a),o(r.Aborted,i.responseText)},i.onerror=function(){n.orange("[onerror]",a),o(r.Error,i.responseText)},i.ontimeout=function(){n.orange("[ontimeout]",a),o(r.Timeout,i.responseText)},i.onreadystatechange=function(){4===i.readyState&&i.status>=200&&i.status<207&&(n.green("[RESP]",a),o(r.Succ,i.responseText))},n.green("[GET]: ",a,t),i.open("GET",a,!0),i.timeout=this._timeout,this.commonHead(i),s)for(var u in s)i.setRequestHeader(u,s[u]);i.send()},e.callPost=function(e,t,o){var s=this.createXHR();s.onabort=function(){n.orange("[onabort]",e),o(r.Aborted,s.responseText)},s.onerror=function(){n.orange("[onerror]",e),o(r.Error,s.responseText)},s.ontimeout=function(){n.orange("[ontimeout]",e),o(r.Timeout,s.responseText)},s.onreadystatechange=function(){4===s.readyState&&s.status>=200&&s.status<207&&o(r.Succ,s.responseText)},s.open("POST",e,!0),s.timeout=this._timeout,this.commonHead(s),s.send(t)},e.callUpload=function(e,t,r,s,a,i){if(o(r)||o(e))n.warn("无效的上传参数",r,e);else{n.log("开始上传......",e);var u=new FormData;if(u.append(t,r),s)for(var c in s)u.append(c,s[c]);var d=new XMLHttpRequest;if(d.upload.addEventListener("progress",(function(e){n.log("上传进度",e.loaded/e.total*100+"/100")}),!1),d.addEventListener("load",(function(t){n.log("上传完毕",e)}),!1),d.addEventListener("error",(function(e){n.error("error: ",e)}),!1),d.addEventListener("abort",(function(e){n.error("abort: ",e)}),!1),d.onreadystatechange=function(){n.log("上传状态: ",d.readyState,d.status,d.responseText),4===d.readyState&&d.status>=200&&d.status<207&&(n.log("[RESP]",d.responseText),a&&a(d.responseText))},d.open("POST",e),i)for(var f in i)d.setRequestHeader(f,i[f]);d.send(u)}},e}());s._timeout=8e3,s._heads=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/ICell.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9d3ae3dwg9G0aY+7QU1R7PD","ICell",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IChannel.ts",["cc"],(function(){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"8f313J7tVNKRK9DjQmnknMo","IChannel",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ICodec.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"4955f7DYhNHpJBtjIBM2aBU","ICodec",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/IDAStarFinder.ts",["cc","./Heuristic.ts","./DiagonalMovement.ts"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy},function(t){e=t.default},function(t){n=t.default}],execute:function(){i._RF.push({},"5848fz7SoJEVo1EeMuqtgbx","IDAStarFinder",void 0);t("default",function(){function t(t){this.allowDiagonal=void 0,this.dontCrossCorners=void 0,this.diagonalMovement=void 0,this.heuristic=void 0,this.weight=void 0,this.trackRecursion=void 0,this.timeLimit=void 0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||e.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=n.OnlyWhenNoObstacles:this.diagonalMovement=n.IfAtMostOneObstacle:this.diagonalMovement=n.Never),this.diagonalMovement===n.Never?this.heuristic=t.heuristic||e.manhattan:this.heuristic=t.heuristic||e.octile}return t.prototype.findPath=function(t,i,e,n,o){var s,r,a,h=(new Date).getTime(),u=function(t,i){return this.heuristic(Math.abs(i.x-t.x),Math.abs(i.y-t.y))}.bind(this),c=function(t,i,e,n,s){if(this.timeLimit>0&&(new Date).getTime()-h>1e3*this.timeLimit)return 1/0;var r,a,d,g,f=i+u(t,l)*this.weight;if(f>e)return f;if(t==l)return n[s]=[t.x,t.y],t;var m,v,M=o.getNeighbors(t,this.diagonalMovement);for(d=0,r=1/0;g=M[d];++d){if(this.trackRecursion&&(g.retainCount=g.retainCount+1||1,!0!==g.tested&&(g.tested=!0)),(a=c(g,i+(v=g,(m=t).x===v.x||m.y===v.y?1:Math.SQRT2),e,n,s+1))instanceof Node)return n[s]=[t.x,t.y],a;this.trackRecursion&&0==--g.retainCount&&(g.tested=!1),a<r&&(r=a)}return r}.bind(this),d=o.getNodeAt(t,i),l=o.getNodeAt(e,n),g=u(d,l);for(s=0;;++s){if((a=c(d,0,g,r=[],0))===1/0)return[];if(a instanceof Node)return r;g=a}return[]},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/IoGamePacket.ts",["cc","./ChannelMgr.ts","./pb_parse_config.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./EngineDefine.ts","./StringUtil.ts","./proto_msghead.mjs_cjs=&original=.js","./proto_msghead.js"],(function(t){var e,n,a,s,r,i,c,u,d,o;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){a=t.default},function(t){s=t.default},function(t){r=t.default},function(t){i=t.default},function(t){c=t.UseingEngine,u=t.EngineCocos},function(t){d=t.default},null,function(t){o=t.default}],execute:function(){e._RF.push({},"61689KkBlNHvrb3FGLScwOD","IoGamePacket",void 0);t("default",function(){function t(t,e,n){this.cmd=void 0,this.data_struct=void 0,this.msg_name=void 0,this.cmd=t,this.data_struct=e,this.msg_name=n}var e=t.prototype;return e.debugName=function(){return this.msg_name||" "},e.pack=function(t,e,n){null==t&&(t={});var a=null;if(null!==this.data_struct&&void 0!==this.data_struct){var s=t;e||(s=this.data_struct.create(t));var r=this.data_struct.encode(s).finish();a=new Uint8Array(r)}if(null!==a){var i={cmdCode:1,protocolSwitch:0,cmdMerge:this.cmd,responseStatus:0,validMsg:"",dataContent:a};return o.pb.MyExternalMessage.encode(o.pb.MyExternalMessage.create(i)).finish()}var c={cmdCode:1,protocolSwitch:0,cmdMerge:this.cmd,responseStatus:0,validMsg:""};return o.pb.MyExternalMessage.encode(o.pb.MyExternalMessage.create(c)).finish()},e.unpack=function(t,e){if(null==t)return{cmd:0,errCode:1,data:null};var n=new Uint8Array(t),c=o.pb.MyExternalMessage.decode(n),u=c.cmdMerge,d=c.responseStatus,l=c.dataContent;if(null!==this.data_struct&&void 0!==this.data_struct)try{var f=l,h=this.data_struct.decode(f);l=this.data_struct.toObject(h,a)}catch(t){i.warn("unpack fail",u,t),r.getInstance().fire(s.ERR_UNPACK_NETDATA)}return i.log(u,d,l),{cmd:u,errCode:d,data:l}},e.unpackStream=function(t){return null==t?{cmd:0,errCode:1,data:null}:this.unpack(t.buffer,!0)},e.unpackBody=function(t){if(null==t)return null;if(t.length<=0)return null;if(null!==this.data_struct&&void 0!==this.data_struct)try{if(c===u){var e=this.data_struct.decode(t);return this.data_struct.toObject(e,a)}}catch(t){i.warn("unpack fail",this.cmd,this.debugName(),t),r.getInstance().fire(s.ERR_UNPACK_NETDATA)}return null},e.sendToChannel=function(t,e,a){var s=n.getInstance().getChannel(t);if(s){var r=s.getProcessor();r.isPrintCmd(this.cmd)&&i.green(d.formatStr("%s pack %s(%d)",t,this.msg_name,this.cmd),JSON.stringify(e));var c=this.pack(e,a,r.isLittleEndian());s.sendMessage(this.cmd,c)}else i.warn("..... channel not created: ",t,this.msg_name,this.cmd)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/IoGameProcessor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseProcessor.ts","./NetDefine.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./StringUtil.ts","./proto_msghead.mjs_cjs=&original=.js","./proto_msghead.js"],(function(e){var t,s,n,r,i,a,o,d,c,u;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy},function(e){n=e.default},function(e){r=e.ConnState,i=e.IoGameCmdParser},function(e){a=e.default},function(e){o=e.default},function(e){d=e.default},function(e){c=e.default},null,function(e){u=e.default}],execute:function(){s._RF.push({},"f86c6olFPZBv6sMm1hdyXev","IoGameProcessor",void 0);e("default",function(e){function s(){return e.apply(this,arguments)||this}t(s,e);var n=s.prototype;return n.sendMessage=function(e,t){var s=this._channel.getState();return this.isNetHolded(e)?(this._nerverPushs[e]||(this.isPrintCmd(e)&&d.green(c.formatStr("%s [push send] %s(%d) bytes:%d",this._name,this._cmds[e].debugName(),e,t.length)),this._send_list.push({cmd:e,buf:t})),s!==r.reconnectfail&&s!==r.connectfail||o.getInstance().fire(a.NET_STATE,this._channel),!1):s===r.unconnect?(o.getInstance().fire(a.NET_STATE,this._channel),!1):this._sendHooker&&0==this._sendHooker(e)?void 0:(this.isPrintCmd(e)&&d.green(c.formatStr("%s [send] %s(%d) bytes:%d",this._name,this._cmds[e].debugName(),e,t.length)),this._channel.sendBuff(t))},n.onrecvBuff=function(e){if(!this.backgroundChecker()){var t=u.pb.MyExternalMessage.decode(new Uint8Array(e)),s=t.cmdMerge,n=this._cmds[s];if(this._recvCmds&&(n=this._recvCmds[s]),n){t.responseStatus&&console.log("errorCode: ",t.responseStatus,t.validMsg);var r=new Uint8Array(t.dataContent),a=n.unpackBody(r);if(this.isPrintCmd(s)){var o=this._cmds[s].debugName();this._recvCmds[s]&&(o=this._recvCmds[s].debugName()),this._paused?this._nerverPushs[s]?d.blue(c.formatStr("%s [ignore recv] %s(%d) bytes:%d",this._name,o,s,r.length)):d.blue(c.formatStr("%s [push recv] %s(%d) bytes:%d",this._name,o,s,r.length)):d.blue(c.formatStr("%s [recv] %s(%d) bytes:%d",this._name,o,s,r.length)),d.blue(JSON.stringify(a,null,2))}this._paused?this._nerverPushs[s]||this._fire_list.push({cmd:s,data:a}):this._dispatcher.fire(s,a)}else d.red(this._name,"找不到cmd表: ",s,i.getMainCmd(s),i.getSubCmd(s))}},s}(n));s._RF.pop()}}}));

System.register("chunks:///_virtual/IProcessor.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"b0520NJA75CR7NFhqvyhYKp","IProcessor",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/JPFAlwaysMoveDiagonally.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DiagonalMovement.ts","./JumpPointFinderBase.ts"],(function(t){var a,e,l,s;return{setters:[function(t){a=t.inheritsLoose},function(t){e=t.cclegacy},function(t){l=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"aca8d7t4cNLPKZa1RC3Mv5G","JPFAlwaysMoveDiagonally",void 0);t("default",function(t){function e(a){return t.call(this,a)||this}a(e,t);var s=e.prototype;return s._jump=function(t,a,e,l){var s=this.grid,i=t-e,u=a-l;if(!s.isWalkableAt(t,a))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,a).tested=!0),s.getNodeAt(t,a)===this.endNode)return[t,a];if(0!==i&&0!==u){if(s.isWalkableAt(t-i,a+u)&&!s.isWalkableAt(t-i,a)||s.isWalkableAt(t+i,a-u)&&!s.isWalkableAt(t,a-u))return[t,a];if(this._jump(t+i,a,t,a)||this._jump(t,a+u,t,a))return[t,a]}else if(0!==i){if(s.isWalkableAt(t+i,a+1)&&!s.isWalkableAt(t,a+1)||s.isWalkableAt(t+i,a-1)&&!s.isWalkableAt(t,a-1))return[t,a]}else if(s.isWalkableAt(t+1,a+u)&&!s.isWalkableAt(t+1,a)||s.isWalkableAt(t-1,a+u)&&!s.isWalkableAt(t-1,a))return[t,a];return this._jump(t+i,a+u,t,a)},s._findNeighbors=function(t){var a,e,s,i,u,n,r,o,h=t.parent,b=t.x,A=t.y,k=this.grid,p=[];if(h)a=h.x,e=h.y,s=(b-a)/Math.max(Math.abs(b-a),1),i=(A-e)/Math.max(Math.abs(A-e),1),0!==s&&0!==i?(k.isWalkableAt(b,A+i)&&p.push([b,A+i]),k.isWalkableAt(b+s,A)&&p.push([b+s,A]),k.isWalkableAt(b+s,A+i)&&p.push([b+s,A+i]),k.isWalkableAt(b-s,A)||p.push([b-s,A+i]),k.isWalkableAt(b,A-i)||p.push([b+s,A-i])):0===s?(k.isWalkableAt(b,A+i)&&p.push([b,A+i]),k.isWalkableAt(b+1,A)||p.push([b+1,A+i]),k.isWalkableAt(b-1,A)||p.push([b-1,A+i])):(k.isWalkableAt(b+s,A)&&p.push([b+s,A]),k.isWalkableAt(b,A+1)||p.push([b+s,A+1]),k.isWalkableAt(b,A-1)||p.push([b+s,A-1]));else for(r=0,o=(u=k.getNeighbors(t,l.Always)).length;r<o;++r)n=u[r],p.push([n.x,n.y]);return p},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/JPFMoveDiagonallyIfAtMostOneObstacle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JumpPointFinderBase.ts","./DiagonalMovement.ts"],(function(t){var e,a,l,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){l=t.default},function(t){s=t.default}],execute:function(){a._RF.push({},"1521evB/GBLcbNWXYNkinqd","JPFMoveDiagonallyIfAtMostOneObstacle",void 0);t("default",function(t){function a(e){return t.call(this,e)||this}e(a,t);var l=a.prototype;return l._jump=function(t,e,a,l){var s=this.grid,i=t-a,n=e-l;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i&&0!==n){if(s.isWalkableAt(t-i,e+n)&&!s.isWalkableAt(t-i,e)||s.isWalkableAt(t+i,e-n)&&!s.isWalkableAt(t,e-n))return[t,e];if(this._jump(t+i,e,t,e)||this._jump(t,e+n,t,e))return[t,e]}else if(0!==i){if(s.isWalkableAt(t+i,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+i,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+n)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+n)&&!s.isWalkableAt(t-1,e))return[t,e];return s.isWalkableAt(t+i,e)||s.isWalkableAt(t,e+n)?this._jump(t+i,e+n,t,e):null},l._findNeighbors=function(t){var e,a,l,i,n,u,r,b,o=t.parent,A=t.x,k=t.y,h=this.grid,W=[];if(o)e=o.x,a=o.y,l=(A-e)/Math.max(Math.abs(A-e),1),i=(k-a)/Math.max(Math.abs(k-a),1),0!==l&&0!==i?(h.isWalkableAt(A,k+i)&&W.push([A,k+i]),h.isWalkableAt(A+l,k)&&W.push([A+l,k]),(h.isWalkableAt(A,k+i)||h.isWalkableAt(A+l,k))&&W.push([A+l,k+i]),!h.isWalkableAt(A-l,k)&&h.isWalkableAt(A,k+i)&&W.push([A-l,k+i]),!h.isWalkableAt(A,k-i)&&h.isWalkableAt(A+l,k)&&W.push([A+l,k-i])):0===l?h.isWalkableAt(A,k+i)&&(W.push([A,k+i]),h.isWalkableAt(A+1,k)||W.push([A+1,k+i]),h.isWalkableAt(A-1,k)||W.push([A-1,k+i])):h.isWalkableAt(A+l,k)&&(W.push([A+l,k]),h.isWalkableAt(A,k+1)||W.push([A+l,k+1]),h.isWalkableAt(A,k-1)||W.push([A+l,k-1]));else for(r=0,b=(n=h.getNeighbors(t,s.IfAtMostOneObstacle)).length;r<b;++r)u=n[r],W.push([u.x,u.y]);return W},a}(l));a._RF.pop()}}}));

System.register("chunks:///_virtual/JPFMoveDiagonallyIfNoObstacles.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JumpPointFinderBase.ts","./DiagonalMovement.ts"],(function(t){var e,s,a,l;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy},function(t){a=t.default},function(t){l=t.default}],execute:function(){s._RF.push({},"4fd65uD901IM6Up7yMjscNS","JPFMoveDiagonallyIfNoObstacles",void 0);t("default",function(t){function s(e){return t.call(this,e)||this}e(s,t);var a=s.prototype;return a._jump=function(t,e,s,a){var l=this.grid,i=t-s,u=e-a;if(!l.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(l.getNodeAt(t,e).tested=!0),l.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==i&&0!==u){if(this._jump(t+i,e,t,e)||this._jump(t,e+u,t,e))return[t,e]}else if(0!==i){if(l.isWalkableAt(t,e-1)&&!l.isWalkableAt(t-i,e-1)||l.isWalkableAt(t,e+1)&&!l.isWalkableAt(t-i,e+1))return[t,e]}else if(0!==u&&(l.isWalkableAt(t-1,e)&&!l.isWalkableAt(t-1,e-u)||l.isWalkableAt(t+1,e)&&!l.isWalkableAt(t+1,e-u)))return[t,e];return l.isWalkableAt(t+i,e)&&l.isWalkableAt(t,e+u)?this._jump(t+i,e+u,t,e):null},a._findNeighbors=function(t){var e,s,a,i,u,n,r,o,h,b=t.parent,f=t.x,p=t.y,c=this.grid,k=[];if(b){if(e=b.x,s=b.y,a=(f-e)/Math.max(Math.abs(f-e),1),i=(p-s)/Math.max(Math.abs(p-s),1),0!==a&&0!==i)c.isWalkableAt(f,p+i)&&k.push([f,p+i]),c.isWalkableAt(f+a,p)&&k.push([f+a,p]),c.isWalkableAt(f,p+i)&&c.isWalkableAt(f+a,p)&&k.push([f+a,p+i]);else if(0!==a){h=c.isWalkableAt(f+a,p);var A=c.isWalkableAt(f,p+1),W=c.isWalkableAt(f,p-1);h&&(k.push([f+a,p]),A&&k.push([f+a,p+1]),W&&k.push([f+a,p-1])),A&&k.push([f,p+1]),W&&k.push([f,p-1])}else if(0!==i){h=c.isWalkableAt(f,p+i);var d=c.isWalkableAt(f+1,p),g=c.isWalkableAt(f-1,p);h&&(k.push([f,p+i]),d&&k.push([f+1,p+i]),g&&k.push([f-1,p+i])),d&&k.push([f+1,p]),g&&k.push([f-1,p])}}else for(r=0,o=(u=c.getNeighbors(t,l.OnlyWhenNoObstacles)).length;r<o;++r)n=u[r],k.push([n.x,n.y]);return k},s}(a));s._RF.pop()}}}));

System.register("chunks:///_virtual/JPFNeverMoveDiagonally.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JumpPointFinderBase.ts","./DiagonalMovement.ts"],(function(t){var e,a,i,l;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){i=t.default},function(t){l=t.default}],execute:function(){a._RF.push({},"fc0c3ytxKNGO6AdYkVIjR95","JPFNeverMoveDiagonally",void 0);t("default",function(t){function a(e){return t.call(this,e)||this}e(a,t);var i=a.prototype;return i._jump=function(t,e,a,i){var l=this.grid,s=t-a,r=e-i;if(!l.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(l.getNodeAt(t,e).tested=!0),l.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==s){if(l.isWalkableAt(t,e-1)&&!l.isWalkableAt(t-s,e-1)||l.isWalkableAt(t,e+1)&&!l.isWalkableAt(t-s,e+1))return[t,e]}else{if(0===r)throw new Error("Only horizontal and vertical movements are allowed");if(l.isWalkableAt(t-1,e)&&!l.isWalkableAt(t-1,e-r)||l.isWalkableAt(t+1,e)&&!l.isWalkableAt(t+1,e-r))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+s,e+r,t,e)},i._findNeighbors=function(t){var e,a,i,s,r,n,u,o,h=t.parent,f=t.x,c=t.y,p=this.grid,b=[];if(h)e=h.x,a=h.y,i=(f-e)/Math.max(Math.abs(f-e),1),s=(c-a)/Math.max(Math.abs(c-a),1),0!==i?(p.isWalkableAt(f,c-1)&&b.push([f,c-1]),p.isWalkableAt(f,c+1)&&b.push([f,c+1]),p.isWalkableAt(f+i,c)&&b.push([f+i,c])):0!==s&&(p.isWalkableAt(f-1,c)&&b.push([f-1,c]),p.isWalkableAt(f+1,c)&&b.push([f+1,c]),p.isWalkableAt(f,c+s)&&b.push([f,c+s]));else for(u=0,o=(r=p.getNeighbors(t,l.Never)).length;u<o;++u)n=r[u],b.push([n.x,n.y]);return b},a}(i));a._RF.pop()}}}));

System.register("chunks:///_virtual/JsonCodec.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"e07d7KtyatM0aTgAuHmZ6Ld","JsonCodec",void 0);n("default",function(){function n(){}var t=n.prototype;return t.encode=function(n){return JSON.stringify(n)},t.decode=function(n){return null==n?n:""===n?{}:JSON.parse(n)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/JsonProcessor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonCodec.ts","./BaseProcessor.ts","./NetDefine.ts","./logger.ts"],(function(e){var t,n,s,c,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.default},function(e){c=e.default},function(e){o=e.ConnState},function(e){i=e.default}],execute:function(){n._RF.push({},"fbe70CpcVlCRoYg08J3BZBd","JsonProcessor",void 0);e("default",function(e){function n(){for(var t,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))||this)._coder=new s,t}t(n,e);var c=n.prototype;return c.sendMessage=function(e,t){null==t&&(t={});var n={cmd:e,data:t},s=this._coder.encode(n);return this._channel.getState()!=o.connectsucc&&this._channel.getState()!=o.reconnectsucc||this._paused?(i.log(this._name,"消息推入队列：",this._channel.getState(),this._paused),void this._send_list.push({cmd:e,buf:s})):(i.log(this._name,"[send]",t),this._channel.sendBuff(s),!0)},c.onrecvBuff=function(e){var t=this._coder.decode(e);i.log(this._name,"[recv]",t);var n=t.cmd,s=t.data;s&&(s=this._coder.decode(s)),this._paused?(this._fire_list.push({cmd:n,data:s}),i.log("push fire",this._fire_list.length)):this._dispatcher.fire(n,s)},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/JumpPointFinder.ts",["cc","./DiagonalMovement.ts","./JPFNeverMoveDiagonally.ts","./JPFAlwaysMoveDiagonally.ts","./JPFMoveDiagonallyIfNoObstacles.ts","./JPFMoveDiagonallyIfAtMostOneObstacle.ts"],(function(e){var n,t,o,a,l,i;return{setters:[function(e){n=e.cclegacy},function(e){t=e.default},function(e){o=e.default},function(e){a=e.default},function(e){l=e.default},function(e){i=e.default}],execute:function(){e("default",(function(e){return(e=e||{}).diagonalMovement===t.Never?new o(e):e.diagonalMovement===t.Always?new a(e):e.diagonalMovement===t.OnlyWhenNoObstacles?new l(e):new i(e)})),n._RF.push({},"1621b4LsWtGK7kWTI0DHlQS","JumpPointFinder",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/JumpPointFinderBase.ts",["cc","./Heuristic.ts","./Util.ts","./heap.ts"],(function(t){var e,i,n,o;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default},function(t){n=t.default},function(t){o=t.default}],execute:function(){e._RF.push({},"9f10dW992ZCTZhzBYkfUzT6","JumpPointFinderBase",void 0);t("default",function(){function t(t){this.heuristic=void 0,this.trackJumpRecursion=void 0,this.openList=void 0,this.startNode=void 0,this.endNode=void 0,this.grid=void 0,t=t||{},this.heuristic=t.heuristic||i.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}var e=t.prototype;return e.findPath=function(t,e,i,s,r){var d,u=this.openList=new o((function(t,e){return t.f-e.f})),h=this.startNode=r.getNodeAt(t,e),c=this.endNode=r.getNodeAt(i,s);for(this.grid=r,h.g=0,h.f=0,u.push(h),h.opened=!0;!u.empty();){if((d=u.pop()).closed=!0,d===c)return n.expandPath(n.backtrace(c));this._identifySuccessors(d)}return[]},e._identifySuccessors=function(t){var e,n,o,s,r,d,u,h,c,f,a=this.grid,p=this.heuristic,g=this.openList,m=this.endNode.x,l=this.endNode.y,v=t.x,N=t.y,_=Math.abs;for(s=0,r=(e=this._findNeighbors(t)).length;s<r;++s)if(n=e[s],o=this._jump(n[0],n[1],v,N)){if(d=o[0],u=o[1],(f=a.getNodeAt(d,u)).closed)continue;h=i.octile(_(d-v),_(u-N)),c=t.g+h,(!f.opened||c<f.g)&&(f.g=c,f.h=f.h||p(_(d-m),_(u-l)),f.f=f.g+f.h,f.parent=t,f.opened?g.updateItem(f):(g.push(f),f.opened=!0))}},e._jump=function(t,e,i,n){throw new Error("Method not implemented.")},e._findNeighbors=function(t){throw new Error("Method not implemented.")},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/KernelComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimerManager.ts","./Adaptor.ts","./UImanager.ts","./config_ui.ts","./Globals.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./DateUtil.ts","./PlatformUtil.ts","./LocalCache.ts","./config_db.ts"],(function(t){var n,e,o,i,a,r,s,u,c,l,f,d,g,p,h,m,y,S,K,_,v;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.sys,a=t.game,r=t.input,s=t.Input,u=t.profiler,c=t.KeyCode,l=t.Component},function(t){f=t.default},function(t){d=t.default},function(t){g=t.default},null,function(t){p=t.GlobalData},function(t){h=t.default},function(t){m=t.default},function(t){y=t.default},function(t){S=t.default},function(t){K=t.default},function(t){_=t.default},function(t){v=t.default}],execute:function(){var C;e._RF.push({},"8259aFOFAVL77VK2dgmp6ru","KernelComp",void 0);var I=o.ccclass;o.property,t("KernelComp",I("KernelComp")(C=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onLoad=function(){console.log("========= Kernel Init ========"),g.createUIRoot(),f.start(this),d.listenScreen(),y.enableLogger("Windows"==i.os),a.on("game_on_hide",(function(){p.isInBackgroud=!0,p.timeOfEnterBackground=S.getSysTime(),y.log("游戏进入后台",p.timeOfEnterBackground),m.getInstance().fire(h.EnterBackground)})),a.on("game_on_show",(function(){p.isInBackgroud=!1;var t=S.getSysTime()-p.timeOfEnterBackground;y.log("游戏进入前台",t),m.getInstance().fire(h.EnterForground,t),f.amend(t)}));K.setOrientation(1==_.pubInst.read(v.orientation,0)),r.on(s.EventType.KEY_DOWN,this.onKeyDown,this),u.hideStats()},o.start=function(){d.adaptScreen(),d.deepUpdateAlignment(g.getUIRoot())},o.onKeyDown=function(t){console.log("---- press ",t.keyCode),t.keyCode==c.F2&&this.chgShowStats()},o.chgShowStats=function(){"Windows"==i.os&&(u.isShowingStats()?u.hideStats():u.showStats())},e}(l))||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/KernelDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2e0c9QN8RZK050c3+FjQMAr","KernelDefine",void 0);e("OrientationTypeEnum",function(e){return e[e.both=0]="both",e[e.landscape=1]="landscape",e[e.portrait=2]="portrait",e}({})),e("BEHAVIOR_STATE",function(e){return e[e.READY=1]="READY",e[e.RUNNING=2]="RUNNING",e[e.SUCC=3]="SUCC",e[e.FAIL=4]="FAIL",e[e.STOPED=5]="STOPED",e}({})),e("IMG_BASE64_PNG","data:image/png;base64,"),e("IMG_BASE64_JPEG","data:image/jpeg;base64,"),e("IMG_BASE64_WEBP","data:image/webp;base64,"),e("FILE_TYPE",function(e){return e[e.Image=0]="Image",e[e.Video=1]="Video",e[e.Other=2]="Other",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/KernelEvent.ts",["cc"],(function(e){var _;return{setters:[function(e){_=e.cclegacy}],execute:function(){_._RF.push({},"5fd7fZZPyxOwbkDAqonj9pr","KernelEvent",void 0);e("default",{Restart:"kernel_Restart",OrientationChanged:"kernel_OrientationChanged",EnterBackground:"kernel_EnterBackground",EnterForground:"kernel_EnterForground",keyboard_down:"kernel_keyboard_down",NET_STATE:"kernel_NET_STATE",WS_ERROR_CODE:"kernel_WS_ERROR_CODE",HTTP_ERROR_CODE:"kernel_HTTP_ERROR_CODE",ERR_UNPACK_NETDATA:"kernel_ERR_UNPACK_NETDATA",test_reconnect:"kernel_test_reconnect",SCENE_BEFORE_SWITCH:"kernel_SCENE_BEFORE_SWITCH",SCENE_AFTER_SWITCH:"kernel_SCENE_AFTER_SWITCH",UI_LOADING_BEGIN:"kernel_UI_LOADING_BEGIN",UI_LOADING_PROGRESS:"kernel_UI_LOADING_PROGRESS",UI_LOADING_FINISH:"kernel_UI_LOADING_FINISH",e_screen_size:"kernel_e_screen_size",e_h5_live:"e_h5_live",e_native_live:"e_native_live",e_skin_change:"e_skin_change",e_map_ready:"e_map_ready",e_map_seeable:"e_map_seeable",e_map_addobject:"e_map_addobject",e_map_delobject:"e_map_delobject",joystick_move:"joystick_move",joystick_stop:"joystick_stop",remote_tex_loaded:"remote_tex_loaded"});_._RF.pop()}}}));

System.register("chunks:///_virtual/KernelInit.ts",["cc","./KernelComp.ts"],(function(e){var n,t,o,r;return{setters:[function(e){n=e.cclegacy,t=e.Node,o=e.director},function(e){r=e.KernelComp}],execute:function(){n._RF.push({},"0f433/V64ZNpIG66UIZSUXq","KernelInit",void 0),e("default",function(){function e(){}return e.Run=function(){if(!this._kernelNode){var e=new t("KernelNode");o.getScene().addChild(e),o.addPersistRootNode(e),this._kernelNode=e,e.addComponent(r)}},e.getKernelNode=function(){return this._kernelNode},e}())._kernelNode=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LeafWsPacket.ts",["cc","./ChannelMgr.ts","./pb_parse_config.ts","./NetDefine.ts","./MemoryStream.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./EngineDefine.ts","./StringUtil.ts"],(function(t){var n,e,r,a,i,s,u,c,d,f,l,o;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default},function(t){r=t.default},function(t){a=t.NetHeadSize,i=t.ProcessorType},function(t){s=t.default},function(t){u=t.default},function(t){c=t.default},function(t){d=t.default},function(t){f=t.UseingEngine,l=t.EngineCocos},function(t){o=t.default}],execute:function(){n._RF.push({},"9e913uwvMxP5YwQOO1td63i","LeafWsPacket",void 0);var h=a[i.LeafWs];t("default",function(){function t(t,n,e){this.cmd=void 0,this.data_struct=void 0,this.msg_name=void 0,this.cmd=t,this.data_struct=n,this.msg_name=e}var n=t.prototype;return n.debugName=function(){return this.msg_name||" "},n.pack=function(t,n,e){null==t&&(t={});var r,a=null;if(null!==this.data_struct&&void 0!==this.data_struct){var i=t;n||(i=this.data_struct.create(t));var u=this.data_struct.encode(i).finish();a=new Uint8Array(u)}return null!==a?((r=new s(h+a.length,e)).write_int16(0,this.cmd),r.write_buffer(h,a),new Uint8Array(r.buffer)):((r=new s(h,e)).write_int16(0,this.cmd),new Uint8Array(r.buffer))},n.unpack=function(t,n){if(null==t)return{cmd:0,errCode:1,data:null};var e=new Uint8Array(t),r=new s(e.length,n);return r.write_buffer(0,e),this.unpackStream(r)},n.unpackStream=function(t){if(null==t)return{cmd:0,errCode:1,data:null};var n=t.read_int16(0),e=null;if(null!==this.data_struct&&void 0!==this.data_struct)try{var a=new Uint8Array(t.buffer,h),i=this.data_struct.decode(a);e=this.data_struct.toObject(i,r)}catch(t){d.warn("unpack fail",n,t),c.getInstance().fire(u.ERR_UNPACK_NETDATA)}return d.log(n,0,e),{cmd:n,errCode:0,data:e}},n.unpackBody=function(t){if(null==t)return null;if(t.length<=0)return null;if(null!==this.data_struct&&void 0!==this.data_struct)try{if(f===l){var n=this.data_struct.decode(t);return this.data_struct.toObject(n,r)}}catch(t){d.warn("unpack fail",this.cmd,this.debugName(),t),c.getInstance().fire(u.ERR_UNPACK_NETDATA)}return null},n.sendToChannel=function(t,n,r){var a=e.getInstance().getChannel(t);if(a){var i=a.getProcessor();i.isPrintCmd(this.cmd)&&d.green(o.formatStr("%s pack %s(%d)",t,this.msg_name,this.cmd),JSON.stringify(n));var s=this.pack(n,r,i.isLittleEndian());a.sendMessage(this.cmd,s)}else d.warn("..... channel not created: ",t,this.msg_name,this.cmd)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/LeafWsProcessor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseProcessor.ts","./NetDefine.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./StringUtil.ts"],(function(e){var t,s,n,i,r,a,h,u,d,c;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy},function(e){n=e.default},function(e){i=e.NetHeadSize,r=e.ProcessorType,a=e.ConnState},function(e){h=e.default},function(e){u=e.default},function(e){d=e.default},function(e){c=e.default}],execute:function(){s._RF.push({},"1e8d2lNaZhLtbOF12LnuoVw","LeafWsProcessor",void 0);var o=i[r.LeafWs];e("default",function(e){function s(){return e.apply(this,arguments)||this}t(s,e);var n=s.prototype;return n.sendMessage=function(e,t){var s=this._channel.getState();return this.isNetHolded(e)?(this._nerverPushs[e]||(this.isPrintCmd(e)&&d.green(c.formatStr("%s [push send] %s(%d) bytes:%d",this._name,this._cmds[e].debugName(),e,t.length)),this._send_list.push({cmd:e,buf:t})),s!==a.reconnectfail&&s!==a.connectfail||u.getInstance().fire(h.NET_STATE,this._channel),!1):s===a.unconnect?(u.getInstance().fire(h.NET_STATE,this._channel),!1):this._sendHooker&&0==this._sendHooker(e)?void 0:(this.isPrintCmd(e)&&d.green(c.formatStr("%s [send] %s(%d) bytes:%d",this._name,this._cmds[e].debugName(),e,t.length)),this._channel.sendBuff(t))},n.onrecvBuff=function(e){if(!this.backgroundChecker()){var t=new DataView(e).getUint16(0,this._little_endian),s=this._cmds[t];if(s){var n=new Uint8Array(e,o),i=s.unpackBody(n);this.isPrintCmd(t)&&(this._paused?this._nerverPushs[t]?d.blue(c.formatStr("%s [ignore recv] %s(%d) bytes:%d",this._name,this._cmds[t].debugName(),t,n.length)):d.blue(c.formatStr("%s [push recv] %s(%d) bytes:%d",this._name,this._cmds[t].debugName(),t,n.length)):d.blue(c.formatStr("%s [recv] %s(%d) bytes:%d",this._name,this._cmds[t].debugName(),t,n.length)),d.blue(JSON.stringify(i,null,2))),this._paused?this._nerverPushs[t]||this._fire_list.push({cmd:t,data:i}):this._dispatcher.fire(t,i)}else d.red(this._name,"找不到cmd表: ",t)}},s}(n));s._RF.pop()}}}));

System.register("chunks:///_virtual/LiveAudioH5.ts",["cc","./logger.ts","./PlatfromH5.ts","./ToastHelper.ts","./Globals.ts"],(function(t){var e,i,n,r,o,a;return{setters:[function(t){e=t.cclegacy,i=t.sys},function(t){n=t.default},function(t){r=t.default},function(t){o=t.default},function(t){a=t.isNil}],execute:function(){e._RF.push({},"1cf28YwPElMTJsr8Vo+Nmh3","LiveAudioH5",void 0);var u=window.AudioContext||window.webkitAudioContext,s=function(){function t(t,e,i,n){this.size=0,this.buffer=[],this.inputSampleRate=0,this.inputSampleBits=0,this.outputSampleRate=0,this.outputSampleBits=0,this.inputSampleRate=t,this.inputSampleBits=e,this.outputSampleRate=i,this.outputSampleBits=n}var e=t.prototype;return e.clear=function(){this.buffer=[],this.size=0},e.input=function(t){this.buffer.push(new Float32Array(t)),this.size+=t.length},e.compress=function(){for(var t=new Float32Array(this.size),e=0,i=0;i<this.buffer.length;i++)t.set(this.buffer[i],e),e+=this.buffer[i].length;for(var n=parseInt((this.inputSampleRate/this.outputSampleRate).toString()),r=t.length/n,o=new Float32Array(r),a=0,u=0;a<r;)o[a]=t[u],u+=n,a++;return o},e.encodeAbWAV=function(){var t=Math.min(this.inputSampleRate,this.outputSampleRate),e=Math.min(this.inputSampleBits,this.outputSampleBits),i=this.compress(),n=i.length*(e/8),r=new ArrayBuffer(44+n),o=new DataView(r),a=0,u=function(t){for(var e=0;e<t.length;e++)o.setUint8(a+e,t.charCodeAt(e))};if(u("RIFF"),a+=4,o.setUint32(a,36+n,!0),a+=4,u("WAVE"),a+=4,u("fmt "),a+=4,o.setUint32(a,16,!0),a+=4,o.setUint16(a,1,!0),a+=2,o.setUint16(a,1,!0),a+=2,o.setUint32(a,t,!0),a+=4,o.setUint32(a,1*t*(e/8),!0),a+=4,o.setUint16(a,e/8*1,!0),a+=2,o.setUint16(a,e,!0),a+=2,u("data"),a+=4,o.setUint32(a,n,!0),a+=4,8===e)for(var s=0;s<i.length;s++,a++){var c=(f=Math.max(-1,Math.min(1,i[s])))<0?32768*f:32767*f;c=parseInt((255/(65535/(c+32768))).toString()),o.setInt8(a,c)}else for(s=0;s<i.length;s++,a+=2){var f=Math.max(-1,Math.min(1,i[s]));o.setInt16(a,f<0?32768*f:32767*f,!0)}return o},e.encodeWAV=function(){var t=this.encodeAbWAV();return new Blob([t],{type:"audio/wav"})},t}(),c=function(){function t(t){this.context=null,this.audioInput=null,this.recorder=null,this.audioData=null,this.context=f.createAudioCtx(),this.audioInput=this.context.createMediaStreamSource(t),this.recorder=this.context.createScriptProcessor(4096,1,1),this.audioData=new s(this.context.sampleRate,8,3675,8),this.recorder.onaudioprocess=function(t){this.audioData.input(t.inputBuffer.getChannelData(0))}.bind(this)}var e=t.prototype;return e.start=function(){this.audioInput.connect(this.recorder),this.recorder.connect(this.context.destination)},e.stop=function(){this.recorder.disconnect()},e.getArrBuffer=function(){return this.audioData.encodeAbWAV()},e.getBlob=function(){return this.audioData.encodeWAV()},e.clear=function(){this.audioData.clear()},t}(),f=t("default",function(){function t(){}return t.isSupport=function(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)||(n.log("不支持语音"),!1)},t.createAudioCtx=function(){return t.instAudioCtx=t.instAudioCtx||new u,t.instAudioCtx},t.initEnv=function(){i.isNative||(n.log("初始化录音环境"),r.getUserMedia({audio:!0},(function(e){t.gRecorder=new c(e),t.mediaStreamTrack="function"==typeof e.stop?e:e.getTracks()[1],t.mediaStreamTrack||(t.mediaStreamTrack=e.getTracks()[0]),n.log("录音环境初始化成功"),n.log("开始录音"),t.gRecorder.start()}),(function(t){n.log("访问用户媒体设备失败"),o.toast("kernel.fail_open_microphone")})))},t.startRecording=function(){i.isNative||t.door||(t.door=!0,t.gRecorder?(n.log("开始录音"),t.gRecorder.start()):t.initEnv())},t.stopRecording=function(){if(i.isNative)return null;if(!t.gRecorder)return n.log("not inited"),null;if(t.door){n.log("停止录音");var e=t.gRecorder.getArrBuffer();return t.gRecorder.clear(),t.gRecorder.stop(),t.door=!1,e}return null},t.playArrayBuffer=function(e){if(!i.isNative&&!(a(e)||e.byteLength<=0)){var r=t.createAudioCtx();r.decodeAudioData(e,(function(t){var e=r.createBufferSource();e.buffer=t,e.connect(r.destination),e.start(0),e.onended=function(t){n.log("play over")}}),(function(t){n.log("failed to decode the file")}))}},t.playBlob=function(e){if(!i.isNative&&null!=e){var n=new FileReader;n.onload=function(e){var i=new Uint8Array(e.target.result),n=new ArrayBuffer(i.length),r=new DataView(n),o=new Uint8Array(r.buffer);for(var a in i)o[a]=i[a];t.playArrayBuffer(n)},n.readAsArrayBuffer(e)}},t}());f.gRecorder=null,f.door=!1,f.mediaStreamTrack=null,f.instAudioCtx=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/LiveCore.ts",["cc","./PlatformUtil.ts","./LiveVideoH5.ts","./TimerManager.ts","./Globals.ts","./CHandler.ts"],(function(t){var n,e,i,o,u,s,c;return{setters:[function(t){n=t.cclegacy,e=t.sys},function(t){i=t.default},function(t){o=t.default},function(t){u=t.default},function(t){s=t.isNil},function(t){c=t.default}],execute:function(){n._RF.push({},"b744cBnZJ5FUKnKlPrn5scz","LiveCore",void 0),t("default",function(){function t(){}return t.setEnabled=function(n){t.enabled=n,n||t.stopLive()},t.isEnabled=function(){return this.enabled},t.isSupport=function(){return!!e.isNative||o.isSupport()},t.startLive=function(){t.enabled&&t.isSupport()&&i.startLive()},t.stopLive=function(){i.stopLive()},t.setLiveSpr=function(n,i,r){!e.isNative&&t.isSupport()&&(s(n)||(r<.03&&(r=.03),u.loopSecond(r,-1,new c(i,(function(t){o.captureVideo(t)}),n))))},t}()).enabled=!0,n._RF.pop()}}}));

System.register("chunks:///_virtual/LiveVideoH5.ts",["cc","./EventCenter.ts","./logger.ts","./PlatfromH5.ts","./ToastHelper.ts","./KernelEvent.ts"],(function(e){var t,i,a,r,n,u,c,o,s,d,f;return{setters:[function(e){t=e.cclegacy,i=e.sys,a=e.ImageAsset,r=e.Texture2D,n=e.SpriteFrame,u=e.Sprite},function(e){c=e.default},function(e){o=e.default},function(e){s=e.default},function(e){d=e.default},function(e){f=e.default}],execute:function(){t._RF.push({},"7b0bcu4qupB24APsMADsEz6","LiveVideoH5",void 0);var p=function(e){return e[e.uninited=0]="uninited",e[e.inited=1]="inited",e[e.openingCamera=2]="openingCamera",e[e.openCameraSucc=3]="openCameraSucc",e[e.living=4]="living",e[e.openCameraFail=5]="openCameraFail",e[e.stoped=6]="stoped",e}(p||{}),l=e("default",function(){function e(){}return e.isSupport=function(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)||(o.log("不支持直播"),!1)},e.initVideo=function(){if(i.isNative||!e.isSupport())return null;if(e.videoEle)return e.videoEle;var t=document.createElement("VIDEO");return t&&(t.setAttribute("id",e.vdoId),t.setAttribute("width",e.headPxSize),t.setAttribute("height",e.headPxSize),t.setAttribute("style","display: none"),document.body.appendChild(t),e.videoEle=t,e.curState=p.inited),t},e.onSuccess=function(t){e.curState=p.openCameraSucc,e.bOpenCameraSucc=!0,e.mediaStreamTrack="function"==typeof t.stop?t:t.getTracks()[1],e.mediaStreamTrack||(e.mediaStreamTrack=t.getTracks()[0]),e.videoEle.srcObject=t,e.videoEle.play(),e.curState=p.living},e.startLive=function(){if(!i.isNative&&e.isSupport()){if(e.videoEle=e.initVideo(),!e.videoEle)return o.log("====直播：初始化video失败"),void d.toast("kernel.fail_init_video");e.curState>=p.openingCamera&&e.curState<=p.living||(e.curState=p.openingCamera,o.log("====开始直播"),e.isSupport()?s.getUserMedia({video:{width:e.headSize,height:e.headSize}},e.onSuccess,(function(t){e.curState=p.openCameraFail,o.log("访问用户媒体设备失败"+t.name+", "+t.message),d.toast("kernel.fail_visit_camera")})):(e.curState=p.openCameraFail,d.toast("kernel.not_support_media")))}},e.stopLive=function(){o.log("====停止直播"),e.mediaStreamTrack&&(e.bOpenCameraSucc=!1),e.mediaStreamTrack&&e.mediaStreamTrack.stop(),e.mediaStreamTrack=null,e.curState=p.stoped},e.captureVideo=function(t){if(i.isNative||!e.isSupport())return null;if(!e.bOpenCameraSucc||!e.videoEle)return null;e.capCvs||(e.capCvs=document.createElement("canvas")),this.rendToSpr(t),0==this._curBuffer?this._curBuffer=1:this._curBuffer=0,e._capBuffers[this._curBuffer]||(e._capBuffers[this._curBuffer]={capImg:document.createElement("img")});var a=e.capCvs;a.width=e.videoEle.videoWidth,a.height=e.videoEle.videoHeight,a.getContext("2d").drawImage(e.videoEle,0,0,a.width,a.height),e._capBuffers[this._curBuffer]&&(e._capBuffers[this._curBuffer].capImg.src=a.toDataURL("image/jpeg"));var r=a.toDataURL("image/jpeg");return c.getInstance().fire(f.e_h5_live,r),""},e.rendToSpr=function(t){if(e._capBuffers[this._curBuffer]&&t){var i=new a(e._capBuffers[this._curBuffer].capImg),c=new r;c.image=i,t.spriteFrame=new n,t.spriteFrame.texture=c,t.sizeMode=u.SizeMode.CUSTOM}},e}());l.headPxSize="80px",l.headSize=80,l.curState=p.uninited,l.vdoId="live_video",l.bOpenCameraSucc=!1,l.videoEle=null,l.mediaStreamTrack=null,l.capCvs=null,l._curBuffer=1,l._capBuffers=[],t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CpnRemoteSprite.ts","./ResInfo.ts","./Globals.ts","./EventCenter.ts","./PlatformUtil.ts","./KernelEvent.ts"],(function(e){var n,o,l,t,r,i,a,u,s,d,c,f,g,h,p;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e.resources,t=e.assetManager,r=e.Prefab,i=e.SpriteFrame,a=e.isValid,u=e.Sprite},function(e){s=e.default},function(e){d=e.genResKey},function(e){c=e.isEmpty,f=e.isNil},function(e){g=e.default},function(e){h=e.default},function(e){p=e.default}],execute:function(){o._RF.push({},"82bf7k18F9Jw6a4/Fhc4wdo","LoadHelper",void 0);var v=e("default",function(){function e(){}return e.orientationUrl=function(e){if(!e)return null;var n=d(e);if(!this._orientationMap[n]){var o=e.respath;this._orientationMap[n]={h:o.replace("{0}","landscape"),v:o.replace("{0}","portrait")}}return h.isLandscape()?this._orientationMap[n].h:this._orientationMap[n].v},e.isResourceBundle=function(e){return null==e||""==e||"resources"===e},e.getBundle=function(e){return c(e)?l:t.getBundle(e)},e.loadBundle=function(e,n,o){var l=this.getBundle(e);l?o&&o(null,l):(console.log("======> load bundle begin ",e),f(n)?t.loadBundle(e,(function(n,l){n?console.warn("load bundle fial: ",e,n):console.log("======> load bundle end ",e),o&&o(n,l)})):t.loadBundle(e,n,(function(n,l){n?console.warn("load bundle fial: ",e,n):console.log("======> load bundle end ",e),o&&o(n,l)})))},e.releaseBungle=function(n){if(!e.isResourceBundle(n)){var o=t.getBundle(n);o&&(o.releaseAll(),t.removeBundle(o),console.log("======> release bundle: ",n))}},e.loadBundleList=function(e,n,o){var l=this;if(!e||e.length<=0)o&&o(!0);else{var t=e[0];e.splice(0,1),this.loadBundle(t,n,(function(r,i){r?(console.error("load bundle fail: ",t),o(!1)):e.length<=0?o&&o(!0):l.loadBundleList(e,n,o)}))}},e.getBundleRes=function(e,n,o){var l=this.orientationUrl({respath:e,bundleName:o});if(c(l))return null;var t=this.getBundle(o);return t?t.get(l,n):null},e.getRes=function(e,n){var o=this.orientationUrl(e);if(c(o))return null;var l=this.getBundle(e.bundleName);return l?l.get(o,n):null},e.getPrefab=function(e){return this.getRes(e,r)},e.loadRaw=function(e,n){c(e)?n&&n(new Error("url is invalid"),null):l.load(e,n)},e.loadRes=function(e,n,o,l){if(f(e))return console.error("res null"),void(o&&o(new Error("info is invalid"),null));var t=this.orientationUrl(e);if(c(t))return console.error("url null"),void(o&&o(new Error("url is invalid"),null));n==i&&(t+="/spriteFrame"),this.loadBundle(e.bundleName,e.options,(function(e,r){if(e)o&&o(e,null);else{var i=r.get(t,n);i?o&&o(null,i):l?r.load(t,n,l,(function(e,n){e&&console.error("load res fail",t),o&&o(e,n)})):r.load(t,n,(function(e,n){e&&console.error("load res fail",t),o&&o(e,n)}))}}))},e.loadResArray=function(e,o,l,t,r){if(!o||o.length<=0)r(new Error("invalid urls"),null);else{for(var i,a=[],u=n(o);!(i=u()).done;){var s=i.value;a.push(this.orientationUrl({respath:s,bundleName:e}))}this.loadBundle(e,null,(function(e,n){e?r(e,null):t?n.load(a,l,t,r):n.load(a,l,r)}))}},e.loadPrefab=function(e,n,o){this.loadRes(e,r,n,o)},e.loadPrefabEx=function(e,n,o){this.loadRes(e,r,(function(e,l){e||a(o.node)&&n.call(o,l)}))},e.loadSpriteFrame=function(e,n){this.loadRes(e,i,n)},e.loadWebImg=function(n,o,l){f(n)||c(o)||"http"!==o.substring(0,4)||n.getComponent(u)&&(n.getComponent(s)||n.addComponent(s)).setRemoteSprite(o,l)&&(e._remoteTexCache[o]?g.getInstance().fire(p.remote_tex_loaded,o,e._remoteTexCache[o]):t.loadRemote(o,(function(n,l){n?console.log("加载远程图片出错: "+n):(console.log("loaded web img: ",o),e._remoteTexCache[o]=l,g.getInstance().fire(p.remote_tex_loaded,o,l))})))},e}());v._orientationMap={},v._remoteTexCache={},o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingParam.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"2e3a87wZ91HzYjkIEIdFLqh","LoadingParam",void 0);i("LoadingParam",(function(i,e,n,t,a){this.bd_name=void 0,this.preload_dir=void 0,this.preload_prefab=void 0,this.need_login=void 0,this.finish_func=void 0,this.bd_name=i,this.preload_dir=e,this.preload_prefab=n,this.need_login=t,this.finish_func=a}));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadHelper.ts","./MathUtil.ts","./EventCenter.ts","./Globals.ts","./CocosUtil.ts","./CompColorBlur.ts"],(function(o){var t,i,n,e,s,a,r,d,l,h,c,g,u,f,p,m;return{setters:[function(o){t=o.inheritsLoose},function(o){i=o.cclegacy,n=o.sys,e=o._decorator,s=o.ProgressBar,a=o.Label,r=o.Prefab,d=o.v3,l=o.tween,h=o.Component},function(o){c=o.default},function(o){g=o.default},function(o){u=o.default},function(o){f=o.isEmpty},function(o){p=o.default},function(o){m=o.CompColorBlur}],execute:function(){var L;i._RF.push({},"f5e766K+LJB86YYGwV5Pb5z","LoadingView",void 0);var _=["亲，请稍安勿躁！第一次加载可能略微需要一点时间"];n.isBrowser&&(_=["亲，请稍安勿躁！第一次加载可能略微需要一点时间","请使用最新版本的手机系统可以获得最佳的游戏体验","在Safari和Chrome享受更震撼的游戏体验吧！","关闭闲置网页，给我多点空间，还你更多惊喜！","高清游戏资源可能略多，建议在WIFI环境下预加载！","登录失败，系统正在重试... （第 X 次）","加载过的游戏会在浏览器保留缓存，下次加载更流畅"]);var C=e.ccclass;e.property,o("LoadingView",C("LoadingView")(L=function(o){function i(){for(var t,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(t=o.call.apply(o,[this].concat(n))||this).barLoading=void 0,t.txtProgress=void 0,t.txtTip=void 0,t._hasGameLoaded=!1,t.curLoadProgress=0,t.curTipIndex=0,t.originPos=null,t._loadCfg=void 0,t}t(i,o);var n=i.prototype;return n.initData=function(o){this._loadCfg=o},n.onLoad=function(){var o=p.findNode(this.node,"ProgressBar"),t=p.findNode(this.node,"txt_desc");this.barLoading=o&&o.getComponent(s),this.txtProgress=t&&t.getComponent(a),this.setCurLoadProg(0)},n.start=function(){this.initTip(),this.loadBundleGame()},n.onDestroy=function(){u.untarget(this)},n.loadBundleGame=function(){var o=this;console.log("------ load game bundle"),c.loadBundle(this._loadCfg.bd_name,null,(function(t,i){t?o.scheduleOnce((function(){o.loadBundleGame()}),.5):o.loadGame(i)}))},n.loadGame=function(o){var t=this;f(this._loadCfg.preload_dir)?f(this._loadCfg.preload_prefab)?(console.log("------ load game skip: empty config"),this.onGameLoaded()):(console.log("------ load game prefab: ",this._loadCfg.preload_prefab),o.load(this._loadCfg.preload_prefab,r,(function(o,i,n){var e=o/i;t.setCurLoadProg(e)}),(function(i,n){if(i)return console.log(i),void t.loadGame(o);t.onGameLoaded()}))):(console.log("------ load game dir: ",this._loadCfg.preload_dir),o.loadDir(this._loadCfg.preload_dir,(function(o,i){var n=o/i;t.setCurLoadProg(n)}),(function(o,i){o&&console.log(o),t.onGameLoaded()})))},n.onGameLoaded=function(){console.log("------ load game finish"),this._hasGameLoaded=!0,this.showEnter()},n.showEnter=function(){console.log("------ show endter",this._hasGameLoaded),this._hasGameLoaded&&this._loadCfg.finish_func()},n.setCurLoadProg=function(o){if(!(this.curLoadProgress>=o)&&(this.barLoading&&(this.barLoading.progress=o),this.txtProgress))if(this._hasGameLoaded)this.txtProgress.string="完成";else{var t=Math.floor(100*o);this.txtProgress.string="正在加载资源["+t+"%]"}},n.initTip=function(){var o=this;if(!(_.length<=0)){var t=p.findNode(this.node,"txt_tip");if(t&&(this.txtTip=t.getComponent(a),this.txtTip&&t.active)){var i=this.txtTip.node.position;this.originPos=d(i.x,i.y,i.z),g.shuffle(_),this.txtTip.node.addComponent(m),this.txtTip.string=_[0],this.schedule((function(){o.changeTip()}),3)}}},n.changeTip=function(){var o=this;this.curTipIndex++,this.curTipIndex>=_.length&&(this.curTipIndex=0);var t=this.txtTip.node;l(t).call((function(){t.getComponent(m).blurAlpha(18,255,0)})).to(.35,{position:d(this.originPos.x,this.originPos.y+30,this.originPos.z)}).call((function(){o.txtTip.string=_[o.curTipIndex],t.position=d(o.originPos.x,o.originPos.y-30,o.originPos.z)})).hide().delay(.5).show().call((function(){t.getComponent(m).blurAlpha(18,0,255)})).to(.35,{position:d(this.originPos.x,this.originPos.y,this.originPos.z)}).start()},i}(h))||L);i._RF.pop()}}}));

System.register("chunks:///_virtual/LocalCache.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logger.ts","./config_db.ts"],(function(t){var e,a,n,o,l;return{setters:[function(t){e=t.createClass},function(t){a=t.cclegacy,n=t.sys},function(t){o=t.default},function(t){l=t.default}],execute:function(){a._RF.push({},"9ba6bIRXN9HXLafcwTncYjZ","LocalCache",void 0),t("default",function(){function t(t){this._name=null,this._localStorage=null,this._dataMap=null,this._name=t,this._localStorage=n.localStorage,this._dataMap={}}t.getInstance=function(e){return this._cacheMap[e]||(this._cacheMap[e]=new t(e)),this._cacheMap[e]};var a=t.prototype;return a.localKey=function(t){return this._name+"_"+t},a.read=function(t,e){var a=this._localStorage.getItem(this.localKey(t));return null==a&&null!=e&&(a=e),this._dataMap[t]=a,o.log("读取：",this.localKey(t),t,a,typeof a),a},a.write=function(t,e){this._dataMap[t]=e,o.log("存储：",this.localKey(t),t,e,typeof e),this._localStorage&&this._localStorage.setItem(this.localKey(t),e)},a.clear=function(){this._localStorage&&this._localStorage.clear(),this._dataMap={}},a.removeItem=function(t){this._localStorage&&this._localStorage.removeItem(this.localKey(t)),delete this._dataMap[t]},a.writeBool=function(t,e){e?this.write(t,1):this.write(t,0)},a.readBool=function(t,e){return 1==this.read(t,e?1:0)},a.writeInt=function(t,e){this.write(t,e)},a.readInt=function(t,e){var a=this.read(t,e);return parseInt(a)},e(t,null,[{key:"pubInst",get:function(){return t.getInstance(l.db_pub)}}]),t}())._cacheMap={},a._RF.pop()}}}));

System.register("chunks:///_virtual/logger.ts",["cc","./StringUtil.ts"],(function(o){var n,r,t;return{setters:[function(o){n=o.cclegacy,r=o.sys},function(o){t=o.default}],execute:function(){n._RF.push({},"35478c6y0NNuphOG5t4tyjk","logger",void 0);var i=o("default",function(){function o(){}return o._green=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: green;")},o._blue=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: blue;")},o._purple=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: purple;")},o._red=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: red;")},o._yellow=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: yellow;")},o._pink=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: pink;")},o._orange=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var c=t.formatStr.apply(t,[n].concat(i));o.log("%c"+c,"color: orange;")},o.green=function(o){},o.blue=function(o){},o.purple=function(o){},o.red=function(o){},o.yellow=function(o){},o.pink=function(o){},o.orange=function(o){},o.enableLogger=function(o){if(o){var n=r.isBrowser&&!r.isMobile;this.log=this.origin_console_log,this.warn=this.origin_console_warn,console.log=this.origin_console_log,console.warn=this.origin_console_warn,this.green=n&&this._green||this.origin_console_log,this.blue=n&&this._blue||this.origin_console_log,this.purple=n&&this._purple||this.origin_console_log,this.red=n&&this._red||this.origin_console_log,this.yellow=n&&this._yellow||this.origin_console_log,this.pink=n&&this._pink||this.origin_console_log,this.orange=n&&this._orange||this.origin_console_log}else this.log=this.no_cc,this.warn=this.no_cc,console.log=this.no_console,console.warn=this.no_console,this.green=this.no_cc,this.blue=this.no_cc,this.purple=this.no_cc,this.red=this.no_cc,this.yellow=this.no_cc,this.pink=this.no_cc,this.orange=this.no_cc},o}());i.origin_console_log=console.log,i.origin_console_warn=console.warn,i.origin_console_error=console.error,i.no_cc=function(o){},i.no_console=function(){},i.log=console.log,i.warn=console.warn,i.error=console.error,n._RF.pop()}}}));

System.register("chunks:///_virtual/LogicCenter.ts",["cc","./KernelEvent.ts","./EventCenter.ts","./logger.ts","./CommUtil.ts"],(function(n){var e,t,s,a,i;return{setters:[function(n){e=n.cclegacy},function(n){t=n.default},function(n){s=n.default},function(n){a=n.default},function(n){i=n.default}],execute:function(){e._RF.push({},"ab477aTzdhD5owbU5OBX6jC","LogicCenter",void 0),n("default",function(){function n(){this._managers=[],s.getInstance().listen(t.ERR_UNPACK_NETDATA,(function(){}),this)}n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.delInstance=function(){n._instance&&(n._instance.clear(),n._instance=null)};var e=n.prototype;return e.clear=function(){for(var n=0;n<this._managers.length;n++)a.log("unregist model ",n+1,i.getClsName(this._managers[n].getInstance())),this._managers[n].getInstance().do_dtor(),this._managers[n].delInstance();this._managers.length=0,this._managers=[]},e.registModel=function(n){n&&(n.delInstance?n.getInstance?this._managers.indexOf(n)<0&&(this._managers.push(n),a.log("regist model ",this._managers.length,i.getClsName(n.getInstance()))):a.error("no getInstance",n):a.error("no delInstance",n))},e.unregistModel=function(n){var e=this._managers.indexOf(n);e>=0&&(a.log("unregist model ",this._managers.length,i.getClsName(n.getInstance())),this._managers.splice(e,1),n.getInstance().do_dtor(),n.delInstance())},n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Main.ts","./config_bundles.ts","./config_db.ts","./config_server.ts","./config_ui.ts","./proto_msghead.mjs_cjs=&original=.js","./HotDefine.ts","./HotUpdate.ts","./KernelComp.ts","./KernelInit.ts","./CocosUtil.ts","./TweenUtil.ts","./AudioManager.ts","./CompCircle.ts","./CompCircleCD.ts","./CompClickEffect.ts","./CompColorBlur.ts","./CompFrameAni.ts","./CompJoystick.ts","./CompLightRot.ts","./CompPicNumber.ts","./CompSeqAni.ts","./CompTickLabel.ts","./ConfirmDialog.ts","./CpnGrid.ts","./CpnGridCell.ts","./CpnGridEx.ts","./CpnInnerScroll.ts","./CpnList.ts","./CpnListCell.ts","./ICell.ts","./CpnMap2d.ts","./CpnMapLabel.ts","./CpnMapTouch.ts","./CpnRemoteSprite.ts","./CpnSpine.ts","./CpnSprite.ts","./LoadHelper.ts","./ResInfo.ts","./SpriteHelper.ts","./CocosPool.ts","./BaseTimer.ts","./TimerManager.ts","./TimerMgr.ts","./Adaptor.ts","./BaseComp.ts","./BlockComp.ts","./CompRootView.ts","./SceneManager.ts","./ScreenHelper.ts","./ToastHelper.ts","./UImanager.ts","./ViewDefine.ts","./EngineDefine.ts","./ICodec.ts","./JsonCodec.ts","./ProtobufCodec.ts","./CHandler.ts","./DoubleList.ts","./MemoryStream.ts","./Procedure.ts","./heap.ts","./KernelDefine.ts","./KernelEvent.ts","./EventCenter.ts","./AudioCore.ts","./LiveAudioH5.ts","./LiveCore.ts","./LiveVideoH5.ts","./LocalCache.ts","./logger.ts","./Globals.ts","./LogicCenter.ts","./ModelBase.ts","./HttpChanel.ts","./HttpUtil.ts","./NetDefine.ts","./NetDispatcher.ts","./ChannelMgr.ts","./IChannel.ts","./TcpChannel.ts","./WsChannel.ts","./IoGamePacket.ts","./LeafWsPacket.ts","./PacketInterface.ts","./pb_parse_config.ts","./BaseProcessor.ts","./IProcessor.ts","./IoGameProcessor.ts","./JsonProcessor.ts","./LeafWsProcessor.ts","./ProcessorMgr.ts","./PathFinding.ts","./AGrid.ts","./ANode.ts","./DiagonalMovement.ts","./Heuristic.ts","./Util.ts","./AStarFinder.ts","./BestFirstFinder.ts","./BiAStarFinder.ts","./BiBestFirstFinder.ts","./BiBreadthFirstFinder.ts","./BiDijkstraFinder.ts","./BreadthFirstFinder.ts","./DijkstraFinder.ts","./IDAStarFinder.ts","./JPFAlwaysMoveDiagonally.ts","./JPFMoveDiagonallyIfAtMostOneObstacle.ts","./JPFMoveDiagonallyIfNoObstacles.ts","./JPFNeverMoveDiagonally.ts","./JumpPointFinder.ts","./JumpPointFinderBase.ts","./Collide.ts","./PhyDefines.ts","./PhyMath.ts","./PolygonUtil.ts","./Base64Util.ts","./CommUtil.ts","./DateUtil.ts","./MathUtil.ts","./MoneyUtil.ts","./PlatformUtil.ts","./PlatfromH5.ts","./StringUtil.ts","./UrlUtil.ts","./LoadingParam.ts","./LoadingView.ts","./CompRedDot.ts","./RedDotMgr.ts","./RedItem.ts","./wxSdk.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UImanager.ts","./config_ui.ts","./ScreenHelper.ts","./KernelInit.ts","./SceneManager.ts","./config_bundles.ts","./ViewDefine.ts","./LoadingParam.ts","./LoadHelper.ts"],(function(n){var e,t,i,a,o,u,c,r,s,f,l,d,g,p;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,a=n.Component},function(n){o=n.default},function(n){u=n.g_uiConfig,c=n.SceneConfigs},function(n){r=n.default},function(n){s=n.default},function(n){f=n.default},function(n){l=n.BDNames},function(n){d=n.EUILayer},function(n){g=n.LoadingParam},function(n){p=n.default}],execute:function(){var m;t._RF.push({},"53859BWBsRDZZFMNUyAQDxM","Main",void 0);var L=i.ccclass;i.property,n("Main",L("Main")(m=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var i=t.prototype;return i.onLoad=function(){s.Run()},i.start=function(){var n=this;p.loadBundle(l.general,null,(function(e,t){n.enterGame()})),r.hideHtmlLoading()},i.enterGame=function(){var n=new g(l.game,"prefabs/main","",!1,(function(){f.load2Scene(c.Game2dScene.name,u.UILogin)}));o.showView(u.LoadinView,d.Loading,n)},t}(a))||m);r.changeHtmlBkg(),t._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["cc","./Globals.ts"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.isNil}],execute:function(){n._RF.push({},"49ba7WE2JBBhaBoupHAZo8Z","MathUtil",void 0),t("default",function(){function t(){}return t.shuffle=function(t){for(var n,r,u=t.length;u;n=Math.floor(Math.random()*u),r=t[--u],t[u]=t[n],t[n]=r);},t.limitNum=function(t,n,u){if(!r(n)&&!r(u)&&n>u){var e=n;n=u,u=e}return r(u)||t>u&&(t=u),r(n)||t<n&&(t=n),t},t.getRandomInt=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},t.checkNumber=function(t){if(r(t)||""===t)return!1;"-"===t[0]&&(t=t.substring(1));return/^[\.0-9]+$/.test(t)},t.checkInt=function(t){if(r(t)||""===t)return!1;"-"===t[0]&&(t=t.substring(1));return/^[0-9]+$/.test(t)},t.parseNumber=function(t){return r(t)||""===t?0:parseFloat(t)},t}()).angle2ridian=Math.PI/180,n._RF.pop()}}}));

System.register("chunks:///_virtual/MemoryStream.ts",["cc","./logger.ts"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default}],execute:function(){e._RF.push({},"2081bUBKgVDDb/5HePcLnAY","MemoryStream",void 0);t("default",function(){function t(t,e){void 0===e&&(e=!1),this.buffer=null,this.data_view=null,this.little_endian=!1,this.little_endian=e,t>0&&(this.buffer=new ArrayBuffer(t),this.data_view=new DataView(this.buffer))}var e=t.prototype;return e.setBuffer=function(t){this.buffer=t,this.data_view=new DataView(this.buffer)},e.expand=function(t,e){(!this.buffer||this.buffer.byteLength-t<e.length)&&(this.buffer=new ArrayBuffer(length),this.data_view=new DataView(this.buffer)),new Uint8Array(this.buffer).set(e,t)},e.read_int8=function(t){return this.data_view.getUint8(t)},e.read_int16=function(t){return this.data_view.getInt16(t,this.little_endian)},e.read_int32=function(t){return this.data_view.getInt32(t,this.little_endian)},e.read_uint32=function(t){return this.data_view.getUint32(t,this.little_endian)},e.read_float32=function(t){return this.data_view.getFloat32(t,this.little_endian)},e.read_buffer=function(t,e){return new Uint8Array(this.buffer,t,e)},e.read_string=function(t){for(var e=t,i=new Uint8Array(this.buffer,e),n=0,r="";;){if(0==i[n]){n++;break}if(r+=String.fromCharCode(i[n]),e+ ++n>=this.buffer.byteLength)throw new Error("MemoryStream::readString: rpos("+(e+n)+")>="+this.buffer.byteLength+" overflow!")}return e+=n,r},e.write_int8=function(t,e){this.data_view.setInt8(t,e)},e.write_int16=function(t,e){this.data_view.setInt16(t,e,this.little_endian)},e.write_int32=function(t,e){this.data_view.setInt32(t,e,this.little_endian)},e.write_uint32=function(t,e){this.data_view.setUint32(t,e,this.little_endian)},e.write_float32=function(t,e){this.data_view.setFloat32(t,e,this.little_endian)},e.write_buffer=function(t,e){new Uint8Array(this.data_view.buffer,t).set(e)},e.safe_write_buffer=function(t,e){for(var i=new Uint8Array(this.data_view.buffer,t),n=i.length,r=0;r<n;r++)i[r]=e[r]},e.write_string=function(t,e){if(e.length>this.buffer.byteLength-t-1)i.log("memorystream::writeString: no free!");else{for(var n=new Uint8Array(this.buffer,t),r=0,a=0,f=e.length;a<f;a++)n[r++]=e.charCodeAt(a);n[r++]=0}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ModelBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimerManager.ts","./EventCenter.ts"],(function(t){var e,r,s,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy},function(t){s=t.default},function(t){n=t.default}],execute:function(){r._RF.push({},"78320neYdND8L2UAbRAXMR9","ModelBase",void 0);t("default",function(){function t(){this.m_dtor_listeners=null}var r=t.prototype;return r.do_dtor=function(){if(n.untarget(this),s.removeByTarget(this),this.m_dtor_listeners){for(var t=0,e=this.m_dtor_listeners.length;t<e;t++)this.m_dtor_listeners[t].callback.call(this.m_dtor_listeners[t].target);this.m_dtor_listeners.length=0,this.m_dtor_listeners=null}this.on_dtor()},r.listenDestory=function(t,r){if(t){this.m_dtor_listeners||(this.m_dtor_listeners=[]);for(var s,n=e(this.m_dtor_listeners);!(s=n()).done;){var i=s.value;if(i.callback===t&&i.target===r)return}this.m_dtor_listeners.push({callback:t,target:r})}},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8800aduEHxDpIwjGp6DN51o","MoneyUtil",void 0);t("default",function(){function t(){}return t.rmbYuan=function(t){return t/100},t.rmbServer=function(t){return Math.floor(100*t)},t.rmbStr=function(t){var n=this.rmbYuan(t);return this.formatGoldEx(n)},t.formatGold=function(t,n){var r=t<0,e=(t=Math.abs(t)).toString(),u=e.indexOf("."),i=e.substring(0,u),o=e.substring(u+1);if(u<0&&(i=e,o=""),i.length>3){for(var f="",a=0,c=i.length-1;c>=0;c--)f=i[c]+f,++a%3==0&&0!=c&&(f=","+f);i=f}return 0==o.length?o="00":1==o.length?o+="0":o=o.substring(0,2),r?"-"+i+"."+o:i+"."+o},t.formatGoldEx=function(t,n){if(void 0===n&&(n=2),t===Math.ceil(t))return t+".00";var r=t.toString(),e=r.indexOf(".");if(e<0)return r+".00";var u=r.length-1-e;return 1==u?r+"0":2==u?r:r.substring(0,e+n+1)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/NetDefine.ts",["cc"],(function(n){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){n("isFailErrCode",(function(n){return!(null==n||0==n)})),e._RF.push({},"7a3a9CjIINNrrSM1qF0mUJA","NetDefine",void 0);n("ConnState",function(n){return n[n.unconnect=0]="unconnect",n[n.connecting=1]="connecting",n[n.connectsucc=2]="connectsucc",n[n.connectfail=3]="connectfail",n[n.reconnecting=4]="reconnecting",n[n.reconnectsucc=5]="reconnectsucc",n[n.reconnectfail=6]="reconnectfail",n}({})),n("ProcessorType",function(n){return n[n.Json=0]="Json",n[n.LeafWs=1]="LeafWs",n[n.IoGameWS=2]="IoGameWS",n}({})),n("NetHeadSize",[0,2,15]),n("ChannelType",function(n){return n[n.Ws=0]="Ws",n[n.Tcp=1]="Tcp",n[n.Udp=2]="Udp",n[n.Http=3]="Http",n}({})),n("EHttpResult",function(n){return n[n.Idle=0]="Idle",n[n.Working=1]="Working",n[n.Succ=2]="Succ",n[n.Timeout=3]="Timeout",n[n.Aborted=4]="Aborted",n[n.Error=5]="Error",n}({}));n("IoGameCmdParser",function(){function n(){}return n.getMainCmd=function(n){return n>>16},n.getSubCmd=function(n){return 65535&n},n.getMergeCmd=function(n,e){return(n<<16)+e},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/NetDispatcher.ts",["cc","./logger.ts"],(function(e){var s,r;return{setters:[function(e){s=e.cclegacy},function(e){r=e.default}],execute:function(){s._RF.push({},"378dePvHeJPgLR/sT3ylmJ6","NetDispatcher",void 0);e("default",function(){function e(e){this._observers=[],this._fireInst=null,this._fireInst=e}var s=e.prototype;return s.addObserver=function(e){var s=this._observers.indexOf(e);s<0?this._observers.push(e):(this._observers[s]=e,r.red("重复添加",e))},s.removeObserver=function(e){var s=this._observers.indexOf(e);s>=0&&this._observers.splice(s,1)},s.fire=function(e,s){if(null!=e){for(var t in this._observers)this._observers[t][e]&&this._observers[t][e](s);this._fireInst.fire(e,s)}else r.log("无效的cmd")},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/PacketInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"69265e4GI1Hrq11GKMJNvat","PacketInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/PathFinding.ts",["cc","./ANode.ts","./AGrid.ts","./Util.ts","./DiagonalMovement.ts","./Heuristic.ts","./AStarFinder.ts","./BestFirstFinder.ts","./BreadthFirstFinder.ts","./DijkstraFinder.ts","./BiAStarFinder.ts","./BiBestFirstFinder.ts","./BiBreadthFirstFinder.ts","./BiDijkstraFinder.ts","./IDAStarFinder.ts","./JumpPointFinder.ts"],(function(t){var i,n,e,r,d,u,s,a,f,F,o,c,l,B,A,h;return{setters:[function(t){i=t.cclegacy},function(t){n=t.default},function(t){e=t.default},function(t){r=t.default},function(t){d=t.default},function(t){u=t.default},function(t){s=t.default},function(t){a=t.default},function(t){f=t.default},function(t){F=t.default},function(t){o=t.default},function(t){c=t.default},function(t){l=t.default},function(t){B=t.default},function(t){A=t.default},function(t){h=t.default}],execute:function(){i._RF.push({},"8deddAOfhZGnYSv+kmTltio","PathFinding",void 0);t("default",{ANode:n,Grid:e,Util:r,DiagonalMovement:d,Heuristic:u,AStarFinder:s,BestFirstFinder:a,BreadthFirstFinder:f,DijkstraFinder:F,BiAStarFinder:o,BiBestFirstFinder:c,BiBreadthFirstFinder:l,BiDijkstraFinder:B,IDAStarFinder:A,JumpPointFinder:h});i._RF.pop()}}}));

System.register("chunks:///_virtual/pb_parse_config.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2153fHuyydCFK2dK1fBQddy","pb_parse_config",void 0);e("default",{defaults:!0,longs:Number});t._RF.pop()}}}));

System.register("chunks:///_virtual/PhyDefines.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"e7688uqhzlHM4SMG6g8floB","PhyDefines",void 0);t("Point",(function(){this.x=0,this.y=0})),t("SatInfo",(function(){this.vertices=[],this.edges=[]})),t("SegmentInfo",(function(){this.x=0,this.y=0,this.a=void 0,this.b=void 0,this.dir=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/PhyMath.ts",["cc"],(function(n){var t,r;return{setters:[function(n){t=n.cclegacy,r=n.v2}],execute:function(){t._RF.push({},"6b26fV85xZMZpdnoyW7JcOm","PhyMath",void 0);var u=Math.atan2,e=Math.PI,o=180/e,i=e/180;n("default",function(){function n(){}return n.roundIn360=function(n){return n>=0&&n<=360?n:(n%360+360)%360},n.vec2angle=function(n,t){return this.roundIn360(u(t,n)*o)},n.vec2radian=function(n,t){return u(t,n)},n.radios2angle=function(n){return this.roundIn360(n*o)},n.angle2radios=function(n){return n*i},n.pAdd=function(n,t){return{x:n.x+t.x,y:n.y+t.y}},n.pSub=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},n.pRotate=function(n,t){return{x:n.x*t.x-n.y*t.y,y:n.x*t.y+n.y*t.x}},n.pForAngle=function(n){return{x:Math.cos(n),y:Math.sin(n)}},n.pRotateByAngle=function(n,t,r){return this.pAdd(t,this.pRotate(this.pSub(n,t),this.pForAngle(r)))},n.rotatePoints=function(n,t,u,e,o){o&&(n+=180);var i=(n=(n+360)%360)*Math.PI/180,a={x:0,y:0},c=[],y=null;for(var f in t){var s=t[f];y=r(s[0],s[1]),o&&(y.x=-y.x),c[f]=this.pRotateByAngle(y,a,i),c[f].x=c[f].x+(u||0),c[f].y=c[f].y+(e||0)}return c},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformUtil.ts",["cc","./Globals.ts","./LocalCache.ts","./logger.ts","./KernelEvent.ts","./EventCenter.ts","./PlatfromH5.ts","./Adaptor.ts","./KernelDefine.ts","./LiveAudioH5.ts","./LiveVideoH5.ts","./config_db.ts"],(function(t){var e,i,n,r,o,a,s,u,f,c,l,d,p,v,g,O,h,N,m,A,I,w,L;return{setters:[function(t){e=t.cclegacy,i=t.sys,n=t.director,r=t.game,o=t.view,a=t.macro,s=t.isValid,u=t.ImageAsset,f=t.Texture2D,c=t.SpriteFrame,l=t.Sprite},function(t){d=t.isEmpty,p=t.isNil},function(t){v=t.default},function(t){g=t.default},function(t){O=t.default},function(t){h=t.default},function(t){N=t.default},function(t){m=t.default},function(t){A=t.FILE_TYPE},function(t){I=t.default},function(t){w=t.default},function(t){L=t.default}],execute:function(){e._RF.push({},"4ca4a+pxVRMealpb+JwLG2D","PlatformUtil",void 0);var R=t("default",function(){function t(){}return t.isNative=function(){return i.isNative},t.exitApp=function(){n.end(),r.end()},t.openBrowser=function(t){d(t)||i.openURL(t)},t.isSupportWebp=function(){return i.hasFeature(i.Feature.WEBP)},t.getDeviceId=function(){return"622892525"},t.isPortrait=function(){return!this._curOrientation},t.isLandscape=function(){return this._curOrientation},t.getOrientation=function(){return t._curOrientation},t.swapOrientation=function(){this.isLandscape()?this.setOrientation(!1):this.setOrientation(!0)},t.setOrientation=function(e,n){if(void 0===n&&(n=!0),g.log("---change orientation",e),i.isNative);else{var r=t._curOrientation!==e;if(t._curOrientation=e,n&&v.pubInst.write(L.orientation,e?1:0),"Android"==i.os||"iOS"==i.os)e?o.setOrientation(a.ORIENTATION_LANDSCAPE):o.setOrientation(a.ORIENTATION_PORTRAIT);else{var s=o.getFrameSize();e?(o.setOrientation(a.ORIENTATION_LANDSCAPE),s.height>s.width&&o.setFrameSize(s.height,s.width)):(o.setOrientation(a.ORIENTATION_PORTRAIT),s.width>s.height&&o.setFrameSize(s.height,s.width))}m.onOrientation(e),r&&h.getInstance().fire(O.OrientationChanged)}},t.copy=function(t){if(!i.isNative)return N.webCopyString(t),void console.log("copy: ",t)},t.paste=function(){return""},t.setQRCode=function(t,e,i){if(console.log("setqr",e),!d(e)&&t&&s(t)){var n=new Image;n.src=e,n.onload=function(){if(t&&s(t)){var e=new u(n),r=new f;r.image=e;var o=new c;o.texture=r,t.getComponent(l).spriteFrame=o,i&&i.invokeWithExtra(n.width,n.height)}}}},t.startLive=function(){i.isNative||w.startLive()},t.stopLive=function(){i.isNative||w.stopLive()},t.startRecording=function(){i.isNative||I.startRecording()},t.stopRecording=function(){return i.isNative?null:I.stopRecording()},t.playAudioFile=function(t){i.isNative},t.playAudioArrayBuffer=function(t){p(t)||t.byteLength<=2||i.isNative||I.playArrayBuffer(t)},t.setCameraPos=function(t,e){i.isNative},t.setCameraSize=function(t,e){i.isNative},t.openCamera=function(t,e,n,r){i.isNative},t.openGallery=function(t,e,n,r){i.isNative},t.isImageFile=function(t,e){if(p(t)&&p(e))return!1;if(!p(e)&&e.indexOf("image")>=0)return!0;if(!p(t)){var i=t.substr(-3,3);if("png"==(i=i.toLowerCase())||"jpg"==i)return!0;if("jpeg"==(i=(i=t.substr(-4,4)).toLowerCase())||"jepg"==i)return!0}return!1},t.isVideoFile=function(t,e){return(!p(t)||!p(e))&&(!p(e)&&e.indexOf("video")>=0||!p(t)&&(t.indexOf("mp4")>=0||t.indexOf("avi")>=0))},t.getFileType=function(t,e){return this.isImageFile(t,e)?A.Image:this.isVideoFile(t,e)?A.Video:A.Other},t}());R._curOrientation=void 0,R.externalPath=null,R.MaxUploadSize=31457280,e._RF.pop()}}}));

System.register("chunks:///_virtual/PlatfromH5.ts",["cc","./Globals.ts","./ToastHelper.ts","./PlatformUtil.ts","./KernelDefine.ts"],(function(e){var t,a,n,i,r,o,l;return{setters:[function(e){t=e.cclegacy,a=e.sys},function(e){n=e.isEmpty,i=e.isNil},function(e){r=e.default},function(e){o=e.default},function(e){l=e.FILE_TYPE}],execute:function(){t._RF.push({},"fe399OHGrVIkJNCIUUObR6A","PlatfromH5",void 0);e("default",function(){function e(){}return e.createInput=function(e,t,i,r,o,l){if(a.isNative)return null;if(document.getElementById(e))return document.getElementById(e);var s=document.createElement("input");return s.setAttribute("id",e),s.setAttribute("type",t),s.setAttribute("accept",i),s.setAttribute("style",r),l&&!n(l)&&s.setAttribute("capture",l),o&&o.appendChild(s),s},e.Base64ToBlob=function(e){if(a.isNative)return null;for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=[],o=0;o<i.length;o++)r.push(i.charCodeAt(o));return new Blob([new Uint8Array(r)],{type:n})},e.BlobToBase64=function(e,t){if(!a.isNative){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(new Blob([e],{type:"image/png"}))}},e.imageCompression=function(t,n,r,o){if(a.isNative||i(n))o(t);else{var l=new Image;l.src=t,l.onload=function(){var a,i,s,c=l.width,u=l.height;if(u>n.height){var d=document.createElement("canvas"),f=d.getContext("2d"),g=document.createAttribute("width"),m=document.createAttribute("height");i=c=(u=n.height)/l.height*c,s=u,g.nodeValue=c,m.nodeValue=u,d.setAttributeNode(g),d.setAttributeNode(m),f.drawImage(l,0,0,c,u),a=d.toDataURL("image/png",r)}else a=t,i=l.width,s=l.height;i>n.width?e.ClippingImage(a,n.width,s,r,(function(e){o(e)})):o(a)}}},e.ClippingImage=function(e,t,n,i,r){if(a.isNative)r(e);else{var o=new Image;o.src=e;var l=document.createElement("canvas"),s=l.getContext("2d"),c=document.createAttribute("width"),u=document.createAttribute("height");c.nodeValue=t,u.nodeValue=n,l.setAttributeNode(u),l.setAttributeNode(c),o.onload=function(){s.drawImage(o,0,0,t,n,0,0,t,n);var e=l.toDataURL("image/png",i);r(e)}}},e.webCopyString=function(e){if(!a.isNative){var t=e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";var i=getSelection(),r=!1;i.rangeCount>0&&(r=i.getRangeAt(0)),document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;var o=!1;try{o=document.execCommand("copy")}catch(e){}return document.body.removeChild(n),r&&(i.removeAllRanges(),i.addRange(r)),o}},e.getUserMedia=function(e,t,n){if(a.isNative)return!1;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(e).then(t).catch(n);else if(navigator.webkitGetUserMedia)navigator.webkitGetUserMedia(e,t,n);else if(navigator.mozGetUserMedia)navigator.mozGetUserMedia(e,t,n);else if(navigator.getUserMedia)navigator.getUserMedia(e,t,n);else{if(!navigator.msGetUserMedia)return!1;navigator.msGetUserMedia(e,t,n)}return!0},e.h5OpenFile=function(e){if(!a.isNative){var t="input_file",n=document.getElementById(t);n||(this.createInput(t,"file","*.*","display: none",document.body,null),n=document.getElementById(t)),n?(n.onchange=function(t){if(i(t)||i(t.target))r.toast("kernel.open_file_fail");else{var a=t.target.files;if(a&&a.length>0)try{var n=o.getFileType(a[0].name,a[0].type);if(n==l.Other)return void r.toast("kernel.please_choose_video_or_pic");if(a[0].size&&a[0].size>o.MaxUploadSize)return void r.toast("kernel.upload_file_cannot_bigger_than");var s=new FileReader;s.onload=function(t){s.readyState==s.DONE&&e&&e(t.target.result,a[0],n)},s.readAsArrayBuffer(a[0])}catch(e){alert("拍照失败,请联系客服或尝试更换手机再试!")}}},n.click()):r.toast("kernel.open_file_fail")}},e.h5OpenVideo=function(e){if(!a.isNative){var t="input_video",n=document.getElementById(t);n||(this.createInput(t,"file","file/*.mp4","display: none",document.body,null),n=document.getElementById(t)),n?(n.onchange=function(t){if(i(t)||i(t.target))r.toast("kernel.open_file_fail");else{var a=t.target.files;if(a&&a.length>0)try{if(!o.isVideoFile(a[0].name,a[0].type))return void r.toast("kernel.please_choose_video");if(a[0].size&&a[0].size>o.MaxUploadSize)return void r.toast("kernel.upload_file_cannot_bigger_than");var n=new FileReader;n.onload=function(t){n.readyState==n.DONE&&e&&e(t.target.result,a[0])},n.readAsArrayBuffer(a[0])}catch(e){alert("拍照失败,请联系客服或尝试更换手机再试!")}}},n.click()):r.toast("kernel.open_file_fail")}},e.h5OpenGallery=function(e){if(!a.isNative){var t="input_picture",n=document.getElementById(t);n||(this.createInput(t,"file","image/*","display: none",document.body,null),n=document.getElementById(t)),n?(n.onchange=function(t){if(i(t)||i(t.target))r.toast("kernel.open_file_fail");else{var a=t.target.files;if(a&&a.length>0)try{if(!o.isImageFile(a[0].name,a[0].type))return void r.toast("kernel.please_choose_pic");var n=new FileReader;n.onload=function(t){n.readyState==n.DONE&&e&&e(t.target.result,a[0])},n.readAsDataURL(a[0])}catch(e){alert("拍照失败,请联系客服或尝试更换手机再试!")}}},n.click()):r.toast("kernel.open_galary_fail")}},e.h5OpenCamera=function(e){if(!a.isNative){var t="input_camera",n=document.getElementById(t);n||(this.createInput(t,"file","image/*","display: none",document.body,null),n=document.getElementById(t)),n?(n.onchange=function(t){if(i(t)||i(t.target))r.toast("kernel.open_file_fail");else{var a=t.target.files;if(a&&a.length>0)try{if(!o.isImageFile(a[0].name,a[0].type))return void r.toast("kernel.please_choose_pic");var n=new FileReader;n.onload=function(t){n.readyState==n.DONE&&e&&e(t.target.result,a[0])},n.readAsDataURL(a[0])}catch(e){alert("拍照失败,请联系客服或尝试更换手机再试!")}}},n.click()):r.toast("kernel.open_camera_fail")}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"3fd6886sSFC6IX7eE9N6unV","PolygonUtil",void 0);var e=Math.sqrt;t("PolygonUtil",function(){function t(){}return t.vec=function(t,r){return{x:t,y:r}},t.dot=function(t,r){return t.x*r.x+t.y*r.y},t.normalize=function(t){var r=e(t.x*t.x+t.y*t.y);return this.vec(t.x/r,t.y/r)},t.perp=function(t){return{x:t.y,y:-t.x}},t.segment=function(t,r,e){return(e=e||{x:0,y:0,a:t,b:r,dir:{x:r.x-t.x,y:r.y-t.y}}).a=t,e.b=r,e.dir.x=r.x-t.x,e.dir.y=r.y-t.y,e.x=e.dir.x,e.y=e.dir.y,e},t.polygon=function(t){if(!t)return null;for(var r=t.vertices.length,e=1;e<=r;e++)t.edges[e-1]=this.segment(t.vertices[e-1],t.vertices[e%r],t.edges[e-1]);return t},t.project=function(t,r){r=this.normalize(r);for(var e=this.dot(t.vertices[1],r),n=e,i=0,o=t.vertices.length;i<o;i++){var s=t.vertices[i],c=this.dot(s,r);c<e&&(e=c),c>n&&(n=c)}return[e,n]},t.contains=function(t,r){var e=r[0],n=r[1];return n<e&&(e=n,n=r[0]),t>=e&&t<=n},t.overlap=function(t,r){return this.contains(t[0],r)||this.contains(t[1],r)||this.contains(r[0],t)||this.contains(r[1],t)},t.sat=function(t,r){for(var e in t.edges){var n=t.edges[e],i=this.perp(n),o=this.project(t,i),s=this.project(r,i);if(!this.overlap(o,s))return!1}for(var c in r.edges){var u=r.edges[c],a=this.perp(u),v=this.project(t,a),f=this.project(r,a);if(!this.overlap(v,f))return!1}return!0},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Procedure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimerManager.ts","./KernelDefine.ts","./logger.ts","./CHandler.ts"],(function(t){var e,i,s,n,r,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){s=t.default},function(t){n=t.BEHAVIOR_STATE},function(t){r=t.default},function(t){o=t.default}],execute:function(){i._RF.push({},"cfa732DtkpNbJ5vct8EKvF0","Procedure",void 0);t("default",function(){function t(t,e){this._name="unknown",this._cur_state=n.READY,this._auto_clean=!1,this._procFunc=null,this._stopFunc=null,this._paramData=null,this._nextNode=null,this._groupNode=null,this._partList=null,this._tmrduration=0,this._duration=null,this._paramData=t,null!=e&&""!==e&&(this._name=e)}t.removeDeadNodes=function(e,i){if(e)if(e.isDone())e=i?new t(null):null;else for(;e.isSelfDone()&&e.isPartsDone()&&e._nextNode;)e=e._nextNode;else e=i?new t(null):null;return e};var i=t.prototype;return i.setName=function(t){return this._name=t,this},i.setParamData=function(t){return this._paramData=t,this},i.setStopFunc=function(t){return this._stopFunc=t,this},i.setProcFunc=function(t){return this._procFunc=t,this},i.addPart=function(t){t._groupNode=this;for(var e=t;e._nextNode;)e._nextNode._groupNode=this,e=e._nextNode;return this._partList||(this._partList=[]),this._partList.push(t),t},i.addPartCaller=function(e,i){void 0===i&&(i=null);var s=new t(null);return s.setProcFunc(e),s.setStopFunc(i),this.addPart(s)},i.then=function(t){var e=this.getLast();return e._nextNode=t,t._groupNode=e._groupNode,t},i.thenCaller=function(e,i){void 0===i&&(i=null);var s=new t(null);return s.setProcFunc(e),s.setStopFunc(i),this.then(s)},i.fixedName=function(){return this._groupNode?"["+this._groupNode._name+"."+this._name+"]":"[null."+this._name+"]"},i.getParamData=function(){return this._paramData},i.getLast=function(){for(var t=this;t._nextNode;)t=t._nextNode;return t},i.getNext=function(){return this._nextNode},i.cleanSelf=function(){this._procFunc=null,this._stopFunc=null,this._paramData=null},i.clean=function(){if(this.cleanSelf(),this._partList)for(var t in this._partList)this._partList[t].clean();this._nextNode&&this._nextNode.clean()},i.setCurState=function(t){switch(this._cur_state=t,t){case n.READY:case n.RUNNING:case n.STOPED:case n.SUCC:case n.FAIL:break;default:r.warn("error",this.fixedName())}},i.setDuration=function(t){return t<0&&(r.error("duration must >= 0"),t=0),this._duration=t,this._cur_state==n.RUNNING&&(this._duration<=0?this.setCurState(n.SUCC):this._tmrduration=s.delaySecond(this._duration,new o(this,this.resolve_succ),!1)),this},i.Proc=function(){this._procFunc?(this._procFunc.invodeWithFirst(this),this._auto_clean&&this.cleanSelf(),null!==this._duration&&void 0!==this._duration&&(this._duration<=0?this.setCurState(n.SUCC):s.isValid(this._tmrduration)||(this._tmrduration=s.delaySecond(this._duration,new o(this,this.resolve_succ),!1)))):null!==this._duration&&void 0!==this._duration?this._duration<=0?this.setCurState(n.SUCC):s.isValid(this._tmrduration)||(this._tmrduration=s.delaySecond(this._duration,new o(this,this.resolve_succ),!1)):this.setCurState(n.SUCC)},i.run=function(){if(this._cur_state==n.READY){if(this.setCurState(n.RUNNING),this._partList)for(var t in this._partList)this._partList[t].setCurState(n.RUNNING);if(this.Proc(),this._partList)for(var t in this._partList)this._partList[t].Proc()}return this.checkDone()},i.resolve=function(t){this._tmrduration=s.delTimer(this._tmrduration),this.isSelfDone()||(this.setCurState(t),this.checkDone())},i.resolve_fail=function(){this.resolve(n.FAIL)},i.resolve_succ=function(){this.resolve(n.SUCC)},i.checkDone=function(){var t=this.isSelfDone(),i=this.isPartsDone();if(t&&i)return this._nextNode&&!this._nextNode.isDone()?(this._nextNode._groupNode=this._groupNode,this._nextNode.run()):this._groupNode?this._groupNode.isSelfDone()&&this._groupNode.isPartsDone()?this._groupNode.checkDone():this._groupNode.run():(r.orange(this.fixedName(),"执行完成，整个Procedure执行完成",this._cur_state),this._cur_state);if(t)for(var s,o=e(this._partList);!(s=o()).done;){var u=s.value;u.isSelfDone()&&u.isPartsDone()&&u._nextNode&&u._nextNode._cur_state==n.READY&&(u._nextNode._groupNode=u._groupNode,u._nextNode.run())}return n.RUNNING},i.onStop=function(){},i.stop=function(){if(this._tmrduration=s.delTimer(this._tmrduration),this.isSelfDone()||(this.setCurState(n.STOPED),this._stopFunc&&this._stopFunc.invodeWithFirst(this),this.onStop()),this._auto_clean&&this.cleanSelf(),this._partList)for(var t in this._partList)this._partList[t].stop();this._nextNode&&this._nextNode.stop()},i.recover=function(){if(this.setCurState(n.READY),this._partList)for(var t in this._partList)this._partList[t].recover();this._nextNode&&this._nextNode.recover()},i.isSelfDone=function(){return this._cur_state>n.RUNNING},i.isPartsDone=function(){if(this._partList)for(var t in this._partList)if(!this._partList[t].isDone())return!1;return!0},i.isDone=function(){return!!this.isSelfDone()&&(!!this.isPartsDone()&&!(this._nextNode&&!this._nextNode.isDone()))},i.getSelfResult=function(){return this._cur_state===n.FAIL||this._cur_state===n.STOPED?n.FAIL:this._cur_state},i.getPartsResult=function(){if(this._partList)for(var t in this._partList)if(!this._partList[t].isDone())return this._partList[t]._cur_state;return n.SUCC},i.getResult=function(){return this.isSelfDone()?this.isPartsDone()?this._nextNode&&!this._nextNode.isDone()?n.RUNNING:n.SUCC:n.RUNNING:this._cur_state},i.isPlaying=function(){return this.getResult()==n.RUNNING},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ProcessorMgr.ts",["cc","./JsonProcessor.ts","./NetDefine.ts","./LeafWsProcessor.ts","./IoGameProcessor.ts"],(function(s){var e,r,o,t,n;return{setters:[function(s){e=s.cclegacy},function(s){r=s.default},function(s){o=s.ProcessorType},function(s){t=s.default},function(s){n=s.default}],execute:function(){e._RF.push({},"dadf6ewJLxG85KzT3EKk+ne","ProcessorMgr",void 0),s("default",function(){function s(){this._all_processors={}}s.getInstance=function(){return s._instance||(s._instance=new s),s._instance};var e=s.prototype;return e.createProcessor=function(s,e,c,i){return this._all_processors[s]||(e==o.Json?this._all_processors[s]=new r(s,c):e==o.LeafWs?this._all_processors[s]=new t(s,c):e==o.IoGameWS?this._all_processors[s]=new n(s,c):console.error("invalid type: ",e)),this._all_processors[s].setDispatcher(i),this._all_processors[s]},e.getProcessor=function(s){return this._all_processors[s]},s}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/proto_msghead.js",["./cjs-loader.mjs","./minimal.js"],(function(t,e){var n,o;return{setters:[function(t){n=t.default},function(t){o=t.__cjsMetaURL}],execute:function(){t("default",void 0);var r=t("__cjsMetaURL",e.meta.url);n.define(r,(function(e,n,o,r,a){var s,c=n("protobufjs/minimal.js"),l=c.Reader,d=c.Writer,i=c.util,u=c.roots.default||(c.roots.default={});u.pb=((s={}).MyExternalMessage=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cmdCode=0,t.prototype.protocolSwitch=0,t.prototype.cmdMerge=0,t.prototype.responseStatus=0,t.prototype.validMsg="",t.prototype.dataContent=i.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=d.create()),null!=t.cmdCode&&Object.hasOwnProperty.call(t,"cmdCode")&&e.uint32(8).int32(t.cmdCode),null!=t.protocolSwitch&&Object.hasOwnProperty.call(t,"protocolSwitch")&&e.uint32(16).int32(t.protocolSwitch),null!=t.cmdMerge&&Object.hasOwnProperty.call(t,"cmdMerge")&&e.uint32(24).int32(t.cmdMerge),null!=t.responseStatus&&Object.hasOwnProperty.call(t,"responseStatus")&&e.uint32(32).sint32(t.responseStatus),null!=t.validMsg&&Object.hasOwnProperty.call(t,"validMsg")&&e.uint32(42).string(t.validMsg),null!=t.dataContent&&Object.hasOwnProperty.call(t,"dataContent")&&e.uint32(50).bytes(t.dataContent),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof l||(t=l.create(t));for(var n=void 0===e?t.len:t.pos+e,o=new u.pb.MyExternalMessage;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:o.cmdCode=t.int32();break;case 2:o.protocolSwitch=t.int32();break;case 3:o.cmdMerge=t.int32();break;case 4:o.responseStatus=t.sint32();break;case 5:o.validMsg=t.string();break;case 6:o.dataContent=t.bytes();break;default:t.skipType(7&r)}}return o},t.decodeDelimited=function(t){return t instanceof l||(t=new l(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cmdCode&&t.hasOwnProperty("cmdCode")&&!i.isInteger(t.cmdCode)?"cmdCode: integer expected":null!=t.protocolSwitch&&t.hasOwnProperty("protocolSwitch")&&!i.isInteger(t.protocolSwitch)?"protocolSwitch: integer expected":null!=t.cmdMerge&&t.hasOwnProperty("cmdMerge")&&!i.isInteger(t.cmdMerge)?"cmdMerge: integer expected":null!=t.responseStatus&&t.hasOwnProperty("responseStatus")&&!i.isInteger(t.responseStatus)?"responseStatus: integer expected":null!=t.validMsg&&t.hasOwnProperty("validMsg")&&!i.isString(t.validMsg)?"validMsg: string expected":null!=t.dataContent&&t.hasOwnProperty("dataContent")&&!(t.dataContent&&"number"==typeof t.dataContent.length||i.isString(t.dataContent))?"dataContent: buffer expected":null},t.fromObject=function(t){if(t instanceof u.pb.MyExternalMessage)return t;var e=new u.pb.MyExternalMessage;return null!=t.cmdCode&&(e.cmdCode=0|t.cmdCode),null!=t.protocolSwitch&&(e.protocolSwitch=0|t.protocolSwitch),null!=t.cmdMerge&&(e.cmdMerge=0|t.cmdMerge),null!=t.responseStatus&&(e.responseStatus=0|t.responseStatus),null!=t.validMsg&&(e.validMsg=String(t.validMsg)),null!=t.dataContent&&("string"==typeof t.dataContent?i.base64.decode(t.dataContent,e.dataContent=i.newBuffer(i.base64.length(t.dataContent)),0):t.dataContent.length>=0&&(e.dataContent=t.dataContent)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.cmdCode=0,n.protocolSwitch=0,n.cmdMerge=0,n.responseStatus=0,n.validMsg="",e.bytes===String?n.dataContent="":(n.dataContent=[],e.bytes!==Array&&(n.dataContent=i.newBuffer(n.dataContent)))),null!=t.cmdCode&&t.hasOwnProperty("cmdCode")&&(n.cmdCode=t.cmdCode),null!=t.protocolSwitch&&t.hasOwnProperty("protocolSwitch")&&(n.protocolSwitch=t.protocolSwitch),null!=t.cmdMerge&&t.hasOwnProperty("cmdMerge")&&(n.cmdMerge=t.cmdMerge),null!=t.responseStatus&&t.hasOwnProperty("responseStatus")&&(n.responseStatus=t.responseStatus),null!=t.validMsg&&t.hasOwnProperty("validMsg")&&(n.validMsg=t.validMsg),null!=t.dataContent&&t.hasOwnProperty("dataContent")&&(n.dataContent=e.bytes===String?i.base64.encode(t.dataContent,0,t.dataContent.length):e.bytes===Array?Array.prototype.slice.call(t.dataContent):t.dataContent),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},t.getTypeUrl=function(t){return void 0===t&&(t="type.googleapis.com"),t+"/pb.MyExternalMessage"},t}(),s),o.exports=u,t("default",o.exports)}),(function(){return{"protobufjs/minimal.js":o}}))}}}));

System.register("chunks:///_virtual/proto_msghead.mjs_cjs=&original=.js",["./proto_msghead.js","./cjs-loader.mjs"],(function(e,t){var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./proto_msghead.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/ProtobufCodec.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"22977JG1IVHRoUSgv0Qu5yC","ProtobufCodec",void 0);e("default",function(){function e(){}var t=e.prototype;return t.encode=function(e,t,n){var r=e[t].create(n);return e[t].encode(r).finish()},t.decode=function(e,t,n){if(null===n)return null;var r=new Uint8Array(n),o=e[t].decode(r);return e[t].toObject(o)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/RedDotMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventCenter.ts","./logger.ts","./LogicCenter.ts","./ModelBase.ts"],(function(n){var t,e,i,o,s,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.default},function(n){o=n.default},function(n){s=n.default},function(n){c=n.default}],execute:function(){e._RF.push({},"e0707QbmClDGpng2WrgXyrs","RedDotMgr",void 0),n("default",function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this)._allReds={},t}t(e,n),e.getInstance=function(){return e._instance||(e._instance=new e,s.getInstance().registModel(e)),e._instance},e.delInstance=function(){e._instance&&(e._instance.do_dtor(),e._instance=null)};var c=e.prototype;return c.on_dtor=function(){},c.addRedItem=function(n){this._allReds[n.id]=n},c.addRedList=function(n){for(var t in n)this._allReds[t]=n[t]},c.registRed=function(n,t,e){this._allReds[n]?(i.otherInstance("reddot").listen(n,t,e),this._allReds[n].doCheck()):o.warn("no config: ",n)},c.triggerRed=function(n){this._allReds[n]?this._allReds[n].doCheck():o.warn("no config: ",n)},e}(c))._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/RedItem.ts",["cc","./EventCenter.ts"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy},function(t){i=t.default}],execute:function(){e._RF.push({},"b9747kLXSNLQabD79+jF4kk","RedItem",void 0);t("default",function(){function t(t,e,i,s){this.bInited=!1,this.id="",this.eventMgr=void 0,this.factors=[],this.checker=null,this.id=t,this.factors=i,this.checker=s,this.eventMgr=e}var e=t.prototype;return e.startUp=function(){if(!this.bInited)for(var t in this.bInited=!0,this.factors)this.eventMgr.listen(this.factors[t],(function(){i.otherInstance("reddot").fire(this.id,this.checker())}),this)},e.doCheck=function(){this.startUp(),i.otherInstance("reddot").fire(this.id,this.checker())},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ResInfo.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){e({createResInfo:function(e,i){var t={respath:e,bundleName:i};return n(t),t},genResKey:n}),i._RF.push({},"38963zbkhxKqq8iZR3HZEfv","ResInfo",void 0);e("ResInfo",(function(){this.respath=void 0,this.bundleName=void 0,this.uikey=void 0,this.options=void 0}));function n(e){if(void 0===e.uikey||null===e.uikey||""==e.uikey){var i=e.respath;e.uikey=(e.bundleName||"resources")+"_"+i}return e.uikey}i._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["cc","./config_bundles.ts","./CHandler.ts","./logger.ts","./TimerManager.ts","./UImanager.ts","./LoadHelper.ts","./ToastHelper.ts"],(function(e){var n,c,t,i,r,o,u,a,s;return{setters:[function(e){n=e.cclegacy,c=e.director},function(e){t=e.publicBundles},function(e){i=e.default},function(e){r=e.default},function(e){o=e.default},function(e){u=e.default},function(e){a=e.default},function(e){s=e.default}],execute:function(){n._RF.push({},"5e088rb64BP5b1R8UXlYw79","SceneManager",void 0);var l=e("default",function(){function e(){}return e.curSceneName=function(){return this._curSceneName},e.isSwitching=function(){return e._switching},e.load2Scene=function(n,c,s){var l=this,f=c.bundleName,d=t(f);a.isResourceBundle(f)||d.push(f),o.removeByTarget(this),a.loadBundleList(d,null,(function(t){t?a.loadPrefab(c,(function(t,a){t?(r.pink("加载失败, 0.2秒后重试",c.respath,f,n),o.delaySecond(.2,new i(l,(function(){e.load2Scene(n,c,s)})))):e.turn2Scene(n,(function(){s&&s();try{u.openPanel(c)}catch(e){r.error(e)}}))})):(r.pink("加载失败, 0.2秒后重试",c.respath,f,n),o.delaySecond(.2,new i(l,(function(){e.load2Scene(n,c,s)}))))}))},e.turn2Scene=function(n,t){var i=this;this._switching?console.warn("禁止嵌套调用turn2Scene",n,this._curSceneName):(this._switching=!0,console.log("-----切换场景开始: ",this._curSceneName,"---\x3e",n),this._preSceneName=this._curSceneName,c.preloadScene(n,(function(e,n,c){}),(function(r,o){if(r)return i._switching=!1,console.error("force2Scene error: ",r),void s.toast("资源加载失败, 请确保网络通畅, 稍后重试");c.loadScene(n,(function(){e._curSceneName=n,console.log("-----切换场景完成: ",e._preSceneName,"---\x3e",e._curSceneName),u.createUIRoot(),e._switching=!1,t&&t()}))})))},e}());l._preSceneName=void 0,l._curSceneName=void 0,l._switching=!1,n._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenHelper.ts",["cc","./PlatformUtil.ts","./config_ui.ts"],(function(e){var t,i,n,o,r,a,s,d,c;return{setters:[function(e){t=e.cclegacy,i=e.sys,n=e.screen,o=e.math,r=e.view},function(e){a=e.default},function(e){s=e.LONG_SCREEN,d=e.SHOT_SCREEN,c=e.DESIGN_SIZE}],execute:function(){t._RF.push({},"eea1fqb83ZC5axOpsjsxU3S","ScreenHelper",void 0);e("default",function(){function e(){}return e.nnn=function(e,t,i){(void 0===i?!e.classList.contains(t):i)?e.classList.add(t):e.classList.remove(t)},e.hideCocosToolbar=function(){if(!i.isNative&&!i.isMobile&&document){var e=document.querySelector.bind(document)(".toolbar");e&&(this.nnn(e,"hide",!0),this.setWindowSize())}},e.setWindowSize=function(){var e=Math.floor(window.innerWidth),t=Math.floor(window.innerHeight);n.windowSize=new o.Size(e,t)},e.onWindowResize=function(){if(!i.isNative){var e=Math.floor(window.innerWidth),t=Math.floor(window.innerHeight);if(a.isLandscape()){var n=s.height/s.width,o=d.height/d.width,l=e/t;if(l>=o&&l<=n)r.setFrameSize(e,t);else if(l<o){var h=Math.floor(e),u=Math.floor(e*c.height/c.width);r.setFrameSize(h,u)}else{var f=Math.floor(t*c.width/c.height),m=Math.floor(t);r.setFrameSize(f,m)}}else{var w=d.width/d.height,g=s.width/s.height,v=e/t;if(v>=g&&v<=w){var S=Math.floor(e),M=Math.floor(t);"Windows"==i.os&&(M-=4),r.setFrameSize(S,M)}else if(v<g){var p=Math.floor(e),y=Math.floor(e/g);"Windows"==i.os&&(y-=4),r.setFrameSize(p,y)}else{var b=Math.floor(t*w),z=Math.floor(t);"Windows"==i.os&&(z-=4),r.setFrameSize(b,z)}}}},e.setFullScreen=function(e){e?n.requestFullScreen():n.exitFullScreen()},e.isFullScreen=function(){return n.fullScreen()},e.changeHtmlBkg=function(){if(!i.isNative&&i.isBrowser&&document){var e=document.createElement("img");e.src="fullbkg1.jpg";var t=function(e){var t=e.width,i=e.height,n=window.innerWidth,o=window.innerHeight,r=n/t,a=o/i,s=Math.max(r,a)*t,d=Math.max(r,a)*i;document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundSize=s+"px "+d+"px";var c=(o-d)/2,l=(n-s)/2;document.body.style.backgroundPosition=l+"px "+c+"px"};e.onload=function(){document.body.style.backgroundImage="url("+e.src+")",t(e),window.addEventListener("resize",(function(){t(e)}))}}},e.hideHtmlLoading=function(){if(!i.isNative&&document)try{var e=document.getElementById("tmp_load_id1"),t=document.getElementById("tmp_load_id2");e&&e.remove(),t&&t.remove()}catch(e){console.log("hide html img fail")}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteHelper.ts",["cc","./CpnSprite.ts","./LoadHelper.ts","./ResInfo.ts","./Globals.ts","./EventCenter.ts","./logger.ts","./CocosUtil.ts","./CpnSpine.ts"],(function(e){var t,n,r,i,o,s,a,u,f,p,c,l;return{setters:[function(e){t=e.cclegacy,n=e.SpriteFrame,r=e.Sprite},function(e){i=e.default},function(e){o=e.default},function(e){s=e.genResKey},function(e){a=e.isNil,u=e.isEmpty},function(e){f=e.default},function(e){p=e.default},function(e){c=e.default},function(e){l=e.default}],execute:function(){t._RF.push({},"11f31wvbDNJt5Cj3gomHuqt","SpriteHelper",void 0);e("default",function(){function e(){}return e.setSprite=function(e,t){if(!a(e)){var r=e.node.getComponent(i);if(r?f.resInstance().removeByTarget(r):r=e.node.addComponent(i),a(t)||u(t.respath))return p.log("respath is nil"),e.spriteFrame=null,!0;var c=o.getRes(t,n);if(c)return e.spriteFrame=c,!0;var l=s(t);return f.resInstance().listen(l,r.onResLoaded,r),o.loadSpriteFrame(t,(function(e,t){e?f.resInstance().fire(l,null):f.resInstance().fire(l,t)})),!1}console.warn("invalid spr")},e.setNodeSprite=function(t,n){if(t)return t.getComponent(r)||t.addComponent(r),e.setSprite(t.getComponent(r),n)},e.playSpineAni=function(e,t,n,r,i,o){if(e){var s=c.initComponent(e,l);return s.loadSkeletonData(t),s.setAnimation(n,r,i,!1,o),s}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc","./Globals.ts"],(function(r){var t,n,e;return{setters:[function(r){t=r.cclegacy},function(r){n=r.isEmpty,e=r.isNil}],execute:function(){t._RF.push({},"23f0e5dSwRNxqgzJbtOeC69","StringUtil",void 0);var a=/(%d)|(%s)/,i=/%s/;r("default",function(){function r(){}return r.getSufix=function(r){if(n(r))return"";var t=r.lastIndexOf(".");return null==t||t<=0?"":r.substring(t+1)},r.format=function(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];return n.forEach((function(t,n){r=r.replace("{"+n+"}",t)})),r},r.formatStr=function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];var e=arguments.length;if(0===e)return"";var o=arguments[0];if(1===e)return""+o;var f="string"==typeof o&&a.test(o);if(f)for(var u=1;u<e;++u){var s=arguments[u],c="number"==typeof s?a:i;c.test(o)?o=o.replace(c,s):o+=" "+s}else for(var g=1;g<e;++g)o+=" "+arguments[g];return o},r.lineStr=function(r,t){if(void 0===t&&(t=12),!r)return"";if(r.length<t)return r;for(var n="",e=0;e<r.length;e++)n+=r[e],(e+1)%t==0&&(n+="\n");return n},r.shortString=function(r){return n(r)?r:r.length>10?r.substring(0,9)+"...":r},r.lastCharIs=function(r,t){return!n(r)&&r[r.length-1]==t},r.Bytes2Str=function(r,t){void 0===t&&(t=7);for(var n="",e=0;e<r.length;e++){var a=r[e].toString(16);1==a.length&&(a="0"+a),n+=" "+a,e==t&&(n+="  ")}return n},r.utf8ArrayToString=function(r){if(e(r)||r.length<=0)return"";var t,n,a,i,o,f;for(t="",a=r.length,n=0;n<a;)switch((i=r[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=r[n++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=r[n++],f=r[n++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&f)<<0)}return t},r.stringToUTF8Bytes=function(r){for(var t=[],n=0;n<r.length;n++){var e=r.charCodeAt(n);e<128?t.push(e):e<2048?t.push(192|e>>6,128|63&e):e<55296||e>=57344?t.push(224|e>>12,128|e>>6&63,128|63&e):(n++,e=65536+((1023&e)<<10|1023&r.charCodeAt(n)),t.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e))}return t},r.printLn=function(r){var t="{\n";for(var n in r)if("data"==n){for(var e in t+="data: {\n",r.data)t+="    "+e+": "+JSON.stringify(r.data[e])+"\n";t+="}\n"}else t+=n+": "+JSON.stringify(r[n])+"\n";t+="}",console.log(t)},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TcpChannel.ts",["cc","./NetDefine.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts"],(function(n){var t,e,c,o,u;return{setters:[function(n){t=n.cclegacy},function(n){e=n.ConnState},function(n){c=n.default},function(n){o=n.default},function(n){u=n.default}],execute:function(){t._RF.push({},"87f34/kJtdIYLG14bP42hAh","TcpChannel",void 0);n("default",function(){function n(n){this._curState=e.unconnect,this._name=void 0,this._name=n,u.purple("create tcp channel: ",n)}var t=n.prototype;return t.notifyState=function(){o.getInstance().fire(c.NET_STATE,this)},t.setProcessor=function(n){},t.connect=function(n,t,e,c){},t.reconnect=function(){},t.force_reconnect=function(){},t.disconnect=function(){throw new Error("Method not implemented.")},t.close=function(){},t.sendMessage=function(n,t){return!1},t.sendBuff=function(n){return!1},t.destroy=function(){},t.getState=function(){return this._curState},t.getName=function(){return this._name},t.getProcessor=function(){return null},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["cc","./TimerMgr.ts"],(function(e){var r,n,i;return{setters:[function(e){r=e.cclegacy,n=e.macro},function(e){i=e.default}],execute:function(){r._RF.push({},"ba6e1nl615C+aRalHEX9xC0","TimerManager",void 0);var t=e("default",function(){function e(){}return e.destroy=function(){e.s_inited=!1,e.g_Timer.destroy()},e.start=function(r){e.s_inited||(e.s_inited=!0,r.schedule(e.update,0,n.REPEAT_FOREVER))},e.update=function(r){e.g_Timer.update(r)},e.amend=function(r){e.g_Timer.amend(r)},e.loopFrame=function(r,n,i){return i.neverFirst(),e.g_Timer.loopFrame(r,n,i)},e.delayFrame=function(r,n){return n.neverFirst(),e.loopFrame(r,1,n)},e.loopSecond=function(r,n,i,t,o){return void 0===t&&(t=!1),void 0===o&&(o=!1),e.g_Timer.loopSecond(r,n,i,t,o)},e.delaySecond=function(r,n,i){return void 0===i&&(i=!1),n.neverFirst(),e.g_Timer.delaySecond(r,n,i)},e.isValid=function(r){return e.g_Timer.isValid(r)},e.delTimer=function(r){return e.g_Timer.delTimer(r)},e.removeByTarget=function(r){e.g_Timer.removeByTarget(r)},e.delTimerMap=function(r){if(r){var n=e;for(var i in r)r[i]=n.delTimer(r[i])}},e.delTimerArr=function(r,n){if(void 0===n&&(n=!1),r){for(var i=e,t=0;t<r.length;t++)r[t]=i.delTimer(r[t]);n&&(r.length=0)}},e.addToArr=function(r,n){if(r&&null!=n&&!(n<=0)){for(var i=e,t=0;t<r.length;t++)if(!i.isValid(r[t]))return void(r[t]=n);r.push(n)}},e}());t.s_inited=!1,t.g_Timer=new i,r._RF.pop()}}}));

System.register("chunks:///_virtual/TimerMgr.ts",["cc","./logger.ts","./BaseTimer.ts"],(function(t){var i,e,s,r;return{setters:[function(t){i=t.cclegacy},function(t){e=t.default},function(t){s=t.TimerType,r=t.BaseTimer}],execute:function(){i._RF.push({},"efcb2Txm6VHioAObMDDJBkh","TimerMgr",void 0),t("default",function(){function t(){this.s_updating=!1,this.willAment=!1,this.amentMillSec=0,this._timers=[]}var i=t.prototype;return i.destroy=function(){this._timers=[],this.s_updating=!1},i.update=function(t){this.s_updating=!0;for(var i=0,s=this._timers.length;i<s;i++){var r=this._timers[i];try{r.tick(t)}catch(t){e.error(i,t),r.stop()}r.isStoped()&&(r.stop(),this._timers.splice(i,1),i--,s--)}this.s_updating=!1,this.willAment&&this.amend(this.amentMillSec)},i.amend=function(t){if(!t||t<100)return this.willAment=!1,void(this.amentMillSec=0);if(this.s_updating)return this.willAment=!0,void(this.amentMillSec=t);this.willAment=!1,this.amentMillSec=0;var i=t/1e3;for(this.s_updating=!0;i>0;){i-=.05;for(var s=!1,r=0,n=this._timers.length;r<n;r++){var o=this._timers[r];try{o.isUseFix()&&(s=!0,o.tick(.05))}catch(t){o.stop(),e.log(t)}o.isStoped()&&(o.stop(),this._timers.splice(r,1),r--,n--)}if(!s)break}this.s_updating=!1},i.getIndex=function(t){for(var i=this._timers,e=i.length-1;e>=0;e--)if(i[e]&&i[e].isSame(t)&&!i[e].isStoped())return e;return-1},i.loopFrame=function(i,n,o){var h=this.getIndex(o);if(h>=0)return e.log("already exist this timer handler"),this._timers[h].getId();t.autoId++;var u=t.autoId,a=new r;return a.reset(s.frame,u,i,n,o,!1,!1),this._timers.push(a),u},i.delayFrame=function(t,i){return this.loopFrame(t,1,i)},i.loop=function(i,e,n,o,h){void 0===o&&(o=!1),void 0===h&&(h=!1);var u=this.getIndex(n);if(u>=0)return this._timers[u].getId();t.autoId++;var a=t.autoId,m=new r;return m.reset(s.second,a,i,e,n,o,h),this._timers.push(m),a},i.loopSecond=function(t,i,e,s,r){return void 0===s&&(s=!1),void 0===r&&(r=!1),this.loop(t,i,e,s,r)},i.delaySecond=function(t,i,e){return void 0===e&&(e=!1),this.loop(t,1,i,!1,e)},i.isValid=function(t){if(null==t||t<=0)return!1;for(var i=this._timers.length-1;i>=0;i--)if(this._timers[i]&&this._timers[i].getId()===t)return!this._timers[i].isStoped();return!1},i.delTimer=function(t){if(null==t||t<=0)return-1;for(var i=this._timers.length-1;i>=0;i--)if(this._timers[i]&&this._timers[i].getId()===t){this._timers[i].stop(),this.s_updating||this._timers.splice(i,1);break}return-1},i.removeByTarget=function(t){for(var i=this._timers.length-1;i>=0;i--)this._timers[i]&&this._timers[i].getTarget()===t&&(this._timers[i].stop(),this.s_updating||this._timers.splice(i,1))},t}()).autoId=0,i._RF.pop()}}}));

System.register("chunks:///_virtual/ToastHelper.ts",["cc","./LoadHelper.ts","./UImanager.ts","./ViewDefine.ts","./config_ui.ts","./CocosUtil.ts"],(function(t){var e,o,n,i,s,a,l,c,r,f,u,d;return{setters:[function(t){e=t.cclegacy,o=t.instantiate,n=t.Tween,i=t.Label,s=t.v3,a=t.tween,l=t.Prefab},function(t){c=t.default},function(t){r=t.default},function(t){f=t.EUILayer},function(t){u=t.KernelUI},function(t){d=t.default}],execute:function(){e._RF.push({},"e0d86ClsZFLy4aq58/OGa97","ToastHelper",void 0);var g=t("default",function(){function t(){}return t.clear=function(){t._toastList=[]},t.tip=function(e){null!=e&&""!=e&&c.loadPrefab(u.toast_bottom,(function(l,c){if(l)console.log("载入预制体失败:"+l);else if(r.getUIRoot()){var u=t.tipNode;d.isValid(u)||(t.tipNode=o(c),t.tipNode.parent=r.getLayer(f.Tip),u=t.tipNode),n.stopAllByTarget(u),u.getChildByName("cont").getComponent(i).string=e,u.scale=s(.5,.5,.5),a(u).show().to(.1,{scale:s(1.2,1.2,1)}).to(.08,{scale:s(1,1,1)}).delay(1.6).hide().start()}else console.log("没有Canvas")}))},t.toast=function(e,n){if(void 0===n&&(n=-78),null!=e&&""!==e)if(t._toastList[0]&&d.findNode(t._toastList[0],"cont").getComponent(i).string===e)t.playAni(t._toastList[0]);else{var a=function(a,l){if(a)console.log("载入预制体失败:"+a);else if(r.getUIRoot()){var c=o(l);if(c){for(var u=t._toastList,g=1,p=u.length-1;p>=0;p--){var v=u[p].position;u[p].setPosition(s(v.x,n+90*g,v.z)),g++}r.getLayer(f.Tip).addChild(c),u.push(c),c.setPosition(s(0,n,0)),d.findNode(c,"cont").getComponent(i).string=e,t.playAni(c)}else console.log("实例化失败")}else console.log("没有Canvas")},g=u.toast_mid;c.getRes(g,l)?a(null,c.getRes(g,l)):c.loadPrefab(g,a)}},t.playAni=function(e){n.stopAllByTarget(e);var o=t._toastList;e.scale=s(.5,.5,.5),a(e).to(.06,{scale:s(1.2,1.2,1.2)}).to(.06,{scale:s(1,1,1)}).delay(1.2).call((function(){for(var t=0;t<o.length;t++)if(o[t]===e){o.splice(t,1);break}})).destroySelf().start()},t}());g.tipNode=null,g._toastList=[],e._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUtil.ts",["cc","./Globals.ts"],(function(n){var t,o,e,i,r,a;return{setters:[function(n){t=n.cclegacy,o=n.UIOpacity,e=n.tween,i=n.isValid,r=n.bezier},function(n){a=n.isNil}],execute:function(){t._RF.push({},"ade79v94vdLdY0wpMiTtHF1","TweenUtil",void 0);n("default",function(){function n(){}return n.FadeInOpacity=function(n,t,i,r,a){void 0===r&&(r=0);var u=n.getComponent(o);if(!u)return console.error("not has uiOpacity Component"),null;null!=r&&(u.opacity=r);var c=e(u).to(t,{opacity:255},{easing:i||null});return a&&c.call((function(){a()})),c},n.FadeOutOpacity=function(n,t,i,r){var a=n.getComponent(o);if(!a)return console.error("not has uiOpacity Component"),null;var u=e(a).to(t,{opacity:0},{easing:i||null});return r&&u.call((function(){r()})),u},n.playTween=function(n,t,o,u,c,l,s){a(o)&&(o=n.getPosition());var p=e(o),f=u.y,y=c.y,d=u.x,g=c.x;p.parallel(e().to(t,{x:c.x},{progress:function(n,t,o,e){return r(n,d,g,t,e)},easing:l,onUpdate:function(t,e){i(n)?n.setPosition(o):p.stop()}}),e().to(t,{y:c.y},{progress:function(n,t,o,e){return r(n,f,y,t,e)},easing:l,onUpdate:function(t,e){i(n)?n.setPosition(o):p.stop()}})).call((function(){i(n)&&s&&s()})).start()},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/UImanager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CocosUtil.ts","./LoadHelper.ts","./ResInfo.ts","./ViewDefine.ts","./CompRootView.ts","./logger.ts"],(function(o){var t,n,e,i,r,a,u,s,l,c,f,p,d,h;return{setters:[function(o){t=o.asyncToGenerator,n=o.regeneratorRuntime},function(o){e=o.cclegacy,i=o.Node,r=o.UITransform,a=o.find,u=o.isValid,s=o.instantiate},function(o){l=o.default},function(o){c=o.default},function(o){f=o.genResKey},function(o){p=o.EUILayer},function(o){d=o.CompRootView},function(o){h=o.default}],execute:function(){e._RF.push({},"4d390QsU1dKy6IUhFwhe3+O","UImanager",void 0);var C=o("default",function(){function o(){}return o.createUIRoot=function(){if(l.isValid(this._uiRoot))return this._uiRoot;var t=this.getUIStage(),n=new i("ui_root");return n.getComponent(r)||n.addComponent(r),t.addChild(n),this._uiRoot=n,this._rootComp=n.addComponent(d),this._rootComp.listenClean((function(){o._rootComp=null,o._uiRoot=null})),n},o.getUIStage=function(){return a("Canvas")},o.getUIRoot=function(){return this._uiRoot},o.getLayer=function(o){return this._rootComp.getLayer(o)},o.showView=function(){var o=t(n().mark((function o(t,e){var i,r,a,u,s=arguments;return n().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(null==e&&(e=p.Panel),r=s.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=s[u];return o.abrupt("return",(i=this._rootComp).showView.apply(i,[t,e].concat(a)));case 3:case"end":return o.stop()}}),o,this)})));return function(t,n){return o.apply(this,arguments)}}(),o.closeView=function(o){this._rootComp.closeView(o)},o.getView=function(o){return this._rootComp.getView(o)},o.getWindow=function(o){return this._rootComp.getWindow(o)},o.playCloseAni=function(o){this._rootComp.playCloseAni(o)},o.onViewClose=function(o){this._rootComp.onViewClose(o)},o.openPanel=function(o){for(var t,n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];(t=this._rootComp).showView.apply(t,[o,p.Panel].concat(e))},o.openPopup=function(o){for(var t,n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];(t=this._rootComp).showView.apply(t,[o,p.Popup].concat(e))},o.addChildPrefab=function(t,n,e,i,r){if(n&&u(n)){var a=f(t);n[a]&&u(n[a])?r&&r(n[a]):c.loadPrefab(t,(function(u,s){u?console.warn("addPrefab fail: ",t.respath,t.bundleName,u):o.addPrefab(a,s,n,e,i,r)}))}},o.addPrefab=function(o,t,n,e,i,r){if(u(n))if(n[o]&&u(n[o]))r&&r(n[o]);else{var a=s(t);a&&(h.orange("创建子Prefab: ",o,t.name),e&&""!=e&&!a.getComponent(e)&&a.addComponent(e),n.addChild(a),n[o]=a,null!=i&&a.setSiblingIndex(i),r&&r(a))}},o.closeDialog=function(o){this._rootComp.closeDialog(o)},o.openDialog=function(o){this._rootComp.openDialog(o)},o}());C._uiRoot=null,C._rootComp=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UrlUtil.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"8cb55LxUfNKMKvu0OBpg0YK","UrlUtil",void 0);r("default",function(){function r(){}return r.ParseUrlDomain=function(){return window.location.href.split("?")[0]},r.ParserUrlToken=function(){var r=window.location.href.split("?");if(2!=r.length)return console.warn("href error "+window.location.href),"";for(var n=r[1].split("&"),t=0;t<n.length;t++){var e=n[t].split("=");if("token"==e[0].toLowerCase())return e[1]}return console.warn("parser token error"),""},r.parserUrl=function(){var r=window.location.href.split("?");return 2!=r.length?r:r[0]},r}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"9fbb7hMuNdKvpmLAWOodh7K","Util",void 0);var e=t("default",{});function n(t){for(var r=[[t.x,t.y]];t.parent;)t=t.parent,r.push([t.x,t.y]);return r.reverse()}function u(t,r,e,n){var u,a,h,o,s,c,f=Math.abs,i=[];for(u=t<e?1:-1,a=r<n?1:-1,s=(h=f(e-t))-(o=f(n-r));i.push([t,r]),t!==e||r!==n;)(c=2*s)>-o&&(s-=o,t+=u),c<h&&(s+=h,r+=a);return i}e.backtrace=n,e.biBacktrace=function(t,r){var e=n(t),u=n(r);return e.concat(u.reverse())},e.pathLength=function(t){var r,e,n,u,a,h=0;for(r=1;r<t.length;++r)e=t[r-1],n=t[r],u=e[0]-n[0],a=e[1]-n[1],h+=Math.sqrt(u*u+a*a);return h},e.interpolate=u,e.expandPath=function(t){var r,e,n,a,h,o,s=[],c=t.length;if(c<2)return s;for(h=0;h<c-1;++h)for(r=t[h],e=t[h+1],a=(n=u(r[0],r[1],e[0],e[1])).length,o=0;o<a-1;++o)s.push(n[o]);return s.push(t[c-1]),s},e.smoothenPath=function(t,r){var e,n,a,h,o,s,c,f,i,p=r.length,l=r[0][0],v=r[0][1],g=r[p-1][0],b=r[p-1][1];for(a=[[e=l,n=v]],h=2;h<p;++h){for(c=u(e,n,(s=r[h])[0],s[1]),i=!1,o=1;o<c.length;++o)if(f=c[o],!t.isWalkableAt(f[0],f[1])){i=!0;break}if(i){var d=r[h-1];a.push(d),e=d[0],n=d[1]}}return a.push([g,b]),a},e.compressPath=function(t){if(t.length<3)return t;var r,e,n,u,a,h,o=[],s=t[0][0],c=t[0][1],f=t[1][0],i=t[1][1],p=f-s,l=i-c;for(p/=a=Math.sqrt(p*p+l*l),l/=a,o.push([s,c]),h=2;h<t.length;h++)r=f,e=i,n=p,u=l,p=(f=t[h][0])-r,l=(i=t[h][1])-e,l/=a=Math.sqrt(p*p+l*l),(p/=a)===n&&l===u||o.push([r,e]);return o.push([f,i]),o},r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewDefine.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"1c824/pnttLUZXGg8YvRYrj","ViewDefine",void 0);i("EUILayer",function(i){return i[i.Panel=0]="Panel",i[i.GameEff=1]="GameEff",i[i.Popup=2]="Popup",i[i.Dialog=3]="Dialog",i[i.Tip=4]="Tip",i[i.Loading=5]="Loading",i}({})),i("EDialogType",function(i){return i[i.ok=1]="ok",i[i.ok_cancel=2]="ok_cancel",i}({})),i("EDialogMenuId",function(i){return i[i.cancel=0]="cancel",i[i.ok=1]="ok",i}({})),i("ParamConfirmDlg",(function(i,t,n,e,o){this.dlgName=void 0,this.content=void 0,this.dlgType=void 0,this.callback=void 0,this.thisObj=void 0,this.title=null,this.okTxt=null,this.cancelTxt=null,this.dlgName=i,this.content=t,this.dlgType=n,this.callback=e,this.thisObj=o}));t._RF.pop()}}}));

System.register("chunks:///_virtual/WsChannel.ts",["cc","./NetDefine.ts","./LoadHelper.ts","./Globals.ts","./KernelEvent.ts","./EventCenter.ts","./logger.ts"],(function(t){var e,n,s,i,c,o,r,a;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){s=t.ConnState},function(t){i=t.default},function(t){c=t.isNil},function(t){o=t.default},function(t){r=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"3924dzOQotCT5J9/5Qa73mF","WsChannel",void 0);var h=h||window.WebSocket||window.MozWebSocket;t("default",function(){function t(t){this._curState=s.unconnect,this._ws=null,this._url="",this._dataProcessor=null,this._onConnSuccess=void 0,this._onConnFail=void 0,this._reconnectTimes=3,this._name="",this._heartTmr=-1,this._heartInterval=8,this._name=t,a.purple("create ws channel: ",t),this.listenSystemNetworkH5()}var e=t.prototype;return e.listenSystemNetworkH5=function(){n.isNative||window.addEventListener&&window.addEventListener("offline",function(){a.red("---on h5 net disconnet"),this.ws_closed()}.bind(this))},e.notifyState=function(){r.getInstance().fire(o.NET_STATE,this)},e._on_opened=function(t){a.purple(this._name,"ws: onopen",this._url),this._curState==s.connecting?(this._curState=s.connectsucc,a.purple(this._name,"连接成功",this._url)):(this._curState=s.reconnectsucc,a.purple(this._name,"重连成功",this._url)),this._reconnectTimes=3,this._dataProcessor.flushRecvlist(),this._dataProcessor.flushSendlist();var e=this._onConnSuccess;this._onConnSuccess=null,this._onConnFail=null,e&&e.invoke(),this.notifyState(),this.startHeartBeat()},e._on_recv_data=function(t){this._dataProcessor.onrecvBuff(t.data)},e._on_close=function(t){a.purple(this._name,"ws: onclose",this._url),this.stopHeartBeat(),this.ws_closed()},e._on_error=function(t){a.purple(this._name,"ws: onerror",this._url),this.stopHeartBeat()},e.initWs=function(t,e){try{this._ws=new h(t,[],e)}catch(n){console.warn("initWs error: ",t,e),console.log(n)}this._ws&&(this._ws.binaryType="arraybuffer",this._ws.onopen=this._on_opened.bind(this),this._ws.onmessage=this._on_recv_data.bind(this),this._ws.onclose=this._on_close.bind(this),this._ws.onerror=this._on_error.bind(this))},e.destroy=function(){this.close(),this._dataProcessor=null},e.setProcessor=function(t){this._dataProcessor=t},e.connect=function(t,e,n,i){if(void 0===n&&(n=null),void 0===i&&(i=null),c(t)||""===t)a.warn(this._name,"无效的网络连接地址:",t);else{if(this._url===t&&null!==this._ws){if(this._curState==s.connecting)return void a.purple(this._name,"skip as connecting: ",t);if(this._curState==s.connectsucc)return void a.purple(this._name,"skip as connected: ",t);if(this._curState==s.reconnecting)return void a.purple(this._name,"skip as reconnecting: ",t);if(this._curState==s.reconnectsucc)return void a.purple(this._name,"skip as reconnected: ",t)}this.close(),this._curState=s.connecting,this._dataProcessor.clearSendlist(),this._dataProcessor.clearRecvlist(),this._dataProcessor.setPaused(!1),this._onConnSuccess=n,this._onConnFail=i,this._url=t,this._reconnectTimes=3,a.purple(this._name,"连接WebSocket: ",t),this.do_connect()}},e.reconnect=function(){this._reconnectTimes=3,this._curState==s.reconnectfail?(this._curState=s.reconnecting,a.purple(this._name,"断线重连: ",this._reconnectTimes,this._url),this.do_connect()):a.purple(this._name,"当前状态无法重连：",this._curState)},e.force_reconnect=function(){this._reconnectTimes=3,this._curState!=s.connecting&&this._curState!=s.reconnecting?(a.purple(this._name,"强制重连",this._curState,this._url),this.clear_ws(),this._curState=s.reconnecting,this.do_connect()):a.purple(this._name,"当前状态无法重连：",this._curState)},e.disconnect=function(){this._reconnectTimes=3,this._curState!=s.connecting&&this._curState!=s.reconnecting?(a.purple(this._name,"主动断线",this._curState,this._url),this.clear_ws(),this._curState=s.reconnectfail):a.purple(this._name,"当前状态无法断线：",this._curState)},e.do_connect=function(){var t=this;n.isNative?i.loadRaw("launcher/cacert",(function(e,n){e?(a.log(t._name,"载入cacert.pem失败: "+e),t.initWs(t._url,"")):t.initWs(t._url,""+n)})):t.initWs(t._url,"")},e.clear_ws=function(){if(this.stopHeartBeat(),this._ws){var t=this._ws;this._ws=null,t.onopen=function(t){},t.onmessage=function(t){},t.onclose=function(t){},t.onerror=function(t){},t.close()}},e.ws_closed=function(){if(a.purple(this._name,"断网了or连接失败了"),this.clear_ws(),this._reconnectTimes>0)this._reconnectTimes--,this._curState==s.connecting?(this._curState=s.connecting,a.purple(this._name,"再次尝试建立连接: ",this._reconnectTimes,this._url),this.do_connect()):(this._curState=s.reconnecting,a.purple(this._name,"断线重连: ",this._reconnectTimes,this._url),this.do_connect());else{var t=this._onConnFail;this._onConnFail=null,this._onConnSuccess=null,t&&t.invoke(),this._curState==s.connecting?(this._curState=s.connectfail,a.purple(this._name,"连接失败: ",this._reconnectTimes,this._url)):(this._curState=s.reconnectfail,a.purple(this._name,"重连失败: ",this._reconnectTimes,this._url)),a.purple(this._name,"网络断开",this._url),this.notifyState()}},e.close=function(){a.purple(this._name,"主动关闭WebSocket"),this._reconnectTimes=0,this._onConnSuccess=null,this._onConnFail=null,this._dataProcessor.clearSendlist(),this._dataProcessor.clearRecvlist(),this.clear_ws(),this._curState=s.unconnect},e.sendMessage=function(t,e){return this._dataProcessor.sendMessage(t,e)},e.sendBuff=function(t){return t?this._curState!==s.connectsucc&&this._curState!==s.reconnectsucc?(a.purple(this._name,"尚未建立连接"),this._curState===s.reconnectfail&&this.notifyState(),!1):this._ws?(this._ws.send(t),!0):(a.purple("尚未创建ws对象"),!1):(a.purple("数据为空"),!1)},e.sendHeartBeat=function(){this._dataProcessor.sendHeartBeat()},e.startHeartBeat=function(){var t=this;this.stopHeartBeat(),this._heartTmr=setInterval((function(){t.sendHeartBeat()}),Math.floor(1e3*this._heartInterval)),console.log(this._name,"开始心跳")},e.stopHeartBeat=function(){this._heartTmr<0||(clearInterval(this._heartTmr),this._heartTmr=-1,console.log(this._name,"停止心跳"))},e.getProcessor=function(){return this._dataProcessor},e.getState=function(){return this._curState},e.getName=function(){return this._name},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/wxSdk.ts",["cc","./HttpUtil.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"0f1d9ZWuxFH0IeaUUf/P3wR","wxSdk",void 0);var i=window.wx||null;t("wxSdk",function(){function t(){}return t.getUri=function(){return encodeURIComponent(window.location.href.split("#")[0])},t.isWechat=function(){return window.navigator.userAgent.toLowerCase().indexOf("micromessenger")>=0},t.getQueryString=function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=window.location.search.substr(1).match(n);return null!=e?unescape(e[2]):null},t.hasQueryString=function(t){return 1===window.location.search.indexOf(t)},t.initShare=function(t){this.initJssdk(t)},t.wxAuthorize=function(){this.getUri();window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=&response_type=c"},t.wxLogin=function(){var t=this.getUri(),n=localStorage.getItem("code");e.callGet("http://192.168.1.200:8080/wx/wxUser/login?code="+n+"&url="+t,null,(function(t,n){}))},t.initJssdk=function(t){var n=window.location.href.split("#")[0];e.callGet("http://192.168.1.200:8080//wx/share/getWxInfo?url="+n,null,(function(n,e){var o=e.data;i.config({debug:!1,appId:"",timestamp:o.timestamp,nonceStr:o.noncestr,signature:o.signature,jsApiList:["checkJsApi","updateTimelineShareData","getLocation","openLocation","scanQRCode","chooseWXPay","chooseImage","previewImage","uploadImage","updateAppMessageShareData","onMenuShareQQ"]}),i.ready((function(){i.updateTimelineShareData({title:t.title,link:window.location.href,imgUrl:t.imgUrl,success:function(){console.log("分享配置完成")}}),i.updateAppMessageShareData({title:t.title,desc:t.desc,link:window.location.href,imgUrl:t.imgUrl,type:t.type,dataUrl:t.dataUrl,success:function(){}}),i.omMenuShareQQ({title:t.title,desc:t.desc,link:window.location.href,imgUrl:t.imgUrl,success:function(){}}),i.omMenuShareQZone({title:t.title,desc:t.desc,link:window.location.href,imgUrl:t.imgUrl,success:function(){}})}))}))},t.getLocation=function(t){this.isWechat()&&this.initJssdk((function(){i.ready((function(){i.getLocation({type:"gcj02",success:function(n){console.log(n),t(n)},fail:function(t){console.log(t)}})}))}))},t.openLocation=function(t,n){this.isWechat()&&this.initJssdk((function(){i.openLocation({latitude:t.latitude,longitude:t.longitude})}))},t.chooseImage=function(t){this.isWechat&&this.initJssdk((function(){i.chooseImage({count:1,sizeTipe:["compressed"],sourceType:["album"],success:function(n){t(n)}})}))},t.wxPay=function(t,n){this.isWechat&&this.initJssdk((function(e){i.ready((function(){i.chooseWXPay({timestamp:t.timestamp,nonceStr:t.nonceStr,package:t.package,signType:t.paysign,success:function(t){n(t)},fail:function(t){n(t)}})}))}))},t}());n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});